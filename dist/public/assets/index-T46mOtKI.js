const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/lightgallery-DIyLdSLw.css","assets/lg-thumbnail-LA61IUbX.css","assets/lg-zoom-Dgc7Zwpq.css","assets/lg-autoplay-B3rOJiqo.css","assets/lg-fullscreen-aAdOoxAZ.css","assets/lg-video-CtDZYiSX.css"])))=>i.map(i=>d[i]);
var pl=e=>{throw TypeError(e)};var Aa=(e,t,r)=>t.has(e)||pl("Cannot "+r);var N=(e,t,r)=>(Aa(e,t,"read from private field"),r?r.call(e):t.get(e)),le=(e,t,r)=>t.has(e)?pl("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Z=(e,t,r,s)=>(Aa(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),ge=(e,t,r)=>(Aa(e,t,"access private method"),r);var ks=(e,t,r,s)=>({set _(a){Z(e,t,a,r)},get _(){return N(e,t,s)}});import{j as n,c as Hf,a as Jt,u as ct,B as Kf,P as $e,V as Wc,b as Tn,d as Wt,e as Ut,f as xe,R as Qf,g as Hc,h as Kc,i as Yf,k as na,A as Qo,D as Qc,C as Yc,l as Xf,m as Xc,n as Jc,S as Jf,T as Zc,I as Zf,o as ed,p as td,q as eg,r as rd,s as tg,L as nd,t as sd,v as rg,w as ng,x as ad,y as sg,z as ag,O as Yo,E as Xo,F as Jo,G as Zo,H as od,J as id,K as ld,M as ei,N as ti,Q as ri,U as og,W as ig,X as lg,Y as cg,Z as dg,_ as cd,$ as ug,a0 as sa,a1 as ni,a2 as dd,a3 as ud,a4 as md,a5 as pd,a6 as mg,a7 as hd,a8 as fd,a9 as gd,aa as bd,ab as xd,ac as vd,ad as yd,ae as pg,af as hg,ag as wd,ah as fg,ai as gg}from"./ui-vendor-CT0ZgvD6.js";import{a as aa,r as h,c as bg,R as ye,b as xg}from"./react-vendor--0RGCJ5T.js";import{L as oa,M as vg,T as yg,a as wg,P as jg,u as jd}from"./map-vendor-B4467gFJ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var kd,hl=aa;kd=hl.createRoot,hl.hydrateRoot;function kg(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var r,s,a,o,i=[],l="",c=e.split("/");for(c[0]||c.shift();a=c.shift();)r=a[0],r==="*"?(i.push(r),l+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(s=a.indexOf("?",1),o=a.indexOf(".",1),i.push(a.substring(1,~s?s:~o?o:a.length)),l+=~s&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(l+=(~s?"?":"")+"\\"+a.substring(o))):l+="/"+a;return{keys:i,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}var Nd={exports:{}},Cd={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jn=h;function Ng(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cg=typeof Object.is=="function"?Object.is:Ng,Sg=jn.useState,Eg=jn.useEffect,Rg=jn.useLayoutEffect,Dg=jn.useDebugValue;function Pg(e,t){var r=t(),s=Sg({inst:{value:r,getSnapshot:t}}),a=s[0].inst,o=s[1];return Rg(function(){a.value=r,a.getSnapshot=t,Ta(a)&&o({inst:a})},[e,r,t]),Eg(function(){return Ta(a)&&o({inst:a}),e(function(){Ta(a)&&o({inst:a})})},[e]),Dg(r),r}function Ta(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Cg(e,r)}catch{return!0}}function Ag(e,t){return t()}var Tg=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ag:Pg;Cd.useSyncExternalStore=jn.useSyncExternalStore!==void 0?jn.useSyncExternalStore:Tg;Nd.exports=Cd;var Ig=Nd.exports;const Og=bg.useInsertionEffect,Mg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Lg=Mg?h.useLayoutEffect:h.useEffect,_g=Og||Lg,Sd=e=>{const t=h.useRef([e,(...r)=>t[0](...r)]).current;return _g(()=>{t[0]=e}),t[1]},Fg="popstate",si="pushState",ai="replaceState",zg="hashchange",fl=[Fg,si,ai,zg],$g=e=>{for(const t of fl)addEventListener(t,e);return()=>{for(const t of fl)removeEventListener(t,e)}},Ed=(e,t)=>Ig.useSyncExternalStore($g,e,t),Bg=()=>location.search,Ug=({ssrSearch:e=""}={})=>Ed(Bg,()=>e),gl=()=>location.pathname,Gg=({ssrPath:e}={})=>Ed(gl,e?()=>e:gl),Vg=(e,{replace:t=!1,state:r=null}={})=>history[t?ai:si](r,"",e),qg=(e={})=>[Gg(e),Vg],bl=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[bl]>"u"){for(const e of[si,ai]){const t=history[e];history[e]=function(){const r=t.apply(this,arguments),s=new Event(e);return s.arguments=arguments,dispatchEvent(s),r}}Object.defineProperty(window,bl,{value:!0})}const Wg=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",Rd=(e="")=>e==="/"?"":e,Hg=(e,t)=>e[0]==="~"?e.slice(1):Rd(t)+e,Kg=(e="",t)=>Wg(xl(Rd(e)),xl(t)),xl=e=>{try{return decodeURI(e)}catch{return e}},Dd={hook:qg,searchHook:Ug,parser:kg,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},Pd=h.createContext(Dd),In=()=>h.useContext(Pd),Ad={},Td=h.createContext(Ad),Qg=()=>h.useContext(Td),ia=e=>{const[t,r]=e.hook(e);return[Kg(e.base,t),Sd((s,a)=>r(Hg(s,e.base),a))]},oi=()=>ia(In()),ii=(e,t,r,s)=>{const{pattern:a,keys:o}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",s),i=a.exec(r)||[],[l,...c]=i;return l!==void 0?[!0,(()=>{const d=o!==!1?Object.fromEntries(o.map((u,m)=>[u,c[m]])):i.groups;let p={...c};return d&&Object.assign(p,d),p})(),...s?[l]:[]]:[!1,null]},Id=e=>ii(In().parser,e,oi()[0]),Yg=({children:e,...t})=>{var p,u;const r=In(),s=t.hook?Dd:r;let a=s;const[o,i]=((p=t.ssrPath)==null?void 0:p.split("?"))??[];i&&(t.ssrSearch=i,t.ssrPath=o),t.hrefs=t.hrefs??((u=t.hook)==null?void 0:u.hrefs);let l=h.useRef({}),c=l.current,d=c;for(let m in s){const f=m==="base"?s[m]+(t[m]||""):t[m]||s[m];c===d&&f!==d[m]&&(l.current=d={...d}),d[m]=f,f!==s[m]&&(a=d)}return h.createElement(Pd.Provider,{value:a,children:e})},vl=({children:e,component:t},r)=>t?h.createElement(t,{params:r}):typeof e=="function"?e(r):e,Xg=e=>{let t=h.useRef(Ad),r=t.current;for(const s in e)e[s]!==r[s]&&(r=e);return Object.keys(e).length===0&&(r=e),t.current=r},en=({path:e,nest:t,match:r,...s})=>{const a=In(),[o]=ia(a),[i,l,c]=r??ii(a.parser,e,o,t),d=Xg({...Qg(),...l});if(!i)return null;const p=c?h.createElement(Yg,{base:c},vl(s,d)):vl(s,d);return h.createElement(Td.Provider,{value:d,children:p})},Jg=h.forwardRef((e,t)=>{const r=In(),[s,a]=ia(r),{to:o="",href:i=o,onClick:l,asChild:c,children:d,className:p,replace:u,state:m,...f}=e,b=Sd(g=>{g.ctrlKey||g.metaKey||g.altKey||g.shiftKey||g.button!==0||(l==null||l(g),g.defaultPrevented||(g.preventDefault(),a(i,e)))}),x=r.hrefs(i[0]==="~"?i.slice(1):r.base+i,r);return c&&h.isValidElement(d)?h.cloneElement(d,{onClick:b,href:x}):h.createElement("a",{...f,onClick:b,href:x,className:p!=null&&p.call?p(s===i):p,children:d,ref:t})}),Od=e=>Array.isArray(e)?e.flatMap(t=>Od(t&&t.type===h.Fragment?t.props.children:t)):[e],Zg=({children:e,location:t})=>{const r=In(),[s]=ia(r);for(const a of Od(e)){let o=0;if(h.isValidElement(a)&&(o=ii(r.parser,a.props.path,t||s,a.props.nest))[0])return h.cloneElement(a,{match:o})}return null};var On=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Wr=typeof window>"u"||"Deno"in globalThis;function Ot(){}function e0(e,t){return typeof e=="function"?e(t):e}function oo(e){return typeof e=="number"&&e>=0&&e!==1/0}function Md(e,t){return Math.max(e+(t||0)-Date.now(),0)}function tn(e,t){return typeof e=="function"?e(t):e}function Bt(e,t){return typeof e=="function"?e(t):e}function yl(e,t){const{type:r="all",exact:s,fetchStatus:a,predicate:o,queryKey:i,stale:l}=e;if(i){if(s){if(t.queryHash!==li(i,t.options))return!1}else if(!rs(t.queryKey,i))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||o&&!o(t))}function wl(e,t){const{exact:r,status:s,predicate:a,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(r){if(Hr(t.options.mutationKey)!==Hr(o))return!1}else if(!rs(t.options.mutationKey,o))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function li(e,t){return((t==null?void 0:t.queryKeyHashFn)||Hr)(e)}function Hr(e){return JSON.stringify(e,(t,r)=>io(r)?Object.keys(r).sort().reduce((s,a)=>(s[a]=r[a],s),{}):r)}function rs(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!rs(e[r],t[r])):!1}function Ld(e,t){if(e===t)return e;const r=jl(e)&&jl(t);if(r||io(e)&&io(t)){const s=r?e:Object.keys(e),a=s.length,o=r?t:Object.keys(t),i=o.length,l=r?[]:{};let c=0;for(let d=0;d<i;d++){const p=r?d:o[d];(!r&&s.includes(p)||r)&&e[p]===void 0&&t[p]===void 0?(l[p]=void 0,c++):(l[p]=Ld(e[p],t[p]),l[p]===e[p]&&e[p]!==void 0&&c++)}return a===i&&c===a?e:l}return t}function _s(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function jl(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function io(e){if(!kl(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!kl(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function kl(e){return Object.prototype.toString.call(e)==="[object Object]"}function t0(e){return new Promise(t=>{setTimeout(t,e)})}function lo(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Ld(e,t):t}function r0(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function n0(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var ci=Symbol();function _d(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===ci?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Fr,hr,cn,Lc,s0=(Lc=class extends On{constructor(){super();le(this,Fr);le(this,hr);le(this,cn);Z(this,cn,t=>{if(!Wr&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){N(this,hr)||this.setEventListener(N(this,cn))}onUnsubscribe(){var t;this.hasListeners()||((t=N(this,hr))==null||t.call(this),Z(this,hr,void 0))}setEventListener(t){var r;Z(this,cn,t),(r=N(this,hr))==null||r.call(this),Z(this,hr,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){N(this,Fr)!==t&&(Z(this,Fr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof N(this,Fr)=="boolean"?N(this,Fr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Fr=new WeakMap,hr=new WeakMap,cn=new WeakMap,Lc),di=new s0,dn,fr,un,_c,a0=(_c=class extends On{constructor(){super();le(this,dn,!0);le(this,fr);le(this,un);Z(this,un,t=>{if(!Wr&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){N(this,fr)||this.setEventListener(N(this,un))}onUnsubscribe(){var t;this.hasListeners()||((t=N(this,fr))==null||t.call(this),Z(this,fr,void 0))}setEventListener(t){var r;Z(this,un,t),(r=N(this,fr))==null||r.call(this),Z(this,fr,t(this.setOnline.bind(this)))}setOnline(t){N(this,dn)!==t&&(Z(this,dn,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return N(this,dn)}},dn=new WeakMap,fr=new WeakMap,un=new WeakMap,_c),Fs=new a0;function co(){let e,t;const r=new Promise((a,o)=>{e=a,t=o});r.status="pending",r.catch(()=>{});function s(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},r.reject=a=>{s({status:"rejected",reason:a}),t(a)},r}function o0(e){return Math.min(1e3*2**e,3e4)}function Fd(e){return(e??"online")==="online"?Fs.isOnline():!0}var zd=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Ia(e){return e instanceof zd}function $d(e){let t=!1,r=0,s=!1,a;const o=co(),i=x=>{var g;s||(m(new zd(x)),(g=e.abort)==null||g.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>di.isFocused()&&(e.networkMode==="always"||Fs.isOnline())&&e.canRun(),p=()=>Fd(e.networkMode)&&e.canRun(),u=x=>{var g;s||(s=!0,(g=e.onSuccess)==null||g.call(e,x),a==null||a(),o.resolve(x))},m=x=>{var g;s||(s=!0,(g=e.onError)==null||g.call(e,x),a==null||a(),o.reject(x))},f=()=>new Promise(x=>{var g;a=v=>{(s||d())&&x(v)},(g=e.onPause)==null||g.call(e)}).then(()=>{var x;a=void 0,s||(x=e.onContinue)==null||x.call(e)}),b=()=>{if(s)return;let x;const g=r===0?e.initialPromise:void 0;try{x=g??e.fn()}catch(v){x=Promise.reject(v)}Promise.resolve(x).then(u).catch(v=>{var S;if(s)return;const y=e.retry??(Wr?0:3),w=e.retryDelay??o0,j=typeof w=="function"?w(r,v):w,k=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,v);if(t||!k){m(v);return}r++,(S=e.onFail)==null||S.call(e,r,v),t0(j).then(()=>d()?void 0:f()).then(()=>{t?m(v):b()})})};return{promise:o,cancel:i,continue:()=>(a==null||a(),o),cancelRetry:l,continueRetry:c,canStart:p,start:()=>(p()?b():f().then(b),o)}}function i0(){let e=[],t=0,r=l=>{l()},s=l=>{l()},a=l=>setTimeout(l,0);const o=l=>{t?e.push(l):a(()=>{r(l)})},i=()=>{const l=e;e=[],l.length&&a(()=>{s(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{a=l}}}var st=i0(),zr,Fc,Bd=(Fc=class{constructor(){le(this,zr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),oo(this.gcTime)&&Z(this,zr,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Wr?1/0:5*60*1e3))}clearGcTimeout(){N(this,zr)&&(clearTimeout(N(this,zr)),Z(this,zr,void 0))}},zr=new WeakMap,Fc),mn,pn,It,mt,ps,$r,$t,nr,zc,l0=(zc=class extends Bd{constructor(t){super();le(this,$t);le(this,mn);le(this,pn);le(this,It);le(this,mt);le(this,ps);le(this,$r);Z(this,$r,!1),Z(this,ps,t.defaultOptions),this.setOptions(t.options),this.observers=[],Z(this,It,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Z(this,mn,c0(this.options)),this.state=t.state??N(this,mn),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=N(this,mt))==null?void 0:t.promise}setOptions(t){this.options={...N(this,ps),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&N(this,It).remove(this)}setData(t,r){const s=lo(this.state.data,t,this.options);return ge(this,$t,nr).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){ge(this,$t,nr).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,a;const r=(s=N(this,mt))==null?void 0:s.promise;return(a=N(this,mt))==null||a.cancel(t),r?r.then(Ot).catch(Ot):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(N(this,mn))}isActive(){return this.observers.some(t=>Bt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ci||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!Md(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=N(this,mt))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=N(this,mt))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),N(this,It).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(N(this,mt)&&(N(this,$r)?N(this,mt).cancel({revert:!0}):N(this,mt).cancelRetry()),this.scheduleGc()),N(this,It).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ge(this,$t,nr).call(this,{type:"invalidate"})}fetch(t,r){var c,d,p;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(N(this,mt))return N(this,mt).continueRetry(),N(this,mt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(m=>m.options.queryFn);u&&this.setOptions(u.options)}const s=new AbortController,a=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(Z(this,$r,!0),s.signal)})},o=()=>{const u=_d(this.options,r),m={queryKey:this.queryKey,meta:this.meta};return a(m),Z(this,$r,!1),this.options.persister?this.options.persister(u,m,this):u(m)},i={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};a(i),(c=this.options.behavior)==null||c.onFetch(i,this),Z(this,pn,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=i.fetchOptions)==null?void 0:d.meta))&&ge(this,$t,nr).call(this,{type:"fetch",meta:(p=i.fetchOptions)==null?void 0:p.meta});const l=u=>{var m,f,b,x;Ia(u)&&u.silent||ge(this,$t,nr).call(this,{type:"error",error:u}),Ia(u)||((f=(m=N(this,It).config).onError)==null||f.call(m,u,this),(x=(b=N(this,It).config).onSettled)==null||x.call(b,this.state.data,u,this)),this.scheduleGc()};return Z(this,mt,$d({initialPromise:r==null?void 0:r.initialPromise,fn:i.fetchFn,abort:s.abort.bind(s),onSuccess:u=>{var m,f,b,x;if(u===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(g){l(g);return}(f=(m=N(this,It).config).onSuccess)==null||f.call(m,u,this),(x=(b=N(this,It).config).onSettled)==null||x.call(b,u,this.state.error,this),this.scheduleGc()},onError:l,onFail:(u,m)=>{ge(this,$t,nr).call(this,{type:"failed",failureCount:u,error:m})},onPause:()=>{ge(this,$t,nr).call(this,{type:"pause"})},onContinue:()=>{ge(this,$t,nr).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),N(this,mt).start()}},mn=new WeakMap,pn=new WeakMap,It=new WeakMap,mt=new WeakMap,ps=new WeakMap,$r=new WeakMap,$t=new WeakSet,nr=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Ud(s.data,this.options),fetchMeta:t.meta??null};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return Ia(a)&&a.revert&&N(this,pn)?{...N(this,pn),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),st.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),N(this,It).notify({query:this,type:"updated",action:t})})},zc);function Ud(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Fd(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function c0(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Kt,$c,d0=($c=class extends On{constructor(t={}){super();le(this,Kt);this.config=t,Z(this,Kt,new Map)}build(t,r,s){const a=r.queryKey,o=r.queryHash??li(a,r);let i=this.get(o);return i||(i=new l0({cache:this,queryKey:a,queryHash:o,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(i)),i}add(t){N(this,Kt).has(t.queryHash)||(N(this,Kt).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=N(this,Kt).get(t.queryHash);r&&(t.destroy(),r===t&&N(this,Kt).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){st.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return N(this,Kt).get(t)}getAll(){return[...N(this,Kt).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>yl(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>yl(t,s)):r}notify(t){st.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){st.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){st.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Kt=new WeakMap,$c),Qt,gt,Br,Yt,pr,Bc,u0=(Bc=class extends Bd{constructor(t){super();le(this,Yt);le(this,Qt);le(this,gt);le(this,Br);this.mutationId=t.mutationId,Z(this,gt,t.mutationCache),Z(this,Qt,[]),this.state=t.state||Gd(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){N(this,Qt).includes(t)||(N(this,Qt).push(t),this.clearGcTimeout(),N(this,gt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Z(this,Qt,N(this,Qt).filter(r=>r!==t)),this.scheduleGc(),N(this,gt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){N(this,Qt).length||(this.state.status==="pending"?this.scheduleGc():N(this,gt).remove(this))}continue(){var t;return((t=N(this,Br))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,o,i,l,c,d,p,u,m,f,b,x,g,v,y,w,j,k,S,A;Z(this,Br,$d({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(O,M)=>{ge(this,Yt,pr).call(this,{type:"failed",failureCount:O,error:M})},onPause:()=>{ge(this,Yt,pr).call(this,{type:"pause"})},onContinue:()=>{ge(this,Yt,pr).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>N(this,gt).canRun(this)}));const r=this.state.status==="pending",s=!N(this,Br).canStart();try{if(!r){ge(this,Yt,pr).call(this,{type:"pending",variables:t,isPaused:s}),await((o=(a=N(this,gt).config).onMutate)==null?void 0:o.call(a,t,this));const M=await((l=(i=this.options).onMutate)==null?void 0:l.call(i,t));M!==this.state.context&&ge(this,Yt,pr).call(this,{type:"pending",context:M,variables:t,isPaused:s})}const O=await N(this,Br).start();return await((d=(c=N(this,gt).config).onSuccess)==null?void 0:d.call(c,O,t,this.state.context,this)),await((u=(p=this.options).onSuccess)==null?void 0:u.call(p,O,t,this.state.context)),await((f=(m=N(this,gt).config).onSettled)==null?void 0:f.call(m,O,null,this.state.variables,this.state.context,this)),await((x=(b=this.options).onSettled)==null?void 0:x.call(b,O,null,t,this.state.context)),ge(this,Yt,pr).call(this,{type:"success",data:O}),O}catch(O){try{throw await((v=(g=N(this,gt).config).onError)==null?void 0:v.call(g,O,t,this.state.context,this)),await((w=(y=this.options).onError)==null?void 0:w.call(y,O,t,this.state.context)),await((k=(j=N(this,gt).config).onSettled)==null?void 0:k.call(j,void 0,O,this.state.variables,this.state.context,this)),await((A=(S=this.options).onSettled)==null?void 0:A.call(S,void 0,O,t,this.state.context)),O}finally{ge(this,Yt,pr).call(this,{type:"error",error:O})}}finally{N(this,gt).runNext(this)}}},Qt=new WeakMap,gt=new WeakMap,Br=new WeakMap,Yt=new WeakSet,pr=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),st.batch(()=>{N(this,Qt).forEach(s=>{s.onMutationUpdate(t)}),N(this,gt).notify({mutation:this,type:"updated",action:t})})},Bc);function Gd(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Nt,hs,Uc,m0=(Uc=class extends On{constructor(t={}){super();le(this,Nt);le(this,hs);this.config=t,Z(this,Nt,new Map),Z(this,hs,Date.now())}build(t,r,s){const a=new u0({mutationCache:this,mutationId:++ks(this,hs)._,options:t.defaultMutationOptions(r),state:s});return this.add(a),a}add(t){const r=Ns(t),s=N(this,Nt).get(r)??[];s.push(t),N(this,Nt).set(r,s),this.notify({type:"added",mutation:t})}remove(t){var s;const r=Ns(t);if(N(this,Nt).has(r)){const a=(s=N(this,Nt).get(r))==null?void 0:s.filter(o=>o!==t);a&&(a.length===0?N(this,Nt).delete(r):N(this,Nt).set(r,a))}this.notify({type:"removed",mutation:t})}canRun(t){var s;const r=(s=N(this,Nt).get(Ns(t)))==null?void 0:s.find(a=>a.state.status==="pending");return!r||r===t}runNext(t){var s;const r=(s=N(this,Nt).get(Ns(t)))==null?void 0:s.find(a=>a!==t&&a.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){st.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...N(this,Nt).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(s=>wl(r,s))}findAll(t={}){return this.getAll().filter(r=>wl(t,r))}notify(t){st.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return st.batch(()=>Promise.all(t.map(r=>r.continue().catch(Ot))))}},Nt=new WeakMap,hs=new WeakMap,Uc);function Ns(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function Nl(e){return{onFetch:(t,r)=>{var p,u,m,f,b;const s=t.options,a=(m=(u=(p=t.fetchOptions)==null?void 0:p.meta)==null?void 0:u.fetchMore)==null?void 0:m.direction,o=((f=t.state.data)==null?void 0:f.pages)||[],i=((b=t.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let x=!1;const g=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},v=_d(t.options,t.fetchOptions),y=async(w,j,k)=>{if(x)return Promise.reject();if(j==null&&w.pages.length)return Promise.resolve(w);const S={queryKey:t.queryKey,pageParam:j,direction:k?"backward":"forward",meta:t.options.meta};g(S);const A=await v(S),{maxPages:O}=t.options,M=k?n0:r0;return{pages:M(w.pages,A,O),pageParams:M(w.pageParams,j,O)}};if(a&&o.length){const w=a==="backward",j=w?p0:Cl,k={pages:o,pageParams:i},S=j(s,k);l=await y(k,S,w)}else{const w=e??o.length;do{const j=c===0?i[0]??s.initialPageParam:Cl(s,l);if(c>0&&j==null)break;l=await y(l,j),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var x,g;return(g=(x=t.options).persister)==null?void 0:g.call(x,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function Cl(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function p0(e,{pages:t,pageParams:r}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,r[0],r):void 0}var Xe,gr,br,hn,fn,xr,gn,bn,Gc,h0=(Gc=class{constructor(e={}){le(this,Xe);le(this,gr);le(this,br);le(this,hn);le(this,fn);le(this,xr);le(this,gn);le(this,bn);Z(this,Xe,e.queryCache||new d0),Z(this,gr,e.mutationCache||new m0),Z(this,br,e.defaultOptions||{}),Z(this,hn,new Map),Z(this,fn,new Map),Z(this,xr,0)}mount(){ks(this,xr)._++,N(this,xr)===1&&(Z(this,gn,di.subscribe(async e=>{e&&(await this.resumePausedMutations(),N(this,Xe).onFocus())})),Z(this,bn,Fs.subscribe(async e=>{e&&(await this.resumePausedMutations(),N(this,Xe).onOnline())})))}unmount(){var e,t;ks(this,xr)._--,N(this,xr)===0&&((e=N(this,gn))==null||e.call(this),Z(this,gn,void 0),(t=N(this,bn))==null||t.call(this),Z(this,bn,void 0))}isFetching(e){return N(this,Xe).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return N(this,gr).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=N(this,Xe).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),s=N(this,Xe).build(this,r);return e.revalidateIfStale&&s.isStaleByTime(tn(r.staleTime,s))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return N(this,Xe).findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),a=N(this,Xe).get(s.queryHash),o=a==null?void 0:a.state.data,i=e0(t,o);if(i!==void 0)return N(this,Xe).build(this,s).setData(i,{...r,manual:!0})}setQueriesData(e,t,r){return st.batch(()=>N(this,Xe).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=N(this,Xe).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=N(this,Xe);st.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=N(this,Xe),s={type:"active",...e};return st.batch(()=>(r.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries(s,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},s=st.batch(()=>N(this,Xe).findAll(e).map(a=>a.cancel(r)));return Promise.all(s).then(Ot).catch(Ot)}invalidateQueries(e={},t={}){return st.batch(()=>{if(N(this,Xe).findAll(e).forEach(s=>{s.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},s=st.batch(()=>N(this,Xe).findAll(e).filter(a=>!a.isDisabled()).map(a=>{let o=a.fetch(void 0,r);return r.throwOnError||(o=o.catch(Ot)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(Ot)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=N(this,Xe).build(this,t);return r.isStaleByTime(tn(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ot).catch(Ot)}fetchInfiniteQuery(e){return e.behavior=Nl(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ot).catch(Ot)}ensureInfiniteQueryData(e){return e.behavior=Nl(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Fs.isOnline()?N(this,gr).resumePausedMutations():Promise.resolve()}getQueryCache(){return N(this,Xe)}getMutationCache(){return N(this,gr)}getDefaultOptions(){return N(this,br)}setDefaultOptions(e){Z(this,br,e)}setQueryDefaults(e,t){N(this,hn).set(Hr(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...N(this,hn).values()];let r={};return t.forEach(s=>{rs(e,s.queryKey)&&(r={...r,...s.defaultOptions})}),r}setMutationDefaults(e,t){N(this,fn).set(Hr(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...N(this,fn).values()];let r={};return t.forEach(s=>{rs(e,s.mutationKey)&&(r={...r,...s.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...N(this,br).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=li(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===ci&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...N(this,br).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){N(this,Xe).clear(),N(this,gr).clear()}},Xe=new WeakMap,gr=new WeakMap,br=new WeakMap,hn=new WeakMap,fn=new WeakMap,xr=new WeakMap,gn=new WeakMap,bn=new WeakMap,Gc),yt,ve,fs,bt,Ur,xn,vr,Xt,gs,vn,yn,Gr,Vr,yr,wn,Pe,Qn,uo,mo,po,ho,fo,go,bo,Vd,Vc,f0=(Vc=class extends On{constructor(t,r){super();le(this,Pe);le(this,yt);le(this,ve);le(this,fs);le(this,bt);le(this,Ur);le(this,xn);le(this,vr);le(this,Xt);le(this,gs);le(this,vn);le(this,yn);le(this,Gr);le(this,Vr);le(this,yr);le(this,wn,new Set);this.options=r,Z(this,yt,t),Z(this,Xt,null),Z(this,vr,co()),this.options.experimental_prefetchInRender||N(this,vr).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(N(this,ve).addObserver(this),Sl(N(this,ve),this.options)?ge(this,Pe,Qn).call(this):this.updateResult(),ge(this,Pe,ho).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return xo(N(this,ve),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return xo(N(this,ve),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ge(this,Pe,fo).call(this),ge(this,Pe,go).call(this),N(this,ve).removeObserver(this)}setOptions(t,r){const s=this.options,a=N(this,ve);if(this.options=N(this,yt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Bt(this.options.enabled,N(this,ve))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ge(this,Pe,bo).call(this),N(this,ve).setOptions(this.options),s._defaulted&&!_s(this.options,s)&&N(this,yt).getQueryCache().notify({type:"observerOptionsUpdated",query:N(this,ve),observer:this});const o=this.hasListeners();o&&El(N(this,ve),a,this.options,s)&&ge(this,Pe,Qn).call(this),this.updateResult(r),o&&(N(this,ve)!==a||Bt(this.options.enabled,N(this,ve))!==Bt(s.enabled,N(this,ve))||tn(this.options.staleTime,N(this,ve))!==tn(s.staleTime,N(this,ve)))&&ge(this,Pe,uo).call(this);const i=ge(this,Pe,mo).call(this);o&&(N(this,ve)!==a||Bt(this.options.enabled,N(this,ve))!==Bt(s.enabled,N(this,ve))||i!==N(this,yr))&&ge(this,Pe,po).call(this,i)}getOptimisticResult(t){const r=N(this,yt).getQueryCache().build(N(this,yt),t),s=this.createResult(r,t);return b0(this,s)&&(Z(this,bt,s),Z(this,xn,this.options),Z(this,Ur,N(this,ve).state)),s}getCurrentResult(){return N(this,bt)}trackResult(t,r){const s={};return Object.keys(t).forEach(a=>{Object.defineProperty(s,a,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(a),r==null||r(a),t[a])})}),s}trackProp(t){N(this,wn).add(t)}getCurrentQuery(){return N(this,ve)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=N(this,yt).defaultQueryOptions(t),s=N(this,yt).getQueryCache().build(N(this,yt),r);return s.fetch().then(()=>this.createResult(s,r))}fetch(t){return ge(this,Pe,Qn).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),N(this,bt)))}createResult(t,r){var O;const s=N(this,ve),a=this.options,o=N(this,bt),i=N(this,Ur),l=N(this,xn),d=t!==s?t.state:N(this,fs),{state:p}=t;let u={...p},m=!1,f;if(r._optimisticResults){const M=this.hasListeners(),B=!M&&Sl(t,r),U=M&&El(t,s,r,a);(B||U)&&(u={...u,...Ud(p.data,t.options)}),r._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:b,errorUpdatedAt:x,status:g}=u;if(r.select&&u.data!==void 0)if(o&&u.data===(i==null?void 0:i.data)&&r.select===N(this,gs))f=N(this,vn);else try{Z(this,gs,r.select),f=r.select(u.data),f=lo(o==null?void 0:o.data,f,r),Z(this,vn,f),Z(this,Xt,null)}catch(M){Z(this,Xt,M)}else f=u.data;if(r.placeholderData!==void 0&&f===void 0&&g==="pending"){let M;if(o!=null&&o.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData))M=o.data;else if(M=typeof r.placeholderData=="function"?r.placeholderData((O=N(this,yn))==null?void 0:O.state.data,N(this,yn)):r.placeholderData,r.select&&M!==void 0)try{M=r.select(M),Z(this,Xt,null)}catch(B){Z(this,Xt,B)}M!==void 0&&(g="success",f=lo(o==null?void 0:o.data,M,r),m=!0)}N(this,Xt)&&(b=N(this,Xt),f=N(this,vn),x=Date.now(),g="error");const v=u.fetchStatus==="fetching",y=g==="pending",w=g==="error",j=y&&v,k=f!==void 0,A={status:g,fetchStatus:u.fetchStatus,isPending:y,isSuccess:g==="success",isError:w,isInitialLoading:j,isLoading:j,data:f,dataUpdatedAt:u.dataUpdatedAt,error:b,errorUpdatedAt:x,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>d.dataUpdateCount||u.errorUpdateCount>d.errorUpdateCount,isFetching:v,isRefetching:v&&!y,isLoadingError:w&&!k,isPaused:u.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:w&&k,isStale:ui(t,r),refetch:this.refetch,promise:N(this,vr)};if(this.options.experimental_prefetchInRender){const M=_=>{A.status==="error"?_.reject(A.error):A.data!==void 0&&_.resolve(A.data)},B=()=>{const _=Z(this,vr,A.promise=co());M(_)},U=N(this,vr);switch(U.status){case"pending":t.queryHash===s.queryHash&&M(U);break;case"fulfilled":(A.status==="error"||A.data!==U.value)&&B();break;case"rejected":(A.status!=="error"||A.error!==U.reason)&&B();break}}return A}updateResult(t){const r=N(this,bt),s=this.createResult(N(this,ve),this.options);if(Z(this,Ur,N(this,ve).state),Z(this,xn,this.options),N(this,Ur).data!==void 0&&Z(this,yn,N(this,ve)),_s(s,r))return;Z(this,bt,s);const a={},o=()=>{if(!r)return!0;const{notifyOnChangeProps:i}=this.options,l=typeof i=="function"?i():i;if(l==="all"||!l&&!N(this,wn).size)return!0;const c=new Set(l??N(this,wn));return this.options.throwOnError&&c.add("error"),Object.keys(N(this,bt)).some(d=>{const p=d;return N(this,bt)[p]!==r[p]&&c.has(p)})};(t==null?void 0:t.listeners)!==!1&&o()&&(a.listeners=!0),ge(this,Pe,Vd).call(this,{...a,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ge(this,Pe,ho).call(this)}},yt=new WeakMap,ve=new WeakMap,fs=new WeakMap,bt=new WeakMap,Ur=new WeakMap,xn=new WeakMap,vr=new WeakMap,Xt=new WeakMap,gs=new WeakMap,vn=new WeakMap,yn=new WeakMap,Gr=new WeakMap,Vr=new WeakMap,yr=new WeakMap,wn=new WeakMap,Pe=new WeakSet,Qn=function(t){ge(this,Pe,bo).call(this);let r=N(this,ve).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Ot)),r},uo=function(){ge(this,Pe,fo).call(this);const t=tn(this.options.staleTime,N(this,ve));if(Wr||N(this,bt).isStale||!oo(t))return;const s=Md(N(this,bt).dataUpdatedAt,t)+1;Z(this,Gr,setTimeout(()=>{N(this,bt).isStale||this.updateResult()},s))},mo=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(N(this,ve)):this.options.refetchInterval)??!1},po=function(t){ge(this,Pe,go).call(this),Z(this,yr,t),!(Wr||Bt(this.options.enabled,N(this,ve))===!1||!oo(N(this,yr))||N(this,yr)===0)&&Z(this,Vr,setInterval(()=>{(this.options.refetchIntervalInBackground||di.isFocused())&&ge(this,Pe,Qn).call(this)},N(this,yr)))},ho=function(){ge(this,Pe,uo).call(this),ge(this,Pe,po).call(this,ge(this,Pe,mo).call(this))},fo=function(){N(this,Gr)&&(clearTimeout(N(this,Gr)),Z(this,Gr,void 0))},go=function(){N(this,Vr)&&(clearInterval(N(this,Vr)),Z(this,Vr,void 0))},bo=function(){const t=N(this,yt).getQueryCache().build(N(this,yt),this.options);if(t===N(this,ve))return;const r=N(this,ve);Z(this,ve,t),Z(this,fs,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Vd=function(t){st.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(N(this,bt))}),N(this,yt).getQueryCache().notify({query:N(this,ve),type:"observerResultsUpdated"})})},Vc);function g0(e,t){return Bt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Sl(e,t){return g0(e,t)||e.state.data!==void 0&&xo(e,t,t.refetchOnMount)}function xo(e,t,r){if(Bt(t.enabled,e)!==!1){const s=typeof r=="function"?r(e):r;return s==="always"||s!==!1&&ui(e,t)}return!1}function El(e,t,r,s){return(e!==t||Bt(s.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&ui(e,r)}function ui(e,t){return Bt(t.enabled,e)!==!1&&e.isStaleByTime(tn(t.staleTime,e))}function b0(e,t){return!_s(e.getCurrentResult(),t)}var wr,jr,wt,ar,or,Ps,vo,qc,x0=(qc=class extends On{constructor(r,s){super();le(this,or);le(this,wr);le(this,jr);le(this,wt);le(this,ar);Z(this,wr,r),this.setOptions(s),this.bindMethods(),ge(this,or,Ps).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const s=this.options;this.options=N(this,wr).defaultMutationOptions(r),_s(this.options,s)||N(this,wr).getMutationCache().notify({type:"observerOptionsUpdated",mutation:N(this,wt),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Hr(s.mutationKey)!==Hr(this.options.mutationKey)?this.reset():((a=N(this,wt))==null?void 0:a.state.status)==="pending"&&N(this,wt).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=N(this,wt))==null||r.removeObserver(this)}onMutationUpdate(r){ge(this,or,Ps).call(this),ge(this,or,vo).call(this,r)}getCurrentResult(){return N(this,jr)}reset(){var r;(r=N(this,wt))==null||r.removeObserver(this),Z(this,wt,void 0),ge(this,or,Ps).call(this),ge(this,or,vo).call(this)}mutate(r,s){var a;return Z(this,ar,s),(a=N(this,wt))==null||a.removeObserver(this),Z(this,wt,N(this,wr).getMutationCache().build(N(this,wr),this.options)),N(this,wt).addObserver(this),N(this,wt).execute(r)}},wr=new WeakMap,jr=new WeakMap,wt=new WeakMap,ar=new WeakMap,or=new WeakSet,Ps=function(){var s;const r=((s=N(this,wt))==null?void 0:s.state)??Gd();Z(this,jr,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},vo=function(r){st.batch(()=>{var s,a,o,i,l,c,d,p;if(N(this,ar)&&this.hasListeners()){const u=N(this,jr).variables,m=N(this,jr).context;(r==null?void 0:r.type)==="success"?((a=(s=N(this,ar)).onSuccess)==null||a.call(s,r.data,u,m),(i=(o=N(this,ar)).onSettled)==null||i.call(o,r.data,null,u,m)):(r==null?void 0:r.type)==="error"&&((c=(l=N(this,ar)).onError)==null||c.call(l,r.error,u,m),(p=(d=N(this,ar)).onSettled)==null||p.call(d,void 0,r.error,u,m))}this.listeners.forEach(u=>{u(N(this,jr))})})},qc),qd=h.createContext(void 0),Mn=e=>{const t=h.useContext(qd);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},v0=({client:e,children:t})=>(h.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(qd.Provider,{value:e,children:t})),Wd=h.createContext(!1),y0=()=>h.useContext(Wd);Wd.Provider;function w0(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var j0=h.createContext(w0()),k0=()=>h.useContext(j0);function Hd(e,t){return typeof e=="function"?e(...t):!!e}function yo(){}var N0=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},C0=e=>{h.useEffect(()=>{e.clearReset()},[e])},S0=({result:e,errorResetBoundary:t,throwOnError:r,query:s})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&Hd(r,[e.error,s]),E0=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},R0=(e,t)=>e.isLoading&&e.isFetching&&!t,D0=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Rl=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function P0(e,t,r){var p,u,m,f,b;const s=Mn(),a=y0(),o=k0(),i=s.defaultQueryOptions(e);(u=(p=s.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||u.call(p,i),i._optimisticResults=a?"isRestoring":"optimistic",E0(i),N0(i,o),C0(o);const l=!s.getQueryCache().get(i.queryHash),[c]=h.useState(()=>new t(s,i)),d=c.getOptimisticResult(i);if(h.useSyncExternalStore(h.useCallback(x=>{const g=a?yo:c.subscribe(st.batchCalls(x));return c.updateResult(),g},[c,a]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),h.useEffect(()=>{c.setOptions(i,{listeners:!1})},[i,c]),D0(i,d))throw Rl(i,c,o);if(S0({result:d,errorResetBoundary:o,throwOnError:i.throwOnError,query:s.getQueryCache().get(i.queryHash)}))throw d.error;if((f=(m=s.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||f.call(m,i,d),i.experimental_prefetchInRender&&!Wr&&R0(d,a)){const x=l?Rl(i,c,o):(b=s.getQueryCache().get(i.queryHash))==null?void 0:b.promise;x==null||x.catch(yo).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?d:c.trackResult(d)}function qt(e,t){return P0(e,f0)}function Ce(e,t){const r=Mn(),[s]=h.useState(()=>new x0(r,e));h.useEffect(()=>{s.setOptions(e)},[s,e]);const a=h.useSyncExternalStore(h.useCallback(i=>s.subscribe(st.batchCalls(i)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),o=h.useCallback((i,l)=>{s.mutate(i,l).catch(yo)},[s]);if(a.error&&Hd(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}async function Kd(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}async function ze(e,t,r){const s=await fetch(t,{method:e,headers:r?{"Content-Type":"application/json"}:{},body:r?JSON.stringify(r):void 0,credentials:"include"});return await Kd(s),s}const A0=({on401:e})=>async({queryKey:t})=>{const r=await fetch(t.join("/"),{credentials:"include"});return e==="returnNull"&&r.status===401?null:(await Kd(r),await r.json())},kr=new h0({defaultOptions:{queries:{queryFn:A0({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),T0=1,I0=1e6;let Oa=0;function O0(){return Oa=(Oa+1)%Number.MAX_SAFE_INTEGER,Oa.toString()}const Ma=new Map,Dl=e=>{if(Ma.has(e))return;const t=setTimeout(()=>{Ma.delete(e),Jn({type:"REMOVE_TOAST",toastId:e})},I0);Ma.set(e,t)},M0=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,T0)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Dl(r):e.toasts.forEach(s=>{Dl(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===r||r===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},As=[];let Ts={toasts:[]};function Jn(e){Ts=M0(Ts,e),As.forEach(t=>{t(Ts)})}function L0({...e}){const t=O0(),r=a=>Jn({type:"UPDATE_TOAST",toast:{...a,id:t}}),s=()=>Jn({type:"DISMISS_TOAST",toastId:t});return Jn({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||s()}}}),{id:t,dismiss:s,update:r}}function Dt(){const[e,t]=h.useState(Ts);return h.useEffect(()=>(As.push(t),()=>{const r=As.indexOf(t);r>-1&&As.splice(r,1)}),[e]),{...e,toast:L0,dismiss:r=>Jn({type:"DISMISS_TOAST",toastId:r})}}var mi="ToastProvider",[pi,_0,F0]=Hf("Toast"),[Qd,aC]=Jt("Toast",[F0]),[z0,la]=Qd(mi),Yd=e=>{const{__scopeToast:t,label:r="Notification",duration:s=5e3,swipeDirection:a="right",swipeThreshold:o=50,children:i}=e,[l,c]=h.useState(null),[d,p]=h.useState(0),u=h.useRef(!1),m=h.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${mi}\`. Expected non-empty \`string\`.`),n.jsx(pi.Provider,{scope:t,children:n.jsx(z0,{scope:t,label:r,duration:s,swipeDirection:a,swipeThreshold:o,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:h.useCallback(()=>p(f=>f+1),[]),onToastRemove:h.useCallback(()=>p(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:m,children:i})})};Yd.displayName=mi;var Xd="ToastViewport",$0=["F8"],wo="toast.viewportPause",jo="toast.viewportResume",Jd=h.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:s=$0,label:a="Notifications ({hotkey})",...o}=e,i=la(Xd,r),l=_0(r),c=h.useRef(null),d=h.useRef(null),p=h.useRef(null),u=h.useRef(null),m=ct(t,u,i.onViewportChange),f=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=i.toastCount>0;h.useEffect(()=>{const g=v=>{var w;s.length!==0&&s.every(j=>v[j]||v.code===j)&&((w=u.current)==null||w.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[s]),h.useEffect(()=>{const g=c.current,v=u.current;if(b&&g&&v){const y=()=>{if(!i.isClosePausedRef.current){const S=new CustomEvent(wo);v.dispatchEvent(S),i.isClosePausedRef.current=!0}},w=()=>{if(i.isClosePausedRef.current){const S=new CustomEvent(jo);v.dispatchEvent(S),i.isClosePausedRef.current=!1}},j=S=>{!g.contains(S.relatedTarget)&&w()},k=()=>{g.contains(document.activeElement)||w()};return g.addEventListener("focusin",y),g.addEventListener("focusout",j),g.addEventListener("pointermove",y),g.addEventListener("pointerleave",k),window.addEventListener("blur",y),window.addEventListener("focus",w),()=>{g.removeEventListener("focusin",y),g.removeEventListener("focusout",j),g.removeEventListener("pointermove",y),g.removeEventListener("pointerleave",k),window.removeEventListener("blur",y),window.removeEventListener("focus",w)}}},[b,i.isClosePausedRef]);const x=h.useCallback(({tabbingDirection:g})=>{const y=l().map(w=>{const j=w.ref.current,k=[j,...Z0(j)];return g==="forwards"?k:k.reverse()});return(g==="forwards"?y.reverse():y).flat()},[l]);return h.useEffect(()=>{const g=u.current;if(g){const v=y=>{var k,S,A;const w=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!w){const O=document.activeElement,M=y.shiftKey;if(y.target===g&&M){(k=d.current)==null||k.focus();return}const _=x({tabbingDirection:M?"backwards":"forwards"}),G=_.findIndex(L=>L===O);La(_.slice(G+1))?y.preventDefault():M?(S=d.current)==null||S.focus():(A=p.current)==null||A.focus()}};return g.addEventListener("keydown",v),()=>g.removeEventListener("keydown",v)}},[l,x]),n.jsxs(Kf,{ref:c,role:"region","aria-label":a.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&n.jsx(ko,{ref:d,onFocusFromOutsideViewport:()=>{const g=x({tabbingDirection:"forwards"});La(g)}}),n.jsx(pi.Slot,{scope:r,children:n.jsx($e.ol,{tabIndex:-1,...o,ref:m})}),b&&n.jsx(ko,{ref:p,onFocusFromOutsideViewport:()=>{const g=x({tabbingDirection:"backwards"});La(g)}})]})});Jd.displayName=Xd;var Zd="ToastFocusProxy",ko=h.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:s,...a}=e,o=la(Zd,r);return n.jsx(Wc,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:i=>{var d;const l=i.relatedTarget;!((d=o.viewport)!=null&&d.contains(l))&&s()}})});ko.displayName=Zd;var ca="Toast",B0="toast.swipeStart",U0="toast.swipeMove",G0="toast.swipeCancel",V0="toast.swipeEnd",eu=h.forwardRef((e,t)=>{const{forceMount:r,open:s,defaultOpen:a,onOpenChange:o,...i}=e,[l=!0,c]=Tn({prop:s,defaultProp:a,onChange:o});return n.jsx(Wt,{present:r||l,children:n.jsx(H0,{open:l,...i,ref:t,onClose:()=>c(!1),onPause:Ut(e.onPause),onResume:Ut(e.onResume),onSwipeStart:xe(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:xe(e.onSwipeMove,d=>{const{x:p,y:u}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${p}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${u}px`)}),onSwipeCancel:xe(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:xe(e.onSwipeEnd,d=>{const{x:p,y:u}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${p}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${u}px`),c(!1)})})})});eu.displayName=ca;var[q0,W0]=Qd(ca,{onClose(){}}),H0=h.forwardRef((e,t)=>{const{__scopeToast:r,type:s="foreground",duration:a,open:o,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:p,onSwipeMove:u,onSwipeCancel:m,onSwipeEnd:f,...b}=e,x=la(ca,r),[g,v]=h.useState(null),y=ct(t,L=>v(L)),w=h.useRef(null),j=h.useRef(null),k=a||x.duration,S=h.useRef(0),A=h.useRef(k),O=h.useRef(0),{onToastAdd:M,onToastRemove:B}=x,U=Ut(()=>{var Q;(g==null?void 0:g.contains(document.activeElement))&&((Q=x.viewport)==null||Q.focus()),i()}),_=h.useCallback(L=>{!L||L===1/0||(window.clearTimeout(O.current),S.current=new Date().getTime(),O.current=window.setTimeout(U,L))},[U]);h.useEffect(()=>{const L=x.viewport;if(L){const Q=()=>{_(A.current),d==null||d()},F=()=>{const D=new Date().getTime()-S.current;A.current=A.current-D,window.clearTimeout(O.current),c==null||c()};return L.addEventListener(wo,F),L.addEventListener(jo,Q),()=>{L.removeEventListener(wo,F),L.removeEventListener(jo,Q)}}},[x.viewport,k,c,d,_]),h.useEffect(()=>{o&&!x.isClosePausedRef.current&&_(k)},[o,k,x.isClosePausedRef,_]),h.useEffect(()=>(M(),()=>B()),[M,B]);const G=h.useMemo(()=>g?iu(g):null,[g]);return x.viewport?n.jsxs(n.Fragment,{children:[G&&n.jsx(K0,{__scopeToast:r,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:G}),n.jsx(q0,{scope:r,onClose:U,children:aa.createPortal(n.jsx(pi.ItemSlot,{scope:r,children:n.jsx(Qf,{asChild:!0,onEscapeKeyDown:xe(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||U(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx($e.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":x.swipeDirection,...b,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:xe(e.onKeyDown,L=>{L.key==="Escape"&&(l==null||l(L.nativeEvent),L.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,U()))}),onPointerDown:xe(e.onPointerDown,L=>{L.button===0&&(w.current={x:L.clientX,y:L.clientY})}),onPointerMove:xe(e.onPointerMove,L=>{if(!w.current)return;const Q=L.clientX-w.current.x,F=L.clientY-w.current.y,D=!!j.current,V=["left","right"].includes(x.swipeDirection),z=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,R=V?z(0,Q):0,C=V?0:z(0,F),ee=L.pointerType==="touch"?10:2,he={x:R,y:C},ae={originalEvent:L,delta:he};D?(j.current=he,Cs(U0,u,ae,{discrete:!1})):Pl(he,x.swipeDirection,ee)?(j.current=he,Cs(B0,p,ae,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(Q)>ee||Math.abs(F)>ee)&&(w.current=null)}),onPointerUp:xe(e.onPointerUp,L=>{const Q=j.current,F=L.target;if(F.hasPointerCapture(L.pointerId)&&F.releasePointerCapture(L.pointerId),j.current=null,w.current=null,Q){const D=L.currentTarget,V={originalEvent:L,delta:Q};Pl(Q,x.swipeDirection,x.swipeThreshold)?Cs(V0,f,V,{discrete:!0}):Cs(G0,m,V,{discrete:!0}),D.addEventListener("click",z=>z.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),K0=e=>{const{__scopeToast:t,children:r,...s}=e,a=la(ca,t),[o,i]=h.useState(!1),[l,c]=h.useState(!1);return X0(()=>i(!0)),h.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:n.jsx(Hc,{asChild:!0,children:n.jsx(Wc,{...s,children:o&&n.jsxs(n.Fragment,{children:[a.label," ",r]})})})},Q0="ToastTitle",tu=h.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx($e.div,{...s,ref:t})});tu.displayName=Q0;var Y0="ToastDescription",ru=h.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx($e.div,{...s,ref:t})});ru.displayName=Y0;var nu="ToastAction",su=h.forwardRef((e,t)=>{const{altText:r,...s}=e;return r.trim()?n.jsx(ou,{altText:r,asChild:!0,children:n.jsx(hi,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${nu}\`. Expected non-empty \`string\`.`),null)});su.displayName=nu;var au="ToastClose",hi=h.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e,a=W0(au,r);return n.jsx(ou,{asChild:!0,children:n.jsx($e.button,{type:"button",...s,ref:t,onClick:xe(e.onClick,a.onClose)})})});hi.displayName=au;var ou=h.forwardRef((e,t)=>{const{__scopeToast:r,altText:s,...a}=e;return n.jsx($e.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...a,ref:t})});function iu(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),J0(s)){const a=s.ariaHidden||s.hidden||s.style.display==="none",o=s.dataset.radixToastAnnounceExclude==="";if(!a)if(o){const i=s.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...iu(s))}}),t}function Cs(e,t,r,{discrete:s}){const a=r.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?Yf(a,o):a.dispatchEvent(o)}var Pl=(e,t,r=0)=>{const s=Math.abs(e.x),a=Math.abs(e.y),o=s>a;return t==="left"||t==="right"?o&&s>r:!o&&a>r};function X0(e=()=>{}){const t=Ut(e);Kc(()=>{let r=0,s=0;return r=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(s)}},[t])}function J0(e){return e.nodeType===e.ELEMENT_NODE}function Z0(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function La(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var eb=Yd,lu=Jd,cu=eu,du=tu,uu=ru,mu=su,pu=hi;function hu(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=hu(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function fu(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=hu(e))&&(s&&(s+=" "),s+=t);return s}const Al=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Tl=fu,da=(e,t)=>r=>{var s;if((t==null?void 0:t.variants)==null)return Tl(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:o}=t,i=Object.keys(a).map(d=>{const p=r==null?void 0:r[d],u=o==null?void 0:o[d];if(p===null)return null;const m=Al(p)||Al(u);return a[d][m]}),l=r&&Object.entries(r).reduce((d,p)=>{let[u,m]=p;return m===void 0||(d[u]=m),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,p)=>{let{class:u,className:m,...f}=p;return Object.entries(f).every(b=>{let[x,g]=b;return Array.isArray(g)?g.includes({...o,...l}[x]):{...o,...l}[x]===g})?[...d,u,m]:d},[]);return Tl(e,i,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gu=(...e)=>e.filter((t,r,s)=>!!t&&s.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:i,...l},c)=>h.createElement("svg",{ref:c,...rb,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:gu("lucide",a),...l},[...i.map(([d,p])=>h.createElement(d,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=(e,t)=>{const r=h.forwardRef(({className:s,...a},o)=>h.createElement(nb,{ref:o,iconNode:t,className:gu(`lucide-${tb(e)}`,s),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=Y("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=Y("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=Y("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=Y("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=Y("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=Y("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=Y("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=Y("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=Y("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=Y("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=Y("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=Y("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=Y("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=Y("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=Y("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=Y("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=Y("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=Y("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=Y("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=Y("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=Y("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=Y("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=Y("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=Y("Columns3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=Y("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=Y("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=Y("DoorOpen",[["path",{d:"M13 4h3a2 2 0 0 1 2 2v14",key:"hrm0s9"}],["path",{d:"M2 20h3",key:"1gaodv"}],["path",{d:"M13 20h9",key:"s90cdi"}],["path",{d:"M10 12v.01",key:"vx6srw"}],["path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z",key:"199qr4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=Y("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=Y("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=Y("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=Y("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=Y("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=Y("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=Y("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=Y("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=Y("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=Y("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=Y("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=Y("ImageOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=Y("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=Y("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=Y("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=Y("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=Y("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=Y("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=Y("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=Y("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=Y("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=Y("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=Y("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=Y("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=Y("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=Y("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=Y("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=Y("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=Y("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=Y("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=Y("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=Y("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=Y("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=Y("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=Y("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=Y("Rows2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=Y("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=Y("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=Y("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=Y("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=Y("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lb=Y("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=Y("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=Y("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=Y("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=Y("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=Y("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $b=Y("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=Y("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=Y("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=Y("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=Y("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),bi="-",Bb=e=>{const t=Gb(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:i=>{const l=i.split(bi);return l[0]===""&&l.length!==1&&l.shift(),Su(l,t)||Ub(i)},getConflictingClassGroupIds:(i,l)=>{const c=r[i]||[];return l&&s[i]?[...c,...s[i]]:c}}},Su=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const r=e[0],s=t.nextPart.get(r),a=s?Su(e.slice(1),s):void 0;if(a)return a;if(t.validators.length===0)return;const o=e.join(bi);return(i=t.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},Fl=/^\[(.+)\]$/,Ub=e=>{if(Fl.test(e)){const t=Fl.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Gb=e=>{const{theme:t,prefix:r}=e,s={nextPart:new Map,validators:[]};return qb(Object.entries(e.classGroups),r).forEach(([o,i])=>{Do(i,s,o,t)}),s},Do=(e,t,r,s)=>{e.forEach(a=>{if(typeof a=="string"){const o=a===""?t:zl(t,a);o.classGroupId=r;return}if(typeof a=="function"){if(Vb(a)){Do(a(s),t,r,s);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([o,i])=>{Do(i,zl(t,o),r,s)})})},zl=(e,t)=>{let r=e;return t.split(bi).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},Vb=e=>e.isThemeGetter,qb=(e,t)=>t?e.map(([r,s])=>{const a=s.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,l])=>[t+i,l])):o);return[r,a]}):e,Wb=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,s=new Map;const a=(o,i)=>{r.set(o,i),t++,t>e&&(t=0,s=r,r=new Map)};return{get(o){let i=r.get(o);if(i!==void 0)return i;if((i=s.get(o))!==void 0)return a(o,i),i},set(o,i){r.has(o)?r.set(o,i):a(o,i)}}},Eu="!",Hb=e=>{const{separator:t,experimentalParseClassName:r}=e,s=t.length===1,a=t[0],o=t.length,i=l=>{const c=[];let d=0,p=0,u;for(let g=0;g<l.length;g++){let v=l[g];if(d===0){if(v===a&&(s||l.slice(g,g+o)===t)){c.push(l.slice(p,g)),p=g+o;continue}if(v==="/"){u=g;continue}}v==="["?d++:v==="]"&&d--}const m=c.length===0?l:l.substring(p),f=m.startsWith(Eu),b=f?m.substring(1):m,x=u&&u>p?u-p:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:b,maybePostfixModifierPosition:x}};return r?l=>r({className:l,parseClassName:i}):i},Kb=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(s=>{s[0]==="["?(t.push(...r.sort(),s),r=[]):r.push(s)}),t.push(...r.sort()),t},Qb=e=>({cache:Wb(e.cacheSize),parseClassName:Hb(e),...Bb(e)}),Yb=/\s+/,Xb=(e,t)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:a}=t,o=[],i=e.trim().split(Yb);let l="";for(let c=i.length-1;c>=0;c-=1){const d=i[c],{modifiers:p,hasImportantModifier:u,baseClassName:m,maybePostfixModifierPosition:f}=r(d);let b=!!f,x=s(b?m.substring(0,f):m);if(!x){if(!b){l=d+(l.length>0?" "+l:l);continue}if(x=s(m),!x){l=d+(l.length>0?" "+l:l);continue}b=!1}const g=Kb(p).join(":"),v=u?g+Eu:g,y=v+x;if(o.includes(y))continue;o.push(y);const w=a(x,b);for(let j=0;j<w.length;++j){const k=w[j];o.push(v+k)}l=d+(l.length>0?" "+l:l)}return l};function Jb(){let e=0,t,r,s="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Ru(t))&&(s&&(s+=" "),s+=r);return s}const Ru=e=>{if(typeof e=="string")return e;let t,r="";for(let s=0;s<e.length;s++)e[s]&&(t=Ru(e[s]))&&(r&&(r+=" "),r+=t);return r};function Zb(e,...t){let r,s,a,o=i;function i(c){const d=t.reduce((p,u)=>u(p),e());return r=Qb(d),s=r.cache.get,a=r.cache.set,o=l,l(c)}function l(c){const d=s(c);if(d)return d;const p=Xb(c,r);return a(c,p),p}return function(){return o(Jb.apply(null,arguments))}}const Ue=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Du=/^\[(?:([a-z-]+):)?(.+)\]$/i,ex=/^\d+\/\d+$/,tx=new Set(["px","full","screen"]),rx=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,nx=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sx=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,ax=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ox=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,rr=e=>sn(e)||tx.has(e)||ex.test(e),ur=e=>Ln(e,"length",hx),sn=e=>!!e&&!Number.isNaN(Number(e)),Ua=e=>Ln(e,"number",sn),Vn=e=>!!e&&Number.isInteger(Number(e)),ix=e=>e.endsWith("%")&&sn(e.slice(0,-1)),pe=e=>Du.test(e),mr=e=>rx.test(e),lx=new Set(["length","size","percentage"]),cx=e=>Ln(e,lx,Pu),dx=e=>Ln(e,"position",Pu),ux=new Set(["image","url"]),mx=e=>Ln(e,ux,gx),px=e=>Ln(e,"",fx),qn=()=>!0,Ln=(e,t,r)=>{const s=Du.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):r(s[2]):!1},hx=e=>nx.test(e)&&!sx.test(e),Pu=()=>!1,fx=e=>ax.test(e),gx=e=>ox.test(e),bx=()=>{const e=Ue("colors"),t=Ue("spacing"),r=Ue("blur"),s=Ue("brightness"),a=Ue("borderColor"),o=Ue("borderRadius"),i=Ue("borderSpacing"),l=Ue("borderWidth"),c=Ue("contrast"),d=Ue("grayscale"),p=Ue("hueRotate"),u=Ue("invert"),m=Ue("gap"),f=Ue("gradientColorStops"),b=Ue("gradientColorStopPositions"),x=Ue("inset"),g=Ue("margin"),v=Ue("opacity"),y=Ue("padding"),w=Ue("saturate"),j=Ue("scale"),k=Ue("sepia"),S=Ue("skew"),A=Ue("space"),O=Ue("translate"),M=()=>["auto","contain","none"],B=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto",pe,t],_=()=>[pe,t],G=()=>["",rr,ur],L=()=>["auto",sn,pe],Q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],F=()=>["solid","dashed","dotted","double","none"],D=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",pe],R=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>[sn,pe];return{cacheSize:500,separator:":",theme:{colors:[qn],spacing:[rr,ur],blur:["none","",mr,pe],brightness:C(),borderColor:[e],borderRadius:["none","","full",mr,pe],borderSpacing:_(),borderWidth:G(),contrast:C(),grayscale:z(),hueRotate:C(),invert:z(),gap:_(),gradientColorStops:[e],gradientColorStopPositions:[ix,ur],inset:U(),margin:U(),opacity:C(),padding:_(),saturate:C(),scale:C(),sepia:z(),skew:C(),space:_(),translate:_()},classGroups:{aspect:[{aspect:["auto","square","video",pe]}],container:["container"],columns:[{columns:[mr]}],"break-after":[{"break-after":R()}],"break-before":[{"break-before":R()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Q(),pe]}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Vn,pe]}],basis:[{basis:U()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",pe]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",Vn,pe]}],"grid-cols":[{"grid-cols":[qn]}],"col-start-end":[{col:["auto",{span:["full",Vn,pe]},pe]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[qn]}],"row-start-end":[{row:["auto",{span:[Vn,pe]},pe]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",pe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",pe]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",pe,t]}],"min-w":[{"min-w":[pe,t,"min","max","fit"]}],"max-w":[{"max-w":[pe,t,"none","full","min","max","fit","prose",{screen:[mr]},mr]}],h:[{h:[pe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[pe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[pe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[pe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",mr,ur]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ua]}],"font-family":[{font:[qn]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",pe]}],"line-clamp":[{"line-clamp":["none",sn,Ua]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",rr,pe]}],"list-image":[{"list-image":["none",pe]}],"list-style-type":[{list:["none","disc","decimal",pe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",rr,ur]}],"underline-offset":[{"underline-offset":["auto",rr,pe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Q(),dx]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",cx]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},mx]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...F(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:F()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...F()]}],"outline-offset":[{"outline-offset":[rr,pe]}],"outline-w":[{outline:[rr,ur]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[rr,ur]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",mr,px]}],"shadow-color":[{shadow:[qn]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...D(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":D()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",mr,pe]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[u]}],saturate:[{saturate:[w]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",pe]}],duration:[{duration:C()}],ease:[{ease:["linear","in","out","in-out",pe]}],delay:[{delay:C()}],animate:[{animate:["none","spin","ping","pulse","bounce",pe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Vn,pe]}],"translate-x":[{"translate-x":[O]}],"translate-y":[{"translate-y":[O]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",pe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",pe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",pe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[rr,ur,Ua]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},xx=Zb(bx);function J(...e){return xx(fu(e))}function Ga(){const e="table_app_user_id";let t=localStorage.getItem(e);return t||(t=`user_${Date.now()}_${Math.random().toString(36).substring(2,15)}`,localStorage.setItem(e,t)),t}const vx=eb,Au=h.forwardRef(({className:e,...t},r)=>n.jsx(lu,{ref:r,className:J("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Au.displayName=lu.displayName;const yx=da("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Tu=h.forwardRef(({className:e,variant:t,...r},s)=>n.jsx(cu,{ref:s,className:J(yx({variant:t}),e),...r}));Tu.displayName=cu.displayName;const wx=h.forwardRef(({className:e,...t},r)=>n.jsx(mu,{ref:r,className:J("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));wx.displayName=mu.displayName;const Iu=h.forwardRef(({className:e,...t},r)=>n.jsx(pu,{ref:r,className:J("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:n.jsx(vt,{className:"h-4 w-4"})}));Iu.displayName=pu.displayName;const Ou=h.forwardRef(({className:e,...t},r)=>n.jsx(du,{ref:r,className:J("text-sm font-semibold",e),...t}));Ou.displayName=du.displayName;const Mu=h.forwardRef(({className:e,...t},r)=>n.jsx(uu,{ref:r,className:J("text-sm opacity-90",e),...t}));Mu.displayName=uu.displayName;function jx(){const{toasts:e}=Dt();return n.jsxs(vx,{children:[e.map(function({id:t,title:r,description:s,action:a,...o}){return n.jsxs(Tu,{...o,children:[n.jsxs("div",{className:"grid gap-1",children:[r&&n.jsx(Ou,{children:r}),s&&n.jsx(Mu,{children:s})]}),a,n.jsx(Iu,{})]},t)}),n.jsx(Au,{})]})}var[pa,oC]=Jt("Tooltip",[na]),xi=na(),Lu="TooltipProvider",kx=700,$l="tooltip.open",[Nx,_u]=pa(Lu),Fu=e=>{const{__scopeTooltip:t,delayDuration:r=kx,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:o}=e,i=h.useRef(!0),l=h.useRef(!1),c=h.useRef(0);return h.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),n.jsx(Nx,{scope:t,isOpenDelayedRef:i,delayDuration:r,onOpen:h.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:h.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:h.useCallback(d=>{l.current=d},[]),disableHoverableContent:a,children:o})};Fu.displayName=Lu;var zu="Tooltip",[iC,ha]=pa(zu),Po="TooltipTrigger",Cx=h.forwardRef((e,t)=>{const{__scopeTooltip:r,...s}=e,a=ha(Po,r),o=_u(Po,r),i=xi(r),l=h.useRef(null),c=ct(t,l,a.onTriggerChange),d=h.useRef(!1),p=h.useRef(!1),u=h.useCallback(()=>d.current=!1,[]);return h.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),n.jsx(Qo,{asChild:!0,...i,children:n.jsx($e.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:c,onPointerMove:xe(e.onPointerMove,m=>{m.pointerType!=="touch"&&!p.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),p.current=!0)}),onPointerLeave:xe(e.onPointerLeave,()=>{a.onTriggerLeave(),p.current=!1}),onPointerDown:xe(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:xe(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:xe(e.onBlur,a.onClose),onClick:xe(e.onClick,a.onClose)})})});Cx.displayName=Po;var Sx="TooltipPortal",[lC,Ex]=pa(Sx,{forceMount:void 0}),kn="TooltipContent",$u=h.forwardRef((e,t)=>{const r=Ex(kn,e.__scopeTooltip),{forceMount:s=r.forceMount,side:a="top",...o}=e,i=ha(kn,e.__scopeTooltip);return n.jsx(Wt,{present:s||i.open,children:i.disableHoverableContent?n.jsx(Bu,{side:a,...o,ref:t}):n.jsx(Rx,{side:a,...o,ref:t})})}),Rx=h.forwardRef((e,t)=>{const r=ha(kn,e.__scopeTooltip),s=_u(kn,e.__scopeTooltip),a=h.useRef(null),o=ct(t,a),[i,l]=h.useState(null),{trigger:c,onClose:d}=r,p=a.current,{onPointerInTransitChange:u}=s,m=h.useCallback(()=>{l(null),u(!1)},[u]),f=h.useCallback((b,x)=>{const g=b.currentTarget,v={x:b.clientX,y:b.clientY},y=Ix(v,g.getBoundingClientRect()),w=Ox(v,y),j=Mx(x.getBoundingClientRect()),k=_x([...w,...j]);l(k),u(!0)},[u]);return h.useEffect(()=>()=>m(),[m]),h.useEffect(()=>{if(c&&p){const b=g=>f(g,p),x=g=>f(g,c);return c.addEventListener("pointerleave",b),p.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",b),p.removeEventListener("pointerleave",x)}}},[c,p,f,m]),h.useEffect(()=>{if(i){const b=x=>{const g=x.target,v={x:x.clientX,y:x.clientY},y=(c==null?void 0:c.contains(g))||(p==null?void 0:p.contains(g)),w=!Lx(v,i);y?m():w&&(m(),d())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,p,i,d,m]),n.jsx(Bu,{...e,ref:o})}),[Dx,Px]=pa(zu,{isInside:!1}),Ax=Jc("TooltipContent"),Bu=h.forwardRef((e,t)=>{const{__scopeTooltip:r,children:s,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:i,...l}=e,c=ha(kn,r),d=xi(r),{onClose:p}=c;return h.useEffect(()=>(document.addEventListener($l,p),()=>document.removeEventListener($l,p)),[p]),h.useEffect(()=>{if(c.trigger){const u=m=>{const f=m.target;f!=null&&f.contains(c.trigger)&&p()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[c.trigger,p]),n.jsx(Qc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:u=>u.preventDefault(),onDismiss:p,children:n.jsxs(Yc,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(Ax,{children:s}),n.jsx(Dx,{scope:r,isInside:!0,children:n.jsx(Xf,{id:c.contentId,role:"tooltip",children:a||s})})]})})});$u.displayName=kn;var Uu="TooltipArrow",Tx=h.forwardRef((e,t)=>{const{__scopeTooltip:r,...s}=e,a=xi(r);return Px(Uu,r).isInside?null:n.jsx(Xc,{...a,...s,ref:t})});Tx.displayName=Uu;function Ix(e,t){const r=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(r,s,a,o)){case o:return"left";case a:return"right";case r:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function Ox(e,t,r=5){const s=[];switch(t){case"top":s.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":s.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":s.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":s.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return s}function Mx(e){const{top:t,right:r,bottom:s,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:s},{x:a,y:s}]}function Lx(e,t){const{x:r,y:s}=e;let a=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o].x,c=t[o].y,d=t[i].x,p=t[i].y;c>s!=p>s&&r<(d-l)*(s-c)/(p-c)+l&&(a=!a)}return a}function _x(e){const t=e.slice();return t.sort((r,s)=>r.x<s.x?-1:r.x>s.x?1:r.y<s.y?-1:r.y>s.y?1:0),Fx(t)}function Fx(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const a=e[s];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let s=e.length-1;s>=0;s--){const a=e[s];for(;r.length>=2;){const o=r[r.length-1],i=r[r.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var zx=Fu,Gu=$u;const $x=zx,Bx=h.forwardRef(({className:e,sideOffset:t=4,...r},s)=>n.jsx(Gu,{ref:s,sideOffset:t,className:J("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...r}));Bx.displayName=Gu.displayName;const Vu=h.createContext(void 0);function Ux({children:e}){const[t,r]=h.useState(()=>localStorage.getItem("theme")||"light");h.useEffect(()=>{const a=document.documentElement;t==="dark"?a.classList.add("dark"):a.classList.remove("dark"),localStorage.setItem("theme",t)},[t]);const s=()=>{r(a=>a==="light"?"dark":"light")};return n.jsx(Vu.Provider,{value:{theme:t,toggleTheme:s},children:e})}function qu(){const e=h.useContext(Vu);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}function vi(){const e=Mn(),{data:t=[],isLoading:r}=qt({queryKey:["/api/table-rows"]}),{data:s=[],isLoading:a}=qt({queryKey:["/api/table-columns"]}),o=Ce({mutationFn:async x=>(await ze("POST","/api/table-rows",x)).json(),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/table-rows"]})}}),i=Ce({mutationFn:async({id:x,updates:g})=>(await ze("PATCH",`/api/table-rows/${x}`,g)).json(),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/table-rows"]})}}),l=Ce({mutationFn:async x=>{await ze("DELETE",`/api/table-rows/${x}`)},onSuccess:()=>{e.invalidateQueries({queryKey:["/api/table-rows"]})}}),c=Ce({mutationFn:async x=>(await ze("POST","/api/table-rows/reorder",{rowIds:x})).json(),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/table-rows"]})}}),d=Ce({mutationFn:async x=>(await ze("POST","/api/table-columns",x)).json(),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/table-columns"]})}}),p=Ce({mutationFn:async x=>{await ze("DELETE",`/api/table-columns/${x}`)},onSuccess:()=>{e.invalidateQueries({queryKey:["/api/table-columns"]})}}),u=Ce({mutationFn:async x=>(await ze("POST","/api/table-columns/reorder",{columnIds:x})).json(),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/table-columns"]})}}),m=Ce({mutationFn:async({rowId:x,imageUrl:g,caption:v})=>(await ze("POST",`/api/table-rows/${x}/images`,{imageUrl:g,caption:v})).json(),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/table-rows"]})}}),f=Ce({mutationFn:async({rowId:x,imageIndex:g,imageUrl:v,caption:y})=>(await ze("PATCH",`/api/table-rows/${x}/images/${g}`,{imageUrl:v,caption:y})).json(),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/table-rows"]})}}),b=Ce({mutationFn:async({rowId:x,imageIndex:g})=>{const v=g!==void 0?`/api/table-rows/${x}/images/${g}`:`/api/table-rows/${x}/images`;return(await ze("DELETE",v)).json()},onSuccess:()=>{e.invalidateQueries({queryKey:["/api/table-rows"]})}});return{rows:t,columns:s,isLoading:r||a,createRow:o,updateRow:i,deleteRow:l,reorderRows:c,createColumn:d,deleteColumn:p,reorderColumns:u,addImageToRow:m,updateImageInRow:f,deleteImageFromRow:b}}function ft(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Gx=typeof Symbol=="function"&&Symbol.observable||"@@observable",Bl=Gx,Va=()=>Math.random().toString(36).substring(7).split("").join("."),Vx={INIT:`@@redux/INIT${Va()}`,REPLACE:`@@redux/REPLACE${Va()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Va()}`},Ul=Vx;function qx(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Wu(e,t,r){if(typeof e!="function")throw new Error(ft(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ft(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(ft(1));return r(Wu)(e,t)}let s=e,a=t,o=new Map,i=o,l=0,c=!1;function d(){i===o&&(i=new Map,o.forEach((g,v)=>{i.set(v,g)}))}function p(){if(c)throw new Error(ft(3));return a}function u(g){if(typeof g!="function")throw new Error(ft(4));if(c)throw new Error(ft(5));let v=!0;d();const y=l++;return i.set(y,g),function(){if(v){if(c)throw new Error(ft(6));v=!1,d(),i.delete(y),o=null}}}function m(g){if(!qx(g))throw new Error(ft(7));if(typeof g.type>"u")throw new Error(ft(8));if(typeof g.type!="string")throw new Error(ft(17));if(c)throw new Error(ft(9));try{c=!0,a=s(a,g)}finally{c=!1}return(o=i).forEach(y=>{y()}),g}function f(g){if(typeof g!="function")throw new Error(ft(10));s=g,m({type:Ul.REPLACE})}function b(){const g=u;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(ft(11));function y(){const j=v;j.next&&j.next(p())}return y(),{unsubscribe:g(y)}},[Bl](){return this}}}return m({type:Ul.INIT}),{dispatch:m,subscribe:u,getState:p,replaceReducer:f,[Bl]:b}}function Gl(e,t){return function(...r){return t(e.apply(this,r))}}function Vl(e,t){if(typeof e=="function")return Gl(e,t);if(typeof e!="object"||e===null)throw new Error(ft(16));const r={};for(const s in e){const a=e[s];typeof a=="function"&&(r[s]=Gl(a,t))}return r}function Hu(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...s)=>t(r(...s)))}function Wx(...e){return t=>(r,s)=>{const a=t(r,s);let o=()=>{throw new Error(ft(15))};const i={getState:a.getState,dispatch:(c,...d)=>o(c,...d)},l=e.map(c=>c(i));return o=Hu(...l)(a.dispatch),{...a,dispatch:o}}}var Hx={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bs=h;function Kx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qx=typeof Object.is=="function"?Object.is:Kx,Yx=bs.useSyncExternalStore,Xx=bs.useRef,Jx=bs.useEffect,Zx=bs.useMemo,ev=bs.useDebugValue;Hx.useSyncExternalStoreWithSelector=function(e,t,r,s,a){var o=Xx(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=Zx(function(){function c(f){if(!d){if(d=!0,p=f,f=s(f),a!==void 0&&i.hasValue){var b=i.value;if(a(b,f))return u=b}return u=f}if(b=u,Qx(p,f))return b;var x=s(f);return a!==void 0&&a(b,x)?(p=f,b):(p=f,u=x)}var d=!1,p,u,m=r===void 0?null:r;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,r,s,a]);var l=Yx(e,o[0],o[1]);return Jx(function(){i.hasValue=!0,i.value=l},[l]),ev(l),l};var tv=h.version.startsWith("19"),rv=Symbol.for(tv?"react.transitional.element":"react.element"),nv=Symbol.for("react.portal"),sv=Symbol.for("react.fragment"),av=Symbol.for("react.strict_mode"),ov=Symbol.for("react.profiler"),iv=Symbol.for("react.consumer"),lv=Symbol.for("react.context"),Ku=Symbol.for("react.forward_ref"),cv=Symbol.for("react.suspense"),dv=Symbol.for("react.suspense_list"),yi=Symbol.for("react.memo"),uv=Symbol.for("react.lazy"),mv=Ku,pv=yi;function hv(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case rv:switch(e=e.type,e){case sv:case ov:case av:case cv:case dv:return e;default:switch(e=e&&e.$$typeof,e){case lv:case Ku:case uv:case yi:return e;case iv:return e;default:return t}}case nv:return t}}}function fv(e){return hv(e)===yi}function gv(e,t,r,s,{areStatesEqual:a,areOwnPropsEqual:o,areStatePropsEqual:i}){let l=!1,c,d,p,u,m;function f(y,w){return c=y,d=w,p=e(c,d),u=t(s,d),m=r(p,u,d),l=!0,m}function b(){return p=e(c,d),t.dependsOnOwnProps&&(u=t(s,d)),m=r(p,u,d),m}function x(){return e.dependsOnOwnProps&&(p=e(c,d)),t.dependsOnOwnProps&&(u=t(s,d)),m=r(p,u,d),m}function g(){const y=e(c,d),w=!i(y,p);return p=y,w&&(m=r(p,u,d)),m}function v(y,w){const j=!o(w,d),k=!a(y,c,w,d);return c=y,d=w,j&&k?b():j?x():k?g():m}return function(w,j){return l?v(w,j):f(w,j)}}function bv(e,{initMapStateToProps:t,initMapDispatchToProps:r,initMergeProps:s,...a}){const o=t(e,a),i=r(e,a),l=s(e,a);return gv(o,i,l,e,a)}function xv(e,t){const r={};for(const s in e){const a=e[s];typeof a=="function"&&(r[s]=(...o)=>t(a(...o)))}return r}function Ao(e){return function(r){const s=e(r);function a(){return s}return a.dependsOnOwnProps=!1,a}}function ql(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function Qu(e,t){return function(s,{displayName:a}){const o=function(l,c){return o.dependsOnOwnProps?o.mapToProps(l,c):o.mapToProps(l,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(l,c){o.mapToProps=e,o.dependsOnOwnProps=ql(e);let d=o(l,c);return typeof d=="function"&&(o.mapToProps=d,o.dependsOnOwnProps=ql(d),d=o(l,c)),d},o}}function wi(e,t){return(r,s)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${s.wrappedComponentName}.`)}}function vv(e){return e&&typeof e=="object"?Ao(t=>xv(e,t)):e?typeof e=="function"?Qu(e):wi(e,"mapDispatchToProps"):Ao(t=>({dispatch:t}))}function yv(e){return e?typeof e=="function"?Qu(e):wi(e,"mapStateToProps"):Ao(()=>({}))}function wv(e,t,r){return{...r,...e,...t}}function jv(e){return function(r,{displayName:s,areMergedPropsEqual:a}){let o=!1,i;return function(c,d,p){const u=e(c,d,p);return o?a(u,i)||(i=u):(o=!0,i=u),i}}}function kv(e){return e?typeof e=="function"?jv(e):wi(e,"mergeProps"):()=>wv}function Nv(e){e()}function Cv(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Nv(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!s||e===null||(s=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var Wl={notify(){},get:()=>[]};function Yu(e,t){let r,s=Wl,a=0,o=!1;function i(x){p();const g=s.subscribe(x);let v=!1;return()=>{v||(v=!0,g(),u())}}function l(){s.notify()}function c(){b.onStateChange&&b.onStateChange()}function d(){return o}function p(){a++,r||(r=t?t.addNestedSub(c):e.subscribe(c),s=Cv())}function u(){a--,r&&a===0&&(r(),r=void 0,s.clear(),s=Wl)}function m(){o||(o=!0,p())}function f(){o&&(o=!1,u())}const b={addNestedSub:i,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:m,tryUnsubscribe:f,getListeners:()=>s};return b}var Sv=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ev=Sv(),Rv=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Dv=Rv(),Pv=()=>Ev||Dv?h.useLayoutEffect:h.useEffect,Bs=Pv();function Hl(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function qa(e,t){if(Hl(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!Hl(e[r[a]],t[r[a]]))return!1;return!0}var Av={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Tv={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Iv={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Xu={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Ov={[mv]:Iv,[pv]:Xu};function Kl(e){return fv(e)?Xu:Ov[e.$$typeof]||Av}var Mv=Object.defineProperty,Lv=Object.getOwnPropertyNames,Ql=Object.getOwnPropertySymbols,_v=Object.getOwnPropertyDescriptor,Fv=Object.getPrototypeOf,Yl=Object.prototype;function To(e,t){if(typeof t!="string"){if(Yl){const o=Fv(t);o&&o!==Yl&&To(e,o)}let r=Lv(t);Ql&&(r=r.concat(Ql(t)));const s=Kl(e),a=Kl(t);for(let o=0;o<r.length;++o){const i=r[o];if(!Tv[i]&&!(a&&a[i])&&!(s&&s[i])){const l=_v(t,i);try{Mv(e,i,l)}catch{}}}}return e}var Wa=Symbol.for("react-redux-context"),Ha=typeof globalThis<"u"?globalThis:{};function zv(){if(!h.createContext)return{};const e=Ha[Wa]??(Ha[Wa]=new Map);let t=e.get(h.createContext);return t||(t=h.createContext(null),e.set(h.createContext,t)),t}var Ju=zv(),$v=[null,null];function Bv(e,t,r){Bs(()=>e(...t),r)}function Uv(e,t,r,s,a,o){e.current=s,r.current=!1,a.current&&(a.current=null,o())}function Gv(e,t,r,s,a,o,i,l,c,d,p){if(!e)return()=>{};let u=!1,m=null;const f=()=>{if(u||!l.current)return;const x=t.getState();let g,v;try{g=s(x,a.current)}catch(y){v=y,m=y}v||(m=null),g===o.current?i.current||d():(o.current=g,c.current=g,i.current=!0,p())};return r.onStateChange=f,r.trySubscribe(),f(),()=>{if(u=!0,r.tryUnsubscribe(),r.onStateChange=null,m)throw m}}function Vv(e,t){return e===t}function qv(e,t,r,{pure:s,areStatesEqual:a=Vv,areOwnPropsEqual:o=qa,areStatePropsEqual:i=qa,areMergedPropsEqual:l=qa,forwardRef:c=!1,context:d=Ju}={}){const p=d,u=yv(e),m=vv(t),f=kv(r),b=!!e;return g=>{const v=g.displayName||g.name||"Component",y=`Connect(${v})`,w={shouldHandleStateChanges:b,displayName:y,wrappedComponentName:v,WrappedComponent:g,initMapStateToProps:u,initMapDispatchToProps:m,initMergeProps:f,areStatesEqual:a,areStatePropsEqual:i,areOwnPropsEqual:o,areMergedPropsEqual:l};function j(A){const[O,M,B]=h.useMemo(()=>{const{reactReduxForwardedRef:X,...me}=A;return[A.context,X,me]},[A]),U=h.useMemo(()=>{let X=p;return O!=null&&O.Consumer,X},[O,p]),_=h.useContext(U),G=!!A.store&&!!A.store.getState&&!!A.store.dispatch,L=!!_&&!!_.store,Q=G?A.store:_.store,F=L?_.getServerState:Q.getState,D=h.useMemo(()=>bv(Q.dispatch,w),[Q]),[V,z]=h.useMemo(()=>{if(!b)return $v;const X=Yu(Q,G?void 0:_.subscription),me=X.notifyNestedSubs.bind(X);return[X,me]},[Q,G,_]),R=h.useMemo(()=>G?_:{..._,subscription:V},[G,_,V]),C=h.useRef(void 0),ee=h.useRef(B),he=h.useRef(void 0),ae=h.useRef(!1),Me=h.useRef(!1),rt=h.useRef(void 0);Bs(()=>(Me.current=!0,()=>{Me.current=!1}),[]);const Re=h.useMemo(()=>()=>he.current&&B===ee.current?he.current:D(Q.getState(),B),[Q,B]),Ge=h.useMemo(()=>me=>V?Gv(b,Q,V,D,ee,C,ae,Me,he,z,me):()=>{},[V]);Bv(Uv,[ee,C,ae,B,he,z]);let Qe;try{Qe=h.useSyncExternalStore(Ge,Re,F?()=>D(F(),B):Re)}catch(X){throw rt.current&&(X.message+=`
The error may be correlated with this previous error:
${rt.current.stack}

`),X}Bs(()=>{rt.current=void 0,he.current=void 0,C.current=Qe});const Le=h.useMemo(()=>h.createElement(g,{...Qe,ref:M}),[M,g,Qe]);return h.useMemo(()=>b?h.createElement(U.Provider,{value:R},Le):Le,[U,Le,R])}const S=h.memo(j);if(S.WrappedComponent=g,S.displayName=j.displayName=y,c){const O=h.forwardRef(function(B,U){return h.createElement(S,{...B,reactReduxForwardedRef:U})});return O.displayName=y,O.WrappedComponent=g,To(O,g)}return To(S,g)}}var Zu=qv;function Wv(e){const{children:t,context:r,serverState:s,store:a}=e,o=h.useMemo(()=>{const c=Yu(a);return{store:a,subscription:c,getServerState:s?()=>s:void 0}},[a,s]),i=h.useMemo(()=>a.getState(),[a]);Bs(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,i]);const l=r||Ju;return h.createElement(l.Provider,{value:o},t)}var Hv=Wv,Kv="Invariant failed";function Qv(e,t){throw new Error(Kv)}var Gt=function(t){var r=t.top,s=t.right,a=t.bottom,o=t.left,i=s-o,l=a-r,c={top:r,right:s,bottom:a,left:o,width:i,height:l,x:o,y:r,center:{x:(s+o)/2,y:(a+r)/2}};return c},ji=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},Xl=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},Yv=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Ka={top:0,right:0,bottom:0,left:0},ki=function(t){var r=t.borderBox,s=t.margin,a=s===void 0?Ka:s,o=t.border,i=o===void 0?Ka:o,l=t.padding,c=l===void 0?Ka:l,d=Gt(ji(r,a)),p=Gt(Xl(r,i)),u=Gt(Xl(p,c));return{marginBox:d,borderBox:Gt(r),paddingBox:p,contentBox:u,margin:a,border:i,padding:c}},Tt=function(t){var r=t.slice(0,-2),s=t.slice(-2);if(s!=="px")return 0;var a=Number(r);return isNaN(a)&&Qv(),a},Xv=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Us=function(t,r){var s=t.borderBox,a=t.border,o=t.margin,i=t.padding,l=Yv(s,r);return ki({borderBox:l,border:a,margin:o,padding:i})},Gs=function(t,r){return r===void 0&&(r=Xv()),Us(t,r)},em=function(t,r){var s={top:Tt(r.marginTop),right:Tt(r.marginRight),bottom:Tt(r.marginBottom),left:Tt(r.marginLeft)},a={top:Tt(r.paddingTop),right:Tt(r.paddingRight),bottom:Tt(r.paddingBottom),left:Tt(r.paddingLeft)},o={top:Tt(r.borderTopWidth),right:Tt(r.borderRightWidth),bottom:Tt(r.borderBottomWidth),left:Tt(r.borderLeftWidth)};return ki({borderBox:t,margin:s,padding:a,border:o})},tm=function(t){var r=t.getBoundingClientRect(),s=window.getComputedStyle(t);return em(r,s)},ns=function(t){var r=[],s=null,a=function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];r=l,!s&&(s=requestAnimationFrame(function(){s=null,t.apply(void 0,r)}))};return a.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},a};function Vs(){return Vs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Vs.apply(null,arguments)}function rm(e,t){}rm.bind(null,"warn");rm.bind(null,"error");function Nr(){}function Jv(e,t){return{...e,...t}}function Lt(e,t,r){const s=t.map(a=>{const o=Jv(r,a.options);return e.addEventListener(a.eventName,a.fn,o),function(){e.removeEventListener(a.eventName,a.fn,o)}});return function(){s.forEach(o=>{o()})}}const Zv="Invariant failed";class qs extends Error{}qs.prototype.toString=function(){return this.message};function H(e,t){throw new qs(Zv)}class ey extends ye.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=Nr,this.onWindowError=r=>{const s=this.getCallbacks();s.isDragging()&&s.tryAbort(),r.error instanceof qs&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=Lt(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof qs){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const ty=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Ws=e=>e+1,ry=e=>`
  You have lifted an item in position ${Ws(e.source.index)}
`,nm=(e,t)=>{const r=e.droppableId===t.droppableId,s=Ws(e.index),a=Ws(t.index);return r?`
      You have moved the item from position ${s}
      to position ${a}
    `:`
    You have moved the item from position ${s}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${a}
  `},sm=(e,t,r)=>t.droppableId===r.droppableId?`
      The item ${e}
      has been combined with ${r.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,ny=e=>{const t=e.destination;if(t)return nm(e.source,t);const r=e.combine;return r?sm(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},Jl=e=>`
  The item has returned to its starting position
  of ${Ws(e.index)}
`,sy=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${Jl(e.source)}
    `;const t=e.destination,r=e.combine;return t?`
      You have dropped the item.
      ${nm(e.source,t)}
    `:r?`
      You have dropped the item.
      ${sm(e.draggableId,e.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${Jl(e.source)}
  `},Ms={dragHandleUsageInstructions:ty,onDragStart:ry,onDragUpdate:ny,onDragEnd:sy};function ay(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function am(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!ay(e[r],t[r]))return!1;return!0}function je(e,t){const r=h.useState(()=>({inputs:t,result:e()}))[0],s=h.useRef(!0),a=h.useRef(r),i=s.current||!!(t&&a.current.inputs&&am(t,a.current.inputs))?a.current:{inputs:t,result:e()};return h.useEffect(()=>{s.current=!1,a.current=i},[i]),i.result}function oe(e,t){return je(()=>e,t)}const lt={x:0,y:0},dt=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),St=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Cr=(e,t)=>e.x===t.x&&e.y===t.y,_n=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),Kr=(e,t,r=0)=>e==="x"?{x:t,y:r}:{x:r,y:t},ss=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Zl=(e,t)=>Math.min(...t.map(r=>ss(e,r))),om=e=>t=>({x:e(t.x),y:e(t.y)});var oy=(e,t)=>{const r=Gt({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r};const xs=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),ec=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],iy={top:0,right:0,bottom:0,left:0},ly=(e,t)=>t?xs(e,t.scroll.diff.displacement):e,cy=(e,t,r)=>r&&r.increasedBy?{...e,[t.end]:e[t.end]+r.increasedBy[t.line]}:e,dy=(e,t)=>t&&t.shouldClipSubject?oy(t.pageMarginBox,e):Gt(e);var Nn=({page:e,withPlaceholder:t,axis:r,frame:s})=>{const a=ly(e.marginBox,s),o=cy(a,r,t),i=dy(o,s);return{page:e,withPlaceholder:t,active:i}},Ni=(e,t)=>{e.frame||H();const r=e.frame,s=St(t,r.scroll.initial),a=_n(s),o={...r,scroll:{initial:r.scroll.initial,current:t,diff:{value:s,displacement:a},max:r.scroll.max}},i=Nn({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o});return{...e,frame:o,subject:i}};function it(e,t=am){let r=null;function s(...a){if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;const o=e.apply(this,a);return r={lastResult:o,lastArgs:a,lastThis:this},o}return s.clear=function(){r=null},s}const im=it(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),lm=it(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),fa=it(e=>Object.values(e)),uy=it(e=>Object.values(e));var Fn=it((e,t)=>uy(t).filter(s=>e===s.descriptor.droppableId).sort((s,a)=>s.descriptor.index-a.descriptor.index));function Ci(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function ga(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var ba=it((e,t)=>t.filter(r=>r.descriptor.id!==e.descriptor.id)),my=({isMovingForward:e,draggable:t,destination:r,insideDestination:s,previousImpact:a})=>{if(!r.isCombineEnabled||!Ci(a))return null;function i(f){const b={type:"COMBINE",combine:{draggableId:f,droppableId:r.descriptor.id}};return{...a,at:b}}const l=a.displaced.all,c=l.length?l[0]:null;if(e)return c?i(c):null;const d=ba(t,s);if(!c){if(!d.length)return null;const f=d[d.length-1];return i(f.descriptor.id)}const p=d.findIndex(f=>f.descriptor.id===c);p===-1&&H();const u=p-1;if(u<0)return null;const m=d[u];return i(m.descriptor.id)},zn=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const cm={point:lt,value:0},as={invisible:{},visible:{},all:[]},py={displaced:as,displacedBy:cm,at:null};var _t=(e,t)=>r=>e<=r&&r<=t,dm=e=>{const t=_t(e.top,e.bottom),r=_t(e.left,e.right);return s=>{if(t(s.top)&&t(s.bottom)&&r(s.left)&&r(s.right))return!0;const o=t(s.top)||t(s.bottom),i=r(s.left)||r(s.right);if(o&&i)return!0;const c=s.top<e.top&&s.bottom>e.bottom,d=s.left<e.left&&s.right>e.right;return c&&d?!0:c&&i||d&&o}},hy=e=>{const t=_t(e.top,e.bottom),r=_t(e.left,e.right);return s=>t(s.top)&&t(s.bottom)&&r(s.left)&&r(s.right)};const Si={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},um={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var fy=e=>t=>{const r=_t(t.top,t.bottom),s=_t(t.left,t.right);return a=>e===Si?r(a.top)&&r(a.bottom):s(a.left)&&s(a.right)};const gy=(e,t)=>{const r=t.frame?t.frame.scroll.diff.displacement:lt;return xs(e,r)},by=(e,t,r)=>t.subject.active?r(t.subject.active)(e):!1,xy=(e,t,r)=>r(t)(e),Ei=({target:e,destination:t,viewport:r,withDroppableDisplacement:s,isVisibleThroughFrameFn:a})=>{const o=s?gy(e,t):e;return by(o,t,a)&&xy(o,r,a)},vy=e=>Ei({...e,isVisibleThroughFrameFn:dm}),mm=e=>Ei({...e,isVisibleThroughFrameFn:hy}),yy=e=>Ei({...e,isVisibleThroughFrameFn:fy(e.destination.axis)}),wy=(e,t,r)=>{if(typeof r=="boolean")return r;if(!t)return!0;const{invisible:s,visible:a}=t;if(s[e])return!1;const o=a[e];return o?o.shouldAnimate:!0};function jy(e,t){const r=e.page.marginBox,s={top:t.point.y,right:0,bottom:0,left:t.point.x};return Gt(ji(r,s))}function os({afterDragging:e,destination:t,displacedBy:r,viewport:s,forceShouldAnimate:a,last:o}){return e.reduce(function(l,c){const d=jy(c,r),p=c.descriptor.id;if(l.all.push(p),!vy({target:d,destination:t,viewport:s,withDroppableDisplacement:!0}))return l.invisible[c.descriptor.id]=!0,l;const m=wy(p,o,a),f={draggableId:p,shouldAnimate:m};return l.visible[p]=f,l},{all:[],visible:{},invisible:{}})}function ky(e,t){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function tc({insideDestination:e,inHomeList:t,displacedBy:r,destination:s}){const a=ky(e,{inHomeList:t});return{displaced:as,displacedBy:r,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:a}}}}function Hs({draggable:e,insideDestination:t,destination:r,viewport:s,displacedBy:a,last:o,index:i,forceShouldAnimate:l}){const c=zn(e,r);if(i==null)return tc({insideDestination:t,inHomeList:c,displacedBy:a,destination:r});const d=t.find(b=>b.descriptor.index===i);if(!d)return tc({insideDestination:t,inHomeList:c,displacedBy:a,destination:r});const p=ba(e,t),u=t.indexOf(d),m=p.slice(u);return{displaced:os({afterDragging:m,destination:r,displacedBy:a,last:o,viewport:s.frame,forceShouldAnimate:l}),displacedBy:a,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function Dr(e,t){return!!t.effected[e]}var Ny=({isMovingForward:e,destination:t,draggables:r,combine:s,afterCritical:a})=>{if(!t.isCombineEnabled)return null;const o=s.draggableId,l=r[o].descriptor.index;return Dr(o,a)?e?l:l-1:e?l+1:l},Cy=({isMovingForward:e,isInHomeList:t,insideDestination:r,location:s})=>{if(!r.length)return null;const a=s.index,o=e?a+1:a-1,i=r[0].descriptor.index,l=r[r.length-1].descriptor.index,c=t?l:l+1;return o<i||o>c?null:o},Sy=({isMovingForward:e,isInHomeList:t,draggable:r,draggables:s,destination:a,insideDestination:o,previousImpact:i,viewport:l,afterCritical:c})=>{const d=i.at;if(d||H(),d.type==="REORDER"){const u=Cy({isMovingForward:e,isInHomeList:t,location:d.destination,insideDestination:o});return u==null?null:Hs({draggable:r,insideDestination:o,destination:a,viewport:l,last:i.displaced,displacedBy:i.displacedBy,index:u})}const p=Ny({isMovingForward:e,destination:a,displaced:i.displaced,draggables:s,combine:d.combine,afterCritical:c});return p==null?null:Hs({draggable:r,insideDestination:o,destination:a,viewport:l,last:i.displaced,displacedBy:i.displacedBy,index:p})},Ey=({displaced:e,afterCritical:t,combineWith:r,displacedBy:s})=>{const a=!!(e.visible[r]||e.invisible[r]);return Dr(r,t)?a?lt:_n(s.point):a?s.point:lt},Ry=({afterCritical:e,impact:t,draggables:r})=>{const s=ga(t);s||H();const a=s.draggableId,o=r[a].page.borderBox.center,i=Ey({displaced:t.displaced,afterCritical:e,combineWith:a,displacedBy:t.displacedBy});return dt(o,i)};const pm=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,Dy=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,Ri=(e,t,r)=>t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,rc=({axis:e,moveRelativeTo:t,isMoving:r})=>Kr(e.line,t.marginBox[e.end]+pm(e,r),Ri(e,t.marginBox,r)),nc=({axis:e,moveRelativeTo:t,isMoving:r})=>Kr(e.line,t.marginBox[e.start]-Dy(e,r),Ri(e,t.marginBox,r)),Py=({axis:e,moveInto:t,isMoving:r})=>Kr(e.line,t.contentBox[e.start]+pm(e,r),Ri(e,t.contentBox,r));var Ay=({impact:e,draggable:t,draggables:r,droppable:s,afterCritical:a})=>{const o=Fn(s.descriptor.id,r),i=t.page,l=s.axis;if(!o.length)return Py({axis:l,moveInto:s.page,isMoving:i});const{displaced:c,displacedBy:d}=e,p=c.all[0];if(p){const m=r[p];if(Dr(p,a))return nc({axis:l,moveRelativeTo:m.page,isMoving:i});const f=Us(m.page,d.point);return nc({axis:l,moveRelativeTo:f,isMoving:i})}const u=o[o.length-1];if(u.descriptor.id===t.descriptor.id)return i.borderBox.center;if(Dr(u.descriptor.id,a)){const m=Us(u.page,_n(a.displacedBy.point));return rc({axis:l,moveRelativeTo:m,isMoving:i})}return rc({axis:l,moveRelativeTo:u.page,isMoving:i})},Io=(e,t)=>{const r=e.frame;return r?dt(t,r.scroll.diff.displacement):t};const Ty=({impact:e,draggable:t,droppable:r,draggables:s,afterCritical:a})=>{const o=t.page.borderBox.center,i=e.at;return!r||!i?o:i.type==="REORDER"?Ay({impact:e,draggable:t,draggables:s,droppable:r,afterCritical:a}):Ry({impact:e,draggables:s,afterCritical:a})};var xa=e=>{const t=Ty(e),r=e.droppable;return r?Io(r,t):t},hm=(e,t)=>{const r=St(t,e.scroll.initial),s=_n(r);return{frame:Gt({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:s}}}};function sc(e,t){return e.map(r=>t[r])}function Iy(e,t){for(let r=0;r<t.length;r++){const s=t[r].visible[e];if(s)return s}return null}var Oy=({impact:e,viewport:t,destination:r,draggables:s,maxScrollChange:a})=>{const o=hm(t,dt(t.scroll.current,a)),i=r.frame?Ni(r,dt(r.frame.scroll.current,a)):r,l=e.displaced,c=os({afterDragging:sc(l.all,s),destination:r,displacedBy:e.displacedBy,viewport:o.frame,last:l,forceShouldAnimate:!1}),d=os({afterDragging:sc(l.all,s),destination:i,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),p={},u={},m=[l,c,d];return l.all.forEach(b=>{const x=Iy(b,m);if(x){u[b]=x;return}p[b]=!0}),{...e,displaced:{all:l.all,invisible:p,visible:u}}},My=(e,t)=>dt(e.scroll.diff.displacement,t),Di=({pageBorderBoxCenter:e,draggable:t,viewport:r})=>{const s=My(r,e),a=St(s,t.page.borderBox.center);return dt(t.client.borderBox.center,a)},fm=({draggable:e,destination:t,newPageBorderBoxCenter:r,viewport:s,withDroppableDisplacement:a,onlyOnMainAxis:o=!1})=>{const i=St(r,e.page.borderBox.center),c={target:xs(e.page.borderBox,i),destination:t,withDroppableDisplacement:a,viewport:s};return o?yy(c):mm(c)},Ly=({isMovingForward:e,draggable:t,destination:r,draggables:s,previousImpact:a,viewport:o,previousPageBorderBoxCenter:i,previousClientSelection:l,afterCritical:c})=>{if(!r.isEnabled)return null;const d=Fn(r.descriptor.id,s),p=zn(t,r),u=my({isMovingForward:e,draggable:t,destination:r,insideDestination:d,previousImpact:a})||Sy({isMovingForward:e,isInHomeList:p,draggable:t,draggables:s,destination:r,insideDestination:d,previousImpact:a,viewport:o,afterCritical:c});if(!u)return null;const m=xa({impact:u,draggable:t,droppable:r,draggables:s,afterCritical:c});if(fm({draggable:t,destination:r,newPageBorderBoxCenter:m,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Di({pageBorderBoxCenter:m,draggable:t,viewport:o}),impact:u,scrollJumpRequest:null};const b=St(m,i),x=Oy({impact:u,viewport:o,destination:r,draggables:s,maxScrollChange:b});return{clientSelection:l,impact:x,scrollJumpRequest:b}};const ht=e=>{const t=e.subject.active;return t||H(),t};var _y=({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:s,viewport:a})=>{const o=r.subject.active;if(!o)return null;const i=r.axis,l=_t(o[i.start],o[i.end]),c=fa(s).filter(p=>p!==r).filter(p=>p.isEnabled).filter(p=>!!p.subject.active).filter(p=>dm(a.frame)(ht(p))).filter(p=>{const u=ht(p);return e?o[i.crossAxisEnd]<u[i.crossAxisEnd]:u[i.crossAxisStart]<o[i.crossAxisStart]}).filter(p=>{const u=ht(p),m=_t(u[i.start],u[i.end]);return l(u[i.start])||l(u[i.end])||m(o[i.start])||m(o[i.end])}).sort((p,u)=>{const m=ht(p)[i.crossAxisStart],f=ht(u)[i.crossAxisStart];return e?m-f:f-m}).filter((p,u,m)=>ht(p)[i.crossAxisStart]===ht(m[0])[i.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const d=c.filter(p=>_t(ht(p)[i.start],ht(p)[i.end])(t[i.line]));return d.length===1?d[0]:d.length>1?d.sort((p,u)=>ht(p)[i.start]-ht(u)[i.start])[0]:c.sort((p,u)=>{const m=Zl(t,ec(ht(p))),f=Zl(t,ec(ht(u)));return m!==f?m-f:ht(p)[i.start]-ht(u)[i.start]})[0]};const ac=(e,t)=>{const r=e.page.borderBox.center;return Dr(e.descriptor.id,t)?St(r,t.displacedBy.point):r},Fy=(e,t)=>{const r=e.page.borderBox;return Dr(e.descriptor.id,t)?xs(r,_n(t.displacedBy.point)):r};var zy=({pageBorderBoxCenter:e,viewport:t,destination:r,insideDestination:s,afterCritical:a})=>s.filter(i=>mm({target:Fy(i,a),destination:r,viewport:t.frame,withDroppableDisplacement:!0})).sort((i,l)=>{const c=ss(e,Io(r,ac(i,a))),d=ss(e,Io(r,ac(l,a)));return c<d?-1:d<c?1:i.descriptor.index-l.descriptor.index})[0]||null,vs=it(function(t,r){const s=r[t.line];return{value:s,point:Kr(t.line,s)}});const $y=(e,t,r)=>{const s=e.axis;if(e.descriptor.mode==="virtual")return Kr(s.line,t[s.line]);const a=e.subject.page.contentBox[s.size],c=Fn(e.descriptor.id,r).reduce((d,p)=>d+p.client.marginBox[s.size],0)+t[s.line]-a;return c<=0?null:Kr(s.line,c)},gm=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),bm=(e,t,r)=>{const s=e.frame;zn(t,e)&&H(),e.subject.withPlaceholder&&H();const a=vs(e.axis,t.displaceBy).point,o=$y(e,a,r),i={placeholderSize:a,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){const p=Nn({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame});return{...e,subject:p}}const l=o?dt(s.scroll.max,o):s.scroll.max,c=gm(s,l),d=Nn({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:c});return{...e,subject:d,frame:c}},By=e=>{const t=e.subject.withPlaceholder;t||H();const r=e.frame;if(!r){const i=Nn({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:i}}const s=t.oldFrameMaxScroll;s||H();const a=gm(r,s),o=Nn({page:e.subject.page,axis:e.axis,frame:a,withPlaceholder:null});return{...e,subject:o,frame:a}};var Uy=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:r,draggable:s,draggables:a,destination:o,viewport:i,afterCritical:l})=>{if(!t){if(r.length)return null;const u={displaced:as,displacedBy:cm,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},m=xa({impact:u,draggable:s,droppable:o,draggables:a,afterCritical:l}),f=zn(s,o)?o:bm(o,s,a);return fm({draggable:s,destination:f,newPageBorderBoxCenter:m,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?u:null}const c=e[o.axis.line]<=t.page.borderBox.center[o.axis.line],d=(()=>{const u=t.descriptor.index;return t.descriptor.id===s.descriptor.id||c?u:u+1})(),p=vs(o.axis,s.displaceBy);return Hs({draggable:s,insideDestination:r,destination:o,viewport:i,displacedBy:p,last:as,index:d})},Gy=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:r,isOver:s,draggables:a,droppables:o,viewport:i,afterCritical:l})=>{const c=_y({isMovingForward:e,pageBorderBoxCenter:t,source:s,droppables:o,viewport:i});if(!c)return null;const d=Fn(c.descriptor.id,a),p=zy({pageBorderBoxCenter:t,viewport:i,destination:c,insideDestination:d,afterCritical:l}),u=Uy({previousPageBorderBoxCenter:t,destination:c,draggable:r,draggables:a,moveRelativeTo:p,insideDestination:d,viewport:i,afterCritical:l});if(!u)return null;const m=xa({impact:u,draggable:r,droppable:c,draggables:a,afterCritical:l});return{clientSelection:Di({pageBorderBoxCenter:m,draggable:r,viewport:i}),impact:u,scrollJumpRequest:null}},Et=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const Vy=(e,t)=>{const r=Et(e);return r?t[r]:null};var qy=({state:e,type:t})=>{const r=Vy(e.impact,e.dimensions.droppables),s=!!r,a=e.dimensions.droppables[e.critical.droppable.id],o=r||a,i=o.axis.direction,l=i==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||i==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!s)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",d=e.dimensions.draggables[e.critical.draggable.id],p=e.current.page.borderBoxCenter,{draggables:u,droppables:m}=e.dimensions;return l?Ly({isMovingForward:c,previousPageBorderBoxCenter:p,draggable:d,destination:o,draggables:u,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):Gy({isMovingForward:c,previousPageBorderBoxCenter:p,draggable:d,isOver:o,draggables:u,droppables:m,viewport:e.viewport,afterCritical:e.afterCritical})};function _r(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function xm(e){const t=_t(e.top,e.bottom),r=_t(e.left,e.right);return function(a){return t(a.y)&&r(a.x)}}function Wy(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function Hy({pageBorderBox:e,draggable:t,candidates:r}){const s=t.page.borderBox.center,a=r.map(o=>{const i=o.axis,l=Kr(o.axis.line,e.center[i.line],o.page.borderBox.center[i.crossAxisLine]);return{id:o.descriptor.id,distance:ss(s,l)}}).sort((o,i)=>i.distance-o.distance);return a[0]?a[0].id:null}function Ky({pageBorderBox:e,draggable:t,droppables:r}){const s=fa(r).filter(a=>{if(!a.isEnabled)return!1;const o=a.subject.active;if(!o||!Wy(e,o))return!1;if(xm(o)(e.center))return!0;const i=a.axis,l=o.center[i.crossAxisLine],c=e[i.crossAxisStart],d=e[i.crossAxisEnd],p=_t(o[i.crossAxisStart],o[i.crossAxisEnd]),u=p(c),m=p(d);return!u&&!m?!0:u?c<l:d>l});return s.length?s.length===1?s[0].descriptor.id:Hy({pageBorderBox:e,draggable:t,candidates:s}):null}const vm=(e,t)=>Gt(xs(e,t));var Qy=(e,t)=>{const r=e.frame;return r?vm(t,r.scroll.diff.value):t};function ym({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function Yy({draggable:e,closest:t,inHomeList:r}){return t?r&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var Xy=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:r,insideDestination:s,last:a,viewport:o,afterCritical:i})=>{const l=r.axis,c=vs(r.axis,t.displaceBy),d=c.value,p=e[l.start],u=e[l.end],f=ba(t,s).find(x=>{const g=x.descriptor.id,v=x.page.borderBox.center[l.line],y=Dr(g,i),w=ym({displaced:a,id:g});return y?w?u<=v:p<v-d:w?u<=v+d:p<v})||null,b=Yy({draggable:t,closest:f,inHomeList:zn(t,r)});return Hs({draggable:t,insideDestination:s,destination:r,viewport:o,last:a,displacedBy:c,index:b})};const Jy=4;var Zy=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:r,destination:s,insideDestination:a,afterCritical:o})=>{if(!s.isCombineEnabled)return null;const i=s.axis,l=vs(s.axis,e.displaceBy),c=l.value,d=t[i.start],p=t[i.end],m=ba(e,a).find(b=>{const x=b.descriptor.id,g=b.page.borderBox,y=g[i.size]/Jy,w=Dr(x,o),j=ym({displaced:r.displaced,id:x});return w?j?p>g[i.start]+y&&p<g[i.end]-y:d>g[i.start]-c+y&&d<g[i.end]-c-y:j?p>g[i.start]+c+y&&p<g[i.end]+c-y:d>g[i.start]+y&&d<g[i.end]-y});return m?{displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:m.descriptor.id,droppableId:s.descriptor.id}}}:null},wm=({pageOffset:e,draggable:t,draggables:r,droppables:s,previousImpact:a,viewport:o,afterCritical:i})=>{const l=vm(t.page.borderBox,e),c=Ky({pageBorderBox:l,draggable:t,droppables:s});if(!c)return py;const d=s[c],p=Fn(d.descriptor.id,r),u=Qy(d,l);return Zy({pageBorderBoxWithDroppableScroll:u,draggable:t,previousImpact:a,destination:d,insideDestination:p,afterCritical:i})||Xy({pageBorderBoxWithDroppableScroll:u,draggable:t,destination:d,insideDestination:p,last:a.displaced,viewport:o,afterCritical:i})},Pi=(e,t)=>({...e,[t.descriptor.id]:t});const ew=({previousImpact:e,impact:t,droppables:r})=>{const s=Et(e),a=Et(t);if(!s||s===a)return r;const o=r[s];if(!o.subject.withPlaceholder)return r;const i=By(o);return Pi(r,i)};var tw=({draggable:e,draggables:t,droppables:r,previousImpact:s,impact:a})=>{const o=ew({previousImpact:s,impact:a,droppables:r}),i=Et(a);if(!i)return o;const l=r[i];if(zn(e,l)||l.subject.withPlaceholder)return o;const c=bm(l,e,t);return Pi(o,c)},Zn=({state:e,clientSelection:t,dimensions:r,viewport:s,impact:a,scrollJumpRequest:o})=>{const i=s||e.viewport,l=r||e.dimensions,c=t||e.current.client.selection,d=St(c,e.initial.client.selection),p={offset:d,selection:c,borderBoxCenter:dt(e.initial.client.borderBoxCenter,d)},u={selection:dt(p.selection,i.scroll.current),borderBoxCenter:dt(p.borderBoxCenter,i.scroll.current),offset:dt(p.offset,i.scroll.diff.value)},m={client:p,page:u};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:i,current:m};const f=l.draggables[e.critical.draggable.id],b=a||wm({pageOffset:u.offset,draggable:f,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:i,afterCritical:e.afterCritical}),x=tw({draggable:f,impact:b,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:m,dimensions:{draggables:l.draggables,droppables:x},impact:b,viewport:i,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null}};function rw(e,t){return e.map(r=>t[r])}var jm=({impact:e,viewport:t,draggables:r,destination:s,forceShouldAnimate:a})=>{const o=e.displaced,i=rw(o.all,r),l=os({afterDragging:i,destination:s,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:a,last:o});return{...e,displaced:l}},km=({impact:e,draggable:t,droppable:r,draggables:s,viewport:a,afterCritical:o})=>{const i=xa({impact:e,draggable:t,draggables:s,droppable:r,afterCritical:o});return Di({pageBorderBoxCenter:i,draggable:t,viewport:a})},Nm=({state:e,dimensions:t,viewport:r})=>{e.movementMode!=="SNAP"&&H();const s=e.impact,a=r||e.viewport,o=t||e.dimensions,{draggables:i,droppables:l}=o,c=i[e.critical.draggable.id],d=Et(s);d||H();const p=l[d],u=jm({impact:s,viewport:a,destination:p,draggables:i}),m=km({impact:u,draggable:c,droppable:p,draggables:i,viewport:a,afterCritical:e.afterCritical});return Zn({impact:u,clientSelection:m,state:e,dimensions:o,viewport:a})},nw=e=>({index:e.index,droppableId:e.droppableId}),Cm=({draggable:e,home:t,draggables:r,viewport:s})=>{const a=vs(t.axis,e.displaceBy),o=Fn(t.descriptor.id,r),i=o.indexOf(e);i===-1&&H();const l=o.slice(i+1),c=l.reduce((m,f)=>(m[f.descriptor.id]=!0,m),{}),d={inVirtualList:t.descriptor.mode==="virtual",displacedBy:a,effected:c};return{impact:{displaced:os({afterDragging:l,destination:t,displacedBy:a,last:null,viewport:s.frame,forceShouldAnimate:!1}),displacedBy:a,at:{type:"REORDER",destination:nw(e.descriptor)}},afterCritical:d}},sw=(e,t)=>({draggables:e.draggables,droppables:Pi(e.droppables,t)}),aw=({draggable:e,offset:t,initialWindowScroll:r})=>{const s=Us(e.client,t),a=Gs(s,r);return{...e,placeholder:{...e.placeholder,client:s},client:s,page:a}},ow=e=>{const t=e.frame;return t||H(),t},iw=({additions:e,updatedDroppables:t,viewport:r})=>{const s=r.scroll.diff.value;return e.map(a=>{const o=a.descriptor.droppableId,i=t[o],c=ow(i).scroll.diff.value,d=dt(s,c);return aw({draggable:a,offset:d,initialWindowScroll:r.scroll.initial})})},lw=({state:e,published:t})=>{const r=t.modified.map(v=>{const y=e.dimensions.droppables[v.droppableId];return Ni(y,v.scroll)}),s={...e.dimensions.droppables,...im(r)},a=lm(iw({additions:t.additions,updatedDroppables:s,viewport:e.viewport})),o={...e.dimensions.draggables,...a};t.removals.forEach(v=>{delete o[v]});const i={droppables:s,draggables:o},l=Et(e.impact),c=l?i.droppables[l]:null,d=i.draggables[e.critical.draggable.id],p=i.droppables[e.critical.droppable.id],{impact:u,afterCritical:m}=Cm({draggable:d,home:p,draggables:o,viewport:e.viewport}),f=c&&c.isCombineEnabled?e.impact:u,b=wm({pageOffset:e.current.page.offset,draggable:i.draggables[e.critical.draggable.id],draggables:i.draggables,droppables:i.droppables,previousImpact:f,viewport:e.viewport,afterCritical:m}),x={...e,phase:"DRAGGING",impact:b,onLiftImpact:u,dimensions:i,afterCritical:m,forceShouldAnimate:!1};return e.phase==="COLLECTING"?x:{...x,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Oo=e=>e.movementMode==="SNAP",Qa=(e,t,r)=>{const s=sw(e.dimensions,t);return!Oo(e)||r?Zn({state:e,dimensions:s}):Nm({state:e,dimensions:s})};function Ya(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const oc={phase:"IDLE",completed:null,shouldFlush:!1};var cw=(e=oc,t)=>{if(t.type==="FLUSH")return{...oc,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&H();const{critical:r,clientSelection:s,viewport:a,dimensions:o,movementMode:i}=t.payload,l=o.draggables[r.draggable.id],c=o.droppables[r.droppable.id],d={selection:s,borderBoxCenter:l.client.borderBox.center,offset:lt},p={client:d,page:{selection:dt(d.selection,a.scroll.initial),borderBoxCenter:dt(d.selection,a.scroll.initial),offset:dt(d.selection,a.scroll.diff.value)}},u=fa(o.droppables).every(x=>!x.isFixedOnPage),{impact:m,afterCritical:f}=Cm({draggable:l,home:c,draggables:o.draggables,viewport:a});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:i,dimensions:o,initial:p,current:p,isWindowScrollAllowed:u,impact:m,afterCritical:f,onLiftImpact:m,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&H(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||H(),lw({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;_r(e)||H();const{client:r}=t.payload;return Cr(r,e.current.client.selection)?e:Zn({state:e,clientSelection:r,impact:Oo(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Ya(e);_r(e)||H();const{id:r,newScroll:s}=t.payload,a=e.dimensions.droppables[r];if(!a)return e;const o=Ni(a,s);return Qa(e,o,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;_r(e)||H();const{id:r,isEnabled:s}=t.payload,a=e.dimensions.droppables[r];a||H(),a.isEnabled===s&&H();const o={...a,isEnabled:s};return Qa(e,o,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;_r(e)||H();const{id:r,isCombineEnabled:s}=t.payload,a=e.dimensions.droppables[r];a||H(),a.isCombineEnabled===s&&H();const o={...a,isCombineEnabled:s};return Qa(e,o,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;_r(e)||H(),e.isWindowScrollAllowed||H();const r=t.payload.newScroll;if(Cr(e.viewport.scroll.current,r))return Ya(e);const s=hm(e.viewport,r);return Oo(e)?Nm({state:e,viewport:s}):Zn({state:e,viewport:s})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!_r(e))return e;const r=t.payload.maxScroll;if(Cr(r,e.viewport.scroll.max))return e;const s={...e.viewport,scroll:{...e.viewport.scroll,max:r}};return{...e,viewport:s}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&H();const r=qy({state:e,type:t.type});return r?Zn({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const r=t.payload.reason;return e.phase!=="COLLECTING"&&H(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(t.type==="DROP_ANIMATE"){const{completed:r,dropDuration:s,newHomeClientOffset:a}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||H(),{phase:"DROP_ANIMATING",completed:r,dropDuration:s,newHomeClientOffset:a,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:r}=t.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return e};function De(e,t){return e instanceof Object&&"type"in e&&e.type===t}const dw=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),uw=e=>({type:"LIFT",payload:e}),mw=e=>({type:"INITIAL_PUBLISH",payload:e}),pw=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),hw=()=>({type:"COLLECTION_STARTING",payload:null}),fw=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),gw=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),bw=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),Sm=e=>({type:"MOVE",payload:e}),xw=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),vw=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),yw=()=>({type:"MOVE_UP",payload:null}),ww=()=>({type:"MOVE_DOWN",payload:null}),jw=()=>({type:"MOVE_RIGHT",payload:null}),kw=()=>({type:"MOVE_LEFT",payload:null}),Ai=()=>({type:"FLUSH",payload:null}),Nw=e=>({type:"DROP_ANIMATE",payload:e}),Ti=e=>({type:"DROP_COMPLETE",payload:e}),Em=e=>({type:"DROP",payload:e}),Cw=e=>({type:"DROP_PENDING",payload:e}),Rm=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var Sw=e=>({getState:t,dispatch:r})=>s=>a=>{if(!De(a,"LIFT")){s(a);return}const{id:o,clientSelection:i,movementMode:l}=a.payload,c=t();c.phase==="DROP_ANIMATING"&&r(Ti({completed:c.completed})),t().phase!=="IDLE"&&H(),r(Ai()),r(dw({draggableId:o,movementMode:l}));const p={draggableId:o,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:u,dimensions:m,viewport:f}=e.startPublishing(p);r(mw({critical:u,dimensions:m,clientSelection:i,movementMode:l,viewport:f}))},Ew=e=>()=>t=>r=>{De(r,"INITIAL_PUBLISH")&&e.dragging(),De(r,"DROP_ANIMATE")&&e.dropping(r.payload.completed.result.reason),(De(r,"FLUSH")||De(r,"DROP_COMPLETE"))&&e.resting(),t(r)};const Ii={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},is={opacity:{drop:0,combining:.7},scale:{drop:.75}},Dm={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Lr=`${Dm.outOfTheWay}s ${Ii.outOfTheWay}`,es={fluid:`opacity ${Lr}`,snap:`transform ${Lr}, opacity ${Lr}`,drop:e=>{const t=`${e}s ${Ii.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Lr}`,placeholder:`height ${Lr}, width ${Lr}, margin ${Lr}`},ic=e=>Cr(e,lt)?void 0:`translate(${e.x}px, ${e.y}px)`,Mo={moveTo:ic,drop:(e,t)=>{const r=ic(e);if(r)return t?`${r} scale(${is.scale.drop})`:r}},{minDropTime:Lo,maxDropTime:Pm}=Dm,Rw=Pm-Lo,lc=1500,Dw=.6;var Pw=({current:e,destination:t,reason:r})=>{const s=ss(e,t);if(s<=0)return Lo;if(s>=lc)return Pm;const a=s/lc,o=Lo+Rw*a,i=r==="CANCEL"?o*Dw:o;return Number(i.toFixed(2))},Aw=({impact:e,draggable:t,dimensions:r,viewport:s,afterCritical:a})=>{const{draggables:o,droppables:i}=r,l=Et(e),c=l?i[l]:null,d=i[t.descriptor.droppableId],p=km({impact:e,draggable:t,draggables:o,afterCritical:a,droppable:c||d,viewport:s});return St(p,t.client.borderBox.center)},Tw=({draggables:e,reason:t,lastImpact:r,home:s,viewport:a,onLiftImpact:o})=>!r.at||t!=="DROP"?{impact:jm({draggables:e,impact:o,destination:s,viewport:a,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:as},didDropInsideDroppable:!0};const Iw=({getState:e,dispatch:t})=>r=>s=>{if(!De(s,"DROP")){r(s);return}const a=e(),o=s.payload.reason;if(a.phase==="COLLECTING"){t(Cw({reason:o}));return}if(a.phase==="IDLE")return;a.phase==="DROP_PENDING"&&a.isWaiting&&H(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||H();const l=a.critical,c=a.dimensions,d=c.draggables[a.critical.draggable.id],{impact:p,didDropInsideDroppable:u}=Tw({reason:o,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),m=u?Ci(p):null,f=u?ga(p):null,b={index:l.draggable.index,droppableId:l.droppable.id},x={draggableId:d.descriptor.id,type:d.descriptor.type,source:b,reason:o,mode:a.movementMode,destination:m,combine:f},g=Aw({impact:p,draggable:d,dimensions:c,viewport:a.viewport,afterCritical:a.afterCritical}),v={critical:a.critical,afterCritical:a.afterCritical,result:x,impact:p};if(!(!Cr(a.current.client.offset,g)||!!x.combine)){t(Ti({completed:v}));return}const w=Pw({current:a.current.client.offset,destination:g,reason:o});t(Nw({newHomeClientOffset:g,dropDuration:w,completed:v}))};var Am=()=>({x:window.pageXOffset,y:window.pageYOffset});function Ow(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function Mw({onWindowScroll:e}){function t(){e(Am())}const r=ns(t),s=Ow(r);let a=Nr;function o(){return a!==Nr}function i(){o()&&H(),a=Lt(window,[s])}function l(){o()||H(),r.cancel(),a(),a=Nr}return{start:i,stop:l,isActive:o}}const Lw=e=>De(e,"DROP_COMPLETE")||De(e,"DROP_ANIMATE")||De(e,"FLUSH"),_w=e=>{const t=Mw({onWindowScroll:r=>{e.dispatch(xw({newScroll:r}))}});return r=>s=>{!t.isActive()&&De(s,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&Lw(s)&&t.stop(),r(s)}};var Fw=e=>{let t=!1,r=!1;const s=setTimeout(()=>{r=!0}),a=o=>{t||r||(t=!0,e(o),clearTimeout(s))};return a.wasCalled=()=>t,a},zw=()=>{const e=[],t=a=>{const o=e.findIndex(l=>l.timerId===a);o===-1&&H();const[i]=e.splice(o,1);i.callback()};return{add:a=>{const o=setTimeout(()=>t(o)),i={timerId:o,callback:a};e.push(i)},flush:()=>{if(!e.length)return;const a=[...e];e.length=0,a.forEach(o=>{clearTimeout(o.timerId),o.callback()})}}};const $w=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,Bw=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,Uw=(e,t)=>{if(e===t)return!0;const r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,s=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&s},Wn=(e,t)=>{t()},Es=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function Xa(e,t,r,s){if(!e){r(s(t));return}const a=Fw(r);e(t,{announce:a}),a.wasCalled()||r(s(t))}var Gw=(e,t)=>{const r=zw();let s=null;const a=(u,m)=>{s&&H(),Wn("onBeforeCapture",()=>{const f=e().onBeforeCapture;f&&f({draggableId:u,mode:m})})},o=(u,m)=>{s&&H(),Wn("onBeforeDragStart",()=>{const f=e().onBeforeDragStart;f&&f(Es(u,m))})},i=(u,m)=>{s&&H();const f=Es(u,m);s={mode:m,lastCritical:u,lastLocation:f.source,lastCombine:null},r.add(()=>{Wn("onDragStart",()=>Xa(e().onDragStart,f,t,Ms.onDragStart))})},l=(u,m)=>{const f=Ci(m),b=ga(m);s||H();const x=!Uw(u,s.lastCritical);x&&(s.lastCritical=u);const g=!$w(s.lastLocation,f);g&&(s.lastLocation=f);const v=!Bw(s.lastCombine,b);if(v&&(s.lastCombine=b),!x&&!g&&!v)return;const y={...Es(u,s.mode),combine:b,destination:f};r.add(()=>{Wn("onDragUpdate",()=>Xa(e().onDragUpdate,y,t,Ms.onDragUpdate))})},c=()=>{s||H(),r.flush()},d=u=>{s||H(),s=null,Wn("onDragEnd",()=>Xa(e().onDragEnd,u,t,Ms.onDragEnd))};return{beforeCapture:a,beforeStart:o,start:i,update:l,flush:c,drop:d,abort:()=>{if(!s)return;const u={...Es(s.lastCritical,s.mode),combine:null,destination:null,reason:"CANCEL"};d(u)}}},Vw=(e,t)=>{const r=Gw(e,t);return s=>a=>o=>{if(De(o,"BEFORE_INITIAL_CAPTURE")){r.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(De(o,"INITIAL_PUBLISH")){const l=o.payload.critical;r.beforeStart(l,o.payload.movementMode),a(o),r.start(l,o.payload.movementMode);return}if(De(o,"DROP_COMPLETE")){const l=o.payload.completed.result;r.flush(),a(o),r.drop(l);return}if(a(o),De(o,"FLUSH")){r.abort();return}const i=s.getState();i.phase==="DRAGGING"&&r.update(i.critical,i.impact)}};const qw=e=>t=>r=>{if(!De(r,"DROP_ANIMATION_FINISHED")){t(r);return}const s=e.getState();s.phase!=="DROP_ANIMATING"&&H(),e.dispatch(Ti({completed:s.completed}))},Ww=e=>{let t=null,r=null;function s(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return a=>o=>{if((De(o,"FLUSH")||De(o,"DROP_COMPLETE")||De(o,"DROP_ANIMATION_FINISHED"))&&s(),a(o),!De(o,"DROP_ANIMATE"))return;const i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(Rm())}};r=requestAnimationFrame(()=>{r=null,t=Lt(window,[i])})}};var Hw=e=>()=>t=>r=>{(De(r,"DROP_COMPLETE")||De(r,"FLUSH")||De(r,"DROP_ANIMATE"))&&e.stopPublishing(),t(r)},Kw=e=>{let t=!1;return()=>r=>s=>{if(De(s,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(s.payload.critical.draggable.id),r(s),e.tryRestoreFocusRecorded();return}if(r(s),!!t){if(De(s,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(De(s,"DROP_COMPLETE")){t=!1;const a=s.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const Qw=e=>De(e,"DROP_COMPLETE")||De(e,"DROP_ANIMATE")||De(e,"FLUSH");var Yw=e=>t=>r=>s=>{if(Qw(s)){e.stop(),r(s);return}if(De(s,"INITIAL_PUBLISH")){r(s);const a=t.getState();a.phase!=="DRAGGING"&&H(),e.start(a);return}r(s),e.scroll(t.getState())};const Xw=e=>t=>r=>{if(t(r),!De(r,"PUBLISH_WHILE_DRAGGING"))return;const s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(Em({reason:s.reason})))},Jw=Hu;var Zw=({dimensionMarshal:e,focusMarshal:t,styleMarshal:r,getResponders:s,announce:a,autoScroller:o})=>Wu(cw,Jw(Wx(Ew(r),Hw(e),Sw(e),Iw,qw,Ww,Xw,Yw(o),_w,Kw(t),Vw(s,a))));const Ja=()=>({additions:{},removals:{},modified:{}});function e1({registry:e,callbacks:t}){let r=Ja(),s=null;const a=()=>{s||(t.collectionStarting(),s=requestAnimationFrame(()=>{s=null;const{additions:c,removals:d,modified:p}=r,u=Object.keys(c).map(b=>e.draggable.getById(b).getDimension(lt)).sort((b,x)=>b.descriptor.index-x.descriptor.index),m=Object.keys(p).map(b=>{const g=e.droppable.getById(b).callbacks.getScrollWhileDragging();return{droppableId:b,scroll:g}}),f={additions:u,removals:Object.keys(d),modified:m};r=Ja(),t.publish(f)}))};return{add:c=>{const d=c.descriptor.id;r.additions[d]=c,r.modified[c.descriptor.droppableId]=!0,r.removals[d]&&delete r.removals[d],a()},remove:c=>{const d=c.descriptor;r.removals[d.id]=!0,r.modified[d.droppableId]=!0,r.additions[d.id]&&delete r.additions[d.id],a()},stop:()=>{s&&(cancelAnimationFrame(s),s=null,r=Ja())}}}var Tm=({scrollHeight:e,scrollWidth:t,height:r,width:s})=>{const a=St({x:t,y:e},{x:s,y:r});return{x:Math.max(0,a.x),y:Math.max(0,a.y)}},Im=()=>{const e=document.documentElement;return e||H(),e},Om=()=>{const e=Im();return Tm({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},t1=()=>{const e=Am(),t=Om(),r=e.y,s=e.x,a=Im(),o=a.clientWidth,i=a.clientHeight,l=s+o,c=r+i;return{frame:Gt({top:r,left:s,right:l,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:lt,displacement:lt}}}},r1=({critical:e,scrollOptions:t,registry:r})=>{const s=t1(),a=s.scroll.current,o=e.droppable,i=r.droppable.getAllByType(o.type).map(p=>p.callbacks.getDimensionAndWatchScroll(a,t)),l=r.draggable.getAllByType(e.draggable.type).map(p=>p.getDimension(a));return{dimensions:{draggables:lm(l),droppables:im(i)},critical:e,viewport:s}};function cc(e,t,r){return!(r.descriptor.id===t.id||r.descriptor.type!==t.type||e.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var n1=(e,t)=>{let r=null;const s=e1({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=(m,f)=>{e.droppable.exists(m)||H(),r&&t.updateDroppableIsEnabled({id:m,isEnabled:f})},o=(m,f)=>{r&&(e.droppable.exists(m)||H(),t.updateDroppableIsCombineEnabled({id:m,isCombineEnabled:f}))},i=(m,f)=>{r&&(e.droppable.exists(m)||H(),t.updateDroppableScroll({id:m,newScroll:f}))},l=(m,f)=>{r&&e.droppable.getById(m).callbacks.scroll(f)},c=()=>{if(!r)return;s.stop();const m=r.critical.droppable;e.droppable.getAllByType(m.type).forEach(f=>f.callbacks.dragStopped()),r.unsubscribe(),r=null},d=m=>{r||H();const f=r.critical.draggable;m.type==="ADDITION"&&cc(e,f,m.value)&&s.add(m.value),m.type==="REMOVAL"&&cc(e,f,m.value)&&s.remove(m.value)};return{updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:o,scrollDroppable:l,updateDroppableScroll:i,startPublishing:m=>{r&&H();const f=e.draggable.getById(m.draggableId),b=e.droppable.getById(f.descriptor.droppableId),x={draggable:f.descriptor,droppable:b.descriptor},g=e.subscribe(d);return r={critical:x,unsubscribe:g},r1({critical:x,registry:e,scrollOptions:m.scrollOptions})},stopPublishing:c}},Mm=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",s1=e=>{window.scrollBy(e.x,e.y)};const a1=it(e=>fa(e).filter(t=>!(!t.isEnabled||!t.frame))),o1=(e,t)=>a1(t).find(s=>(s.frame||H(),xm(s.frame.pageMarginBox)(e)))||null;var i1=({center:e,destination:t,droppables:r})=>{if(t){const a=r[t];return a.frame?a:null}return o1(e,r)};const ls={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var l1=(e,t,r=()=>ls)=>{const s=r(),a=e[t.size]*s.startFromPercentage,o=e[t.size]*s.maxScrollAtPercentage;return{startScrollingFrom:a,maxScrollValueAt:o}},Lm=({startOfRange:e,endOfRange:t,current:r})=>{const s=t-e;return s===0?0:(r-e)/s},Oi=1,c1=(e,t,r=()=>ls)=>{const s=r();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return s.maxPixelScroll;if(e===t.startScrollingFrom)return Oi;const o=1-Lm({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),i=s.maxPixelScroll*s.ease(o);return Math.ceil(i)},d1=(e,t,r)=>{const s=r(),a=s.durationDampening.accelerateAt,o=s.durationDampening.stopDampeningAt,i=t,l=o,d=Date.now()-i;if(d>=o)return e;if(d<a)return Oi;const p=Lm({startOfRange:a,endOfRange:l,current:d}),u=e*s.ease(p);return Math.ceil(u)},dc=({distanceToEdge:e,thresholds:t,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:a})=>{const o=c1(e,t,a);return o===0?0:s?Math.max(d1(o,r,a),Oi):o},uc=({container:e,distanceToEdges:t,dragStartTime:r,axis:s,shouldUseTimeDampening:a,getAutoScrollerOptions:o})=>{const i=l1(e,s,o);return t[s.end]<t[s.start]?dc({distanceToEdge:t[s.end],thresholds:i,dragStartTime:r,shouldUseTimeDampening:a,getAutoScrollerOptions:o}):-1*dc({distanceToEdge:t[s.start],thresholds:i,dragStartTime:r,shouldUseTimeDampening:a,getAutoScrollerOptions:o})},u1=({container:e,subject:t,proposedScroll:r})=>{const s=t.height>e.height,a=t.width>e.width;return!a&&!s?r:a&&s?null:{x:a?0:r.x,y:s?0:r.y}};const m1=om(e=>e===0?0:e);var _m=({dragStartTime:e,container:t,subject:r,center:s,shouldUseTimeDampening:a,getAutoScrollerOptions:o})=>{const i={top:s.y-t.top,right:t.right-s.x,bottom:t.bottom-s.y,left:s.x-t.left},l=uc({container:t,distanceToEdges:i,dragStartTime:e,axis:Si,shouldUseTimeDampening:a,getAutoScrollerOptions:o}),c=uc({container:t,distanceToEdges:i,dragStartTime:e,axis:um,shouldUseTimeDampening:a,getAutoScrollerOptions:o}),d=m1({x:c,y:l});if(Cr(d,lt))return null;const p=u1({container:t,subject:r,proposedScroll:d});return p?Cr(p,lt)?null:p:null};const p1=om(e=>e===0?0:e>0?1:-1),Mi=(()=>{const e=(t,r)=>t<0?t:t>r?t-r:0;return({current:t,max:r,change:s})=>{const a=dt(t,s),o={x:e(a.x,r.x),y:e(a.y,r.y)};return Cr(o,lt)?null:o}})(),Fm=({max:e,current:t,change:r})=>{const s={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},a=p1(r),o=Mi({max:s,current:t,change:a});return!o||a.x!==0&&o.x===0||a.y!==0&&o.y===0},Li=(e,t)=>Fm({current:e.scroll.current,max:e.scroll.max,change:t}),h1=(e,t)=>{if(!Li(e,t))return null;const r=e.scroll.max,s=e.scroll.current;return Mi({current:s,max:r,change:t})},_i=(e,t)=>{const r=e.frame;return r?Fm({current:r.scroll.current,max:r.scroll.max,change:t}):!1},f1=(e,t)=>{const r=e.frame;return!r||!_i(e,t)?null:Mi({current:r.scroll.current,max:r.scroll.max,change:t})};var g1=({viewport:e,subject:t,center:r,dragStartTime:s,shouldUseTimeDampening:a,getAutoScrollerOptions:o})=>{const i=_m({dragStartTime:s,container:e.frame,subject:t,center:r,shouldUseTimeDampening:a,getAutoScrollerOptions:o});return i&&Li(e,i)?i:null},b1=({droppable:e,subject:t,center:r,dragStartTime:s,shouldUseTimeDampening:a,getAutoScrollerOptions:o})=>{const i=e.frame;if(!i)return null;const l=_m({dragStartTime:s,container:i.pageMarginBox,subject:t,center:r,shouldUseTimeDampening:a,getAutoScrollerOptions:o});return l&&_i(e,l)?l:null},mc=({state:e,dragStartTime:t,shouldUseTimeDampening:r,scrollWindow:s,scrollDroppable:a,getAutoScrollerOptions:o})=>{const i=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const u=e.viewport,m=g1({dragStartTime:t,viewport:u,subject:c,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:o});if(m){s(m);return}}const d=i1({center:i,destination:Et(e.impact),droppables:e.dimensions.droppables});if(!d)return;const p=b1({dragStartTime:t,droppable:d,subject:c,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:o});p&&a(d.descriptor.id,p)},x1=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r=()=>ls})=>{const s=ns(e),a=ns(t);let o=null;const i=d=>{o||H();const{shouldUseTimeDampening:p,dragStartTime:u}=o;mc({state:d,scrollWindow:s,scrollDroppable:a,dragStartTime:u,shouldUseTimeDampening:p,getAutoScrollerOptions:r})};return{start:d=>{o&&H();const p=Date.now();let u=!1;const m=()=>{u=!0};mc({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:m,scrollDroppable:m,getAutoScrollerOptions:r}),o={dragStartTime:p,shouldUseTimeDampening:u},u&&i(d)},stop:()=>{o&&(s.cancel(),a.cancel(),o=null)},scroll:i}},v1=({move:e,scrollDroppable:t,scrollWindow:r})=>{const s=(l,c)=>{const d=dt(l.current.client.selection,c);e({client:d})},a=(l,c)=>{if(!_i(l,c))return c;const d=f1(l,c);if(!d)return t(l.descriptor.id,c),null;const p=St(c,d);return t(l.descriptor.id,p),St(c,p)},o=(l,c,d)=>{if(!l||!Li(c,d))return d;const p=h1(c,d);if(!p)return r(d),null;const u=St(d,p);return r(u),St(d,u)};return l=>{const c=l.scrollJumpRequest;if(!c)return;const d=Et(l.impact);d||H();const p=a(l.dimensions.droppables[d],c);if(!p)return;const u=l.viewport,m=o(l.isWindowScrollAllowed,u,p);m&&s(l,m)}},y1=({scrollDroppable:e,scrollWindow:t,move:r,getAutoScrollerOptions:s})=>{const a=x1({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:s}),o=v1({move:r,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(s().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){a.scroll(c);return}c.scrollJumpRequest&&o(c)}},start:a.start,stop:a.stop}};const Cn="data-rfd",Sn=(()=>{const e=`${Cn}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),_o=(()=>{const e=`${Cn}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),w1=(()=>{const e=`${Cn}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),pc={contextId:`${Cn}-scroll-container-context-id`},j1=e=>t=>`[${t}="${e}"]`,Hn=(e,t)=>e.map(r=>{const s=r.styles[t];return s?`${r.selector} { ${s} }`:""}).join(" "),k1="pointer-events: none;";var N1=e=>{const t=j1(e),r=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Sn.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:k1,dropAnimating:l}}})(),s=(()=>{const l=`
      transition: ${es.outOfTheWay};
    `;return{selector:t(_o.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),a={selector:t(w1.contextId),styles:{always:"overflow-anchor: none;"}},i=[s,r,a,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Hn(i,"always"),resting:Hn(i,"resting"),dragging:Hn(i,"dragging"),dropAnimating:Hn(i,"dropAnimating"),userCancel:Hn(i,"userCancel")}};const Rt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?h.useLayoutEffect:h.useEffect,Za=()=>{const e=document.querySelector("head");return e||H(),e},hc=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function C1(e,t){const r=je(()=>N1(e),[e]),s=h.useRef(null),a=h.useRef(null),o=oe(it(u=>{const m=a.current;m||H(),m.textContent=u}),[]),i=oe(u=>{const m=s.current;m||H(),m.textContent=u},[]);Rt(()=>{!s.current&&!a.current||H();const u=hc(t),m=hc(t);return s.current=u,a.current=m,u.setAttribute(`${Cn}-always`,e),m.setAttribute(`${Cn}-dynamic`,e),Za().appendChild(u),Za().appendChild(m),i(r.always),o(r.resting),()=>{const f=b=>{const x=b.current;x||H(),Za().removeChild(x),b.current=null};f(s),f(a)}},[t,i,o,r.always,r.resting,e]);const l=oe(()=>o(r.dragging),[o,r.dragging]),c=oe(u=>{if(u==="DROP"){o(r.dropAnimating);return}o(r.userCancel)},[o,r.dropAnimating,r.userCancel]),d=oe(()=>{a.current&&o(r.resting)},[o,r.resting]);return je(()=>({dragging:l,dropping:c,resting:d}),[l,c,d])}function zm(e,t){return Array.from(e.querySelectorAll(t))}var $m=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function va(e){return e instanceof $m(e).HTMLElement}function S1(e,t){const r=`[${Sn.contextId}="${e}"]`,s=zm(document,r);if(!s.length)return null;const a=s.find(o=>o.getAttribute(Sn.draggableId)===t);return!a||!va(a)?null:a}function E1(e){const t=h.useRef({}),r=h.useRef(null),s=h.useRef(null),a=h.useRef(!1),o=oe(function(m,f){const b={id:m,focus:f};return t.current[m]=b,function(){const g=t.current;g[m]!==b&&delete g[m]}},[]),i=oe(function(m){const f=S1(e,m);f&&f!==document.activeElement&&f.focus()},[e]),l=oe(function(m,f){r.current===m&&(r.current=f)},[]),c=oe(function(){s.current||a.current&&(s.current=requestAnimationFrame(()=>{s.current=null;const m=r.current;m&&i(m)}))},[i]),d=oe(function(m){r.current=null;const f=document.activeElement;f&&f.getAttribute(Sn.draggableId)===m&&(r.current=m)},[]);return Rt(()=>(a.current=!0,function(){a.current=!1;const m=s.current;m&&cancelAnimationFrame(m)}),[]),je(()=>({register:o,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:l}),[o,d,c,l])}function R1(){const e={draggables:{},droppables:{}},t=[];function r(u){return t.push(u),function(){const f=t.indexOf(u);f!==-1&&t.splice(f,1)}}function s(u){t.length&&t.forEach(m=>m(u))}function a(u){return e.draggables[u]||null}function o(u){const m=a(u);return m||H(),m}const i={register:u=>{e.draggables[u.descriptor.id]=u,s({type:"ADDITION",value:u})},update:(u,m)=>{const f=e.draggables[m.descriptor.id];f&&f.uniqueId===u.uniqueId&&(delete e.draggables[m.descriptor.id],e.draggables[u.descriptor.id]=u)},unregister:u=>{const m=u.descriptor.id,f=a(m);f&&u.uniqueId===f.uniqueId&&(delete e.draggables[m],e.droppables[u.descriptor.droppableId]&&s({type:"REMOVAL",value:u}))},getById:o,findById:a,exists:u=>!!a(u),getAllByType:u=>Object.values(e.draggables).filter(m=>m.descriptor.type===u)};function l(u){return e.droppables[u]||null}function c(u){const m=l(u);return m||H(),m}const d={register:u=>{e.droppables[u.descriptor.id]=u},unregister:u=>{const m=l(u.descriptor.id);m&&u.uniqueId===m.uniqueId&&delete e.droppables[u.descriptor.id]},getById:c,findById:l,exists:u=>!!l(u),getAllByType:u=>Object.values(e.droppables).filter(m=>m.descriptor.type===u)};function p(){e.draggables={},e.droppables={},t.length=0}return{draggable:i,droppable:d,subscribe:r,clean:p}}function D1(){const e=je(R1,[]);return h.useEffect(()=>function(){e.clean()},[e]),e}var Fi=ye.createContext(null),Ks=()=>{const e=document.body;return e||H(),e};const P1={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},A1=e=>`rfd-announcement-${e}`;function T1(e){const t=je(()=>A1(e),[e]),r=h.useRef(null);return h.useEffect(function(){const o=document.createElement("div");return r.current=o,o.id=t,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),Vs(o.style,P1),Ks().appendChild(o),function(){setTimeout(function(){const c=Ks();c.contains(o)&&c.removeChild(o),o===r.current&&(r.current=null)})}},[t]),oe(a=>{const o=r.current;if(o){o.textContent=a;return}},[])}const I1={separator:"::"};function zi(e,t=I1){const r=ye.useId();return je(()=>`${e}${t.separator}${r}`,[t.separator,e,r])}function O1({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function M1({contextId:e,text:t}){const r=zi("hidden-text",{separator:"-"}),s=je(()=>O1({contextId:e,uniqueId:r}),[r,e]);return h.useEffect(function(){const o=document.createElement("div");return o.id=s,o.textContent=t,o.style.display="none",Ks().appendChild(o),function(){const l=Ks();l.contains(o)&&l.removeChild(o)}},[s,t]),s}var ya=ye.createContext(null);function Bm(e){const t=h.useRef(e);return h.useEffect(()=>{t.current=e}),t}function L1(){let e=null;function t(){return!!e}function r(i){return i===e}function s(i){e&&H();const l={abandon:i};return e=l,l}function a(){e||H(),e=null}function o(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:r,claim:s,release:a,tryAbandon:o}}function cs(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const _1=9,F1=13,$i=27,Um=32,z1=33,$1=34,B1=35,U1=36,G1=37,V1=38,q1=39,W1=40,H1={[F1]:!0,[_1]:!0};var Gm=e=>{H1[e.keyCode]&&e.preventDefault()};const wa=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(s=>`on${s}`in document)||e})(),Vm=0,fc=5;function K1(e,t){return Math.abs(t.x-e.x)>=fc||Math.abs(t.y-e.y)>=fc}const gc={type:"IDLE"};function Q1({cancel:e,completed:t,getPhase:r,setPhase:s}){return[{eventName:"mousemove",fn:a=>{const{button:o,clientX:i,clientY:l}=a;if(o!==Vm)return;const c={x:i,y:l},d=r();if(d.type==="DRAGGING"){a.preventDefault(),d.actions.move(c);return}d.type!=="PENDING"&&H();const p=d.point;if(!K1(p,c))return;a.preventDefault();const u=d.actions.fluidLift(c);s({type:"DRAGGING",actions:u})}},{eventName:"mouseup",fn:a=>{const o=r();if(o.type!=="DRAGGING"){e();return}a.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:a=>{r().type==="DRAGGING"&&a.preventDefault(),e()}},{eventName:"keydown",fn:a=>{if(r().type==="PENDING"){e();return}if(a.keyCode===$i){a.preventDefault(),e();return}Gm(a)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:a=>{const o=r();if(o.type==="IDLE"&&H(),o.actions.shouldRespectForcePress()){e();return}a.preventDefault()}},{eventName:wa,fn:e}]}function Y1(e){const t=h.useRef(gc),r=h.useRef(Nr),s=je(()=>({eventName:"mousedown",fn:function(u){if(u.defaultPrevented||u.button!==Vm||u.ctrlKey||u.metaKey||u.shiftKey||u.altKey)return;const m=e.findClosestDraggableId(u);if(!m)return;const f=e.tryGetLock(m,i,{sourceEvent:u});if(!f)return;u.preventDefault();const b={x:u.clientX,y:u.clientY};r.current(),d(f,b)}}),[e]),a=je(()=>({eventName:"webkitmouseforcewillbegin",fn:p=>{if(p.defaultPrevented)return;const u=e.findClosestDraggableId(p);if(!u)return;const m=e.findOptionsForDraggable(u);m&&(m.shouldRespectForcePress||e.canGetLock(u)&&p.preventDefault())}}),[e]),o=oe(function(){const u={passive:!1,capture:!0};r.current=Lt(window,[a,s],u)},[a,s]),i=oe(()=>{t.current.type!=="IDLE"&&(t.current=gc,r.current(),o())},[o]),l=oe(()=>{const p=t.current;i(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[i]),c=oe(function(){const u={capture:!0,passive:!1},m=Q1({cancel:l,completed:i,getPhase:()=>t.current,setPhase:f=>{t.current=f}});r.current=Lt(window,m,u)},[l,i]),d=oe(function(u,m){t.current.type!=="IDLE"&&H(),t.current={type:"PENDING",point:m,actions:u},c()},[c]);Rt(function(){return o(),function(){r.current()}},[o])}function X1(){}const J1={[$1]:!0,[z1]:!0,[U1]:!0,[B1]:!0};function Z1(e,t){function r(){t(),e.cancel()}function s(){t(),e.drop()}return[{eventName:"keydown",fn:a=>{if(a.keyCode===$i){a.preventDefault(),r();return}if(a.keyCode===Um){a.preventDefault(),s();return}if(a.keyCode===W1){a.preventDefault(),e.moveDown();return}if(a.keyCode===V1){a.preventDefault(),e.moveUp();return}if(a.keyCode===q1){a.preventDefault(),e.moveRight();return}if(a.keyCode===G1){a.preventDefault(),e.moveLeft();return}if(J1[a.keyCode]){a.preventDefault();return}Gm(a)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:wa,fn:r}]}function ej(e){const t=h.useRef(X1),r=je(()=>({eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==Um)return;const i=e.findClosestDraggableId(o);if(!i)return;const l=e.tryGetLock(i,p,{sourceEvent:o});if(!l)return;o.preventDefault();let c=!0;const d=l.snapLift();t.current();function p(){c||H(),c=!1,t.current(),s()}t.current=Lt(window,Z1(d,p),{capture:!0,passive:!1})}}),[e]),s=oe(function(){const o={passive:!1,capture:!0};t.current=Lt(window,[r],o)},[r]);Rt(function(){return s(),function(){t.current()}},[s])}const eo={type:"IDLE"},tj=120,rj=.15;function nj({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(t().type!=="DRAGGING"){e();return}r.keyCode===$i&&r.preventDefault(),e()}},{eventName:wa,fn:e}]}function sj({cancel:e,completed:t,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:s=>{const a=r();if(a.type!=="DRAGGING"){e();return}a.hasMoved=!0;const{clientX:o,clientY:i}=s.touches[0],l={x:o,y:i};s.preventDefault(),a.actions.move(l)}},{eventName:"touchend",fn:s=>{const a=r();if(a.type!=="DRAGGING"){e();return}s.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:s=>{if(r().type!=="DRAGGING"){e();return}s.preventDefault(),e()}},{eventName:"touchforcechange",fn:s=>{const a=r();a.type==="IDLE"&&H();const o=s.touches[0];if(!o||!(o.force>=rj))return;const l=a.actions.shouldRespectForcePress();if(a.type==="PENDING"){l&&e();return}if(l){if(a.hasMoved){s.preventDefault();return}e();return}s.preventDefault()}},{eventName:wa,fn:e}]}function aj(e){const t=h.useRef(eo),r=h.useRef(Nr),s=oe(function(){return t.current},[]),a=oe(function(f){t.current=f},[]),o=je(()=>({eventName:"touchstart",fn:function(f){if(f.defaultPrevented)return;const b=e.findClosestDraggableId(f);if(!b)return;const x=e.tryGetLock(b,l,{sourceEvent:f});if(!x)return;const g=f.touches[0],{clientX:v,clientY:y}=g,w={x:v,y};r.current(),u(x,w)}}),[e]),i=oe(function(){const f={capture:!0,passive:!1};r.current=Lt(window,[o],f)},[o]),l=oe(()=>{const m=t.current;m.type!=="IDLE"&&(m.type==="PENDING"&&clearTimeout(m.longPressTimerId),a(eo),r.current(),i())},[i,a]),c=oe(()=>{const m=t.current;l(),m.type==="DRAGGING"&&m.actions.cancel({shouldBlockNextClick:!0}),m.type==="PENDING"&&m.actions.abort()},[l]),d=oe(function(){const f={capture:!0,passive:!1},b={cancel:c,completed:l,getPhase:s},x=Lt(window,sj(b),f),g=Lt(window,nj(b),f);r.current=function(){x(),g()}},[c,s,l]),p=oe(function(){const f=s();f.type!=="PENDING"&&H();const b=f.actions.fluidLift(f.point);a({type:"DRAGGING",actions:b,hasMoved:!1})},[s,a]),u=oe(function(f,b){s().type!=="IDLE"&&H();const x=setTimeout(p,tj);a({type:"PENDING",point:b,actions:f,longPressTimerId:x}),d()},[d,s,a,p]);Rt(function(){return i(),function(){r.current();const b=s();b.type==="PENDING"&&(clearTimeout(b.longPressTimerId),a(eo))}},[s,i,a]),Rt(function(){return Lt(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const oj=["input","button","textarea","select","option","optgroup","video","audio"];function qm(e,t){if(t==null)return!1;if(oj.includes(t.tagName.toLowerCase()))return!0;const s=t.getAttribute("contenteditable");return s==="true"||s===""?!0:t===e?!1:qm(e,t.parentElement)}function ij(e,t){const r=t.target;return va(r)?qm(e,r):!1}var lj=e=>Gt(e.getBoundingClientRect()).center;function cj(e){return e instanceof $m(e).Element}const dj=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(s=>s in Element.prototype)||e})();function Wm(e,t){return e==null?null:e[dj](t)?e:Wm(e.parentElement,t)}function uj(e,t){return e.closest?e.closest(t):Wm(e,t)}function mj(e){return`[${Sn.contextId}="${e}"]`}function pj(e,t){const r=t.target;if(!cj(r))return null;const s=mj(e),a=uj(r,s);return!a||!va(a)?null:a}function hj(e,t){const r=pj(e,t);return r?r.getAttribute(Sn.draggableId):null}function fj(e,t){const r=`[${_o.contextId}="${e}"]`,a=zm(document,r).find(o=>o.getAttribute(_o.id)===t);return!a||!va(a)?null:a}function gj(e){e.preventDefault()}function Rs({expected:e,phase:t,isLockActive:r,shouldWarn:s}){return!(!r()||e!==t)}function Hm({lockAPI:e,store:t,registry:r,draggableId:s}){if(e.isClaimed())return!1;const a=r.draggable.findById(s);return!(!a||!a.options.isEnabled||!Mm(t.getState(),s))}function bj({lockAPI:e,contextId:t,store:r,registry:s,draggableId:a,forceSensorStop:o,sourceEvent:i}){if(!Hm({lockAPI:e,store:r,registry:s,draggableId:a}))return null;const c=s.draggable.getById(a),d=fj(t,c.descriptor.id);if(!d||i&&!c.options.canDragInteractiveElements&&ij(d,i))return null;const p=e.claim(o||Nr);let u="PRE_DRAG";function m(){return c.options.shouldRespectForcePress}function f(){return e.isActive(p)}function b(k,S){Rs({expected:k,phase:u,isLockActive:f,shouldWarn:!0})&&r.dispatch(S())}const x=b.bind(null,"DRAGGING");function g(k){function S(){e.release(),u="COMPLETED"}u!=="PRE_DRAG"&&(S(),H()),r.dispatch(uw(k.liftActionArgs)),u="DRAGGING";function A(O,M={shouldBlockNextClick:!1}){if(k.cleanup(),M.shouldBlockNextClick){const B=Lt(window,[{eventName:"click",fn:gj,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(B)}S(),r.dispatch(Em({reason:O}))}return{isActive:()=>Rs({expected:"DRAGGING",phase:u,isLockActive:f,shouldWarn:!1}),shouldRespectForcePress:m,drop:O=>A("DROP",O),cancel:O=>A("CANCEL",O),...k.actions}}function v(k){const S=ns(O=>{x(()=>Sm({client:O}))});return{...g({liftActionArgs:{id:a,clientSelection:k,movementMode:"FLUID"},cleanup:()=>S.cancel(),actions:{move:S}}),move:S}}function y(){const k={moveUp:()=>x(yw),moveRight:()=>x(jw),moveDown:()=>x(ww),moveLeft:()=>x(kw)};return g({liftActionArgs:{id:a,clientSelection:lj(d),movementMode:"SNAP"},cleanup:Nr,actions:k})}function w(){Rs({expected:"PRE_DRAG",phase:u,isLockActive:f,shouldWarn:!0})&&e.release()}return{isActive:()=>Rs({expected:"PRE_DRAG",phase:u,isLockActive:f,shouldWarn:!1}),shouldRespectForcePress:m,fluidLift:v,snapLift:y,abort:w}}const xj=[Y1,ej,aj];function vj({contextId:e,store:t,registry:r,customSensors:s,enableDefaultSensors:a}){const o=[...a?xj:[],...s||[]],i=h.useState(()=>L1())[0],l=oe(function(g,v){cs(g)&&!cs(v)&&i.tryAbandon()},[i]);Rt(function(){let g=t.getState();return t.subscribe(()=>{const y=t.getState();l(g,y),g=y})},[i,t,l]),Rt(()=>i.tryAbandon,[i.tryAbandon]);const c=oe(x=>Hm({lockAPI:i,registry:r,store:t,draggableId:x}),[i,r,t]),d=oe((x,g,v)=>bj({lockAPI:i,registry:r,contextId:e,store:t,draggableId:x,forceSensorStop:g||null,sourceEvent:v&&v.sourceEvent?v.sourceEvent:null}),[e,i,r,t]),p=oe(x=>hj(e,x),[e]),u=oe(x=>{const g=r.draggable.findById(x);return g?g.options:null},[r.draggable]),m=oe(function(){i.isClaimed()&&(i.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(Ai()))},[i,t]),f=oe(()=>i.isClaimed(),[i]),b=je(()=>({canGetLock:c,tryGetLock:d,findClosestDraggableId:p,findOptionsForDraggable:u,tryReleaseLock:m,isLockClaimed:f}),[c,d,p,u,m,f]);for(let x=0;x<o.length;x++)o[x](b)}const yj=e=>({onBeforeCapture:t=>{const r=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};aa.flushSync(r)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),wj=e=>({...ls,...e.autoScrollerOptions,durationDampening:{...ls.durationDampening,...e.autoScrollerOptions}});function Kn(e){return e.current||H(),e.current}function jj(e){const{contextId:t,setCallbacks:r,sensors:s,nonce:a,dragHandleUsageInstructions:o}=e,i=h.useRef(null),l=Bm(e),c=oe(()=>yj(l.current),[l]),d=oe(()=>wj(l.current),[l]),p=T1(t),u=M1({contextId:t,text:o}),m=C1(t,a),f=oe(B=>{Kn(i).dispatch(B)},[]),b=je(()=>Vl({publishWhileDragging:pw,updateDroppableScroll:fw,updateDroppableIsEnabled:gw,updateDroppableIsCombineEnabled:bw,collectionStarting:hw},f),[f]),x=D1(),g=je(()=>n1(x,b),[x,b]),v=je(()=>y1({scrollWindow:s1,scrollDroppable:g.scrollDroppable,getAutoScrollerOptions:d,...Vl({move:Sm},f)}),[g.scrollDroppable,f,d]),y=E1(t),w=je(()=>Zw({announce:p,autoScroller:v,dimensionMarshal:g,focusMarshal:y,getResponders:c,styleMarshal:m}),[p,v,g,y,c,m]);i.current=w;const j=oe(()=>{const B=Kn(i);B.getState().phase!=="IDLE"&&B.dispatch(Ai())},[]),k=oe(()=>{const B=Kn(i).getState();return B.phase==="DROP_ANIMATING"?!0:B.phase==="IDLE"?!1:B.isDragging},[]),S=je(()=>({isDragging:k,tryAbort:j}),[k,j]);r(S);const A=oe(B=>Mm(Kn(i).getState(),B),[]),O=oe(()=>_r(Kn(i).getState()),[]),M=je(()=>({marshal:g,focus:y,contextId:t,canLift:A,isMovementAllowed:O,dragHandleUsageInstructionsId:u,registry:x}),[t,g,u,y,A,O,x]);return vj({contextId:t,store:w,registry:x,customSensors:s||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),h.useEffect(()=>j,[j]),ye.createElement(ya.Provider,{value:M},ye.createElement(Hv,{context:Fi,store:w},e.children))}function kj(){return ye.useId()}function Km(e){const t=kj(),r=e.dragHandleUsageInstructions||Ms.dragHandleUsageInstructions;return ye.createElement(ey,null,s=>ye.createElement(jj,{nonce:e.nonce,contextId:t,setCallbacks:s,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const bc={dragging:5e3,dropAnimating:4500},Nj=(e,t)=>t?es.drop(t.duration):e?es.snap:es.fluid,Cj=(e,t)=>{if(e)return t?is.opacity.drop:is.opacity.combining},Sj=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function Ej(e){const r=e.dimension.client,{offset:s,combineWith:a,dropping:o}=e,i=!!a,l=Sj(e),c=!!o,d=c?Mo.drop(s,i):Mo.moveTo(s);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Nj(l,o),transform:d,opacity:Cj(i,c),zIndex:c?bc.dropAnimating:bc.dragging,pointerEvents:"none"}}function Rj(e){return{transform:Mo.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function Dj(e){return e.type==="DRAGGING"?Ej(e):Rj(e)}function Pj(e,t,r=lt){const s=window.getComputedStyle(t),a=t.getBoundingClientRect(),o=em(a,s),i=Gs(o,r),l={client:o,tagName:t.tagName.toLowerCase(),display:s.display},c={x:o.marginBox.width,y:o.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:c,client:o,page:i}}function Aj(e){const t=zi("draggable"),{descriptor:r,registry:s,getDraggableRef:a,canDragInteractiveElements:o,shouldRespectForcePress:i,isEnabled:l}=e,c=je(()=>({canDragInteractiveElements:o,shouldRespectForcePress:i,isEnabled:l}),[o,l,i]),d=oe(f=>{const b=a();return b||H(),Pj(r,b,f)},[r,a]),p=je(()=>({uniqueId:t,descriptor:r,options:c,getDimension:d}),[r,d,c,t]),u=h.useRef(p),m=h.useRef(!0);Rt(()=>(s.draggable.register(u.current),()=>s.draggable.unregister(u.current)),[s.draggable]),Rt(()=>{if(m.current){m.current=!1;return}const f=u.current;u.current=p,s.draggable.update(p,f)},[p,s.draggable])}var Bi=ye.createContext(null);function Qs(e){const t=h.useContext(e);return t||H(),t}function Tj(e){e.preventDefault()}const Ij=e=>{const t=h.useRef(null),r=oe((S=null)=>{t.current=S},[]),s=oe(()=>t.current,[]),{contextId:a,dragHandleUsageInstructionsId:o,registry:i}=Qs(ya),{type:l,droppableId:c}=Qs(Bi),d=je(()=>({id:e.draggableId,index:e.index,type:l,droppableId:c}),[e.draggableId,e.index,l,c]),{children:p,draggableId:u,isEnabled:m,shouldRespectForcePress:f,canDragInteractiveElements:b,isClone:x,mapped:g,dropAnimationFinished:v}=e;if(!x){const S=je(()=>({descriptor:d,registry:i,getDraggableRef:s,canDragInteractiveElements:b,shouldRespectForcePress:f,isEnabled:m}),[d,i,s,b,f,m]);Aj(S)}const y=je(()=>m?{tabIndex:0,role:"button","aria-describedby":o,"data-rfd-drag-handle-draggable-id":u,"data-rfd-drag-handle-context-id":a,draggable:!1,onDragStart:Tj}:null,[a,o,u,m]),w=oe(S=>{g.type==="DRAGGING"&&g.dropping&&S.propertyName==="transform"&&aa.flushSync(v)},[v,g]),j=je(()=>{const S=Dj(g),A=g.type==="DRAGGING"&&g.dropping?w:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":a,"data-rfd-draggable-id":u,style:S,onTransitionEnd:A},dragHandleProps:y}},[a,y,u,g,w,r]),k=je(()=>({draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}),[d.droppableId,d.id,d.index,d.type]);return ye.createElement(ye.Fragment,null,p(j,g.snapshot,k))};var Qm=(e,t)=>e===t,Ym=e=>{const{combine:t,destination:r}=e;return r?r.droppableId:t?t.droppableId:null};const Oj=e=>e.combine?e.combine.draggableId:null,Mj=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function Lj(){const e=it((a,o)=>({x:a,y:o})),t=it((a,o,i=null,l=null,c=null)=>({isDragging:!0,isClone:o,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:i,combineWith:l,combineTargetFor:null})),r=it((a,o,i,l,c=null,d=null,p=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:d,mode:o,offset:a,dimension:i,forceShouldAnimate:p,snapshot:t(o,l,c,d,null)}}));return(a,o)=>{if(cs(a)){if(a.critical.draggable.id!==o.draggableId)return null;const i=a.current.client.offset,l=a.dimensions.draggables[o.draggableId],c=Et(a.impact),d=Mj(a.impact),p=a.forceShouldAnimate;return r(e(i.x,i.y),a.movementMode,l,o.isClone,c,d,p)}if(a.phase==="DROP_ANIMATING"){const i=a.completed;if(i.result.draggableId!==o.draggableId)return null;const l=o.isClone,c=a.dimensions.draggables[o.draggableId],d=i.result,p=d.mode,u=Ym(d),m=Oj(d),b={duration:a.dropDuration,curve:Ii.drop,moveTo:a.newHomeClientOffset,opacity:m?is.opacity.drop:null,scale:m?is.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:c,dropping:b,draggingOver:u,combineWith:m,mode:p,forceShouldAnimate:null,snapshot:t(p,l,u,m,b)}}}return null}}function Xm(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const _j={mapped:{type:"SECONDARY",offset:lt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Xm(null)}};function Fj(){const e=it((i,l)=>({x:i,y:l})),t=it(Xm),r=it((i,l=null,c)=>({mapped:{type:"SECONDARY",offset:i,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}})),s=i=>i?r(lt,i,!0):null,a=(i,l,c,d)=>{const p=c.displaced.visible[i],u=!!(d.inVirtualList&&d.effected[i]),m=ga(c),f=m&&m.draggableId===i?l:null;if(!p){if(!u)return s(f);if(c.displaced.invisible[i])return null;const g=_n(d.displacedBy.point),v=e(g.x,g.y);return r(v,f,!0)}if(u)return s(f);const b=c.displacedBy.point,x=e(b.x,b.y);return r(x,f,p.shouldAnimate)};return(i,l)=>{if(cs(i))return i.critical.draggable.id===l.draggableId?null:a(l.draggableId,i.critical.draggable.id,i.impact,i.afterCritical);if(i.phase==="DROP_ANIMATING"){const c=i.completed;return c.result.draggableId===l.draggableId?null:a(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const zj=()=>{const e=Lj(),t=Fj();return(s,a)=>e(s,a)||t(s,a)||_j},$j={dropAnimationFinished:Rm},Bj=Zu(zj,$j,null,{context:Fi,areStatePropsEqual:Qm})(Ij);function Jm(e){return Qs(Bi).isUsingCloneFor===e.draggableId&&!e.isClone?null:ye.createElement(Bj,e)}function Fo(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return ye.createElement(Jm,Vs({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:s}))}const Zm=e=>t=>e===t,Uj=Zm("scroll"),Gj=Zm("auto"),xc=(e,t)=>t(e.overflowX)||t(e.overflowY),Vj=e=>{const t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return xc(r,Uj)||xc(r,Gj)},qj=()=>!1,ep=e=>e==null?null:e===document.body?qj()?e:null:e===document.documentElement?null:Vj(e)?e:ep(e.parentElement);var zo=e=>({x:e.scrollLeft,y:e.scrollTop});const tp=e=>e?window.getComputedStyle(e).position==="fixed"?!0:tp(e.parentElement):!1;var Wj=e=>{const t=ep(e),r=tp(e);return{closestScrollable:t,isFixedOnPage:r}},Hj=({descriptor:e,isEnabled:t,isCombineEnabled:r,isFixedOnPage:s,direction:a,client:o,page:i,closest:l})=>{const c=(()=>{if(!l)return null;const{scrollSize:m,client:f}=l,b=Tm({scrollHeight:m.scrollHeight,scrollWidth:m.scrollWidth,height:f.paddingBox.height,width:f.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:f,scrollSize:m,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:b,diff:{value:lt,displacement:lt}}}})(),d=a==="vertical"?Si:um,p=Nn({page:i,withPlaceholder:null,axis:d,frame:c});return{descriptor:e,isCombineEnabled:r,isFixedOnPage:s,axis:d,isEnabled:t,client:o,page:i,frame:c,subject:p}};const Kj=(e,t)=>{const r=tm(e);if(!t||e!==t)return r;const s=r.paddingBox.top-t.scrollTop,a=r.paddingBox.left-t.scrollLeft,o=s+t.scrollHeight,i=a+t.scrollWidth,c=ji({top:s,right:i,bottom:o,left:a},r.border);return ki({borderBox:c,margin:r.margin,border:r.border,padding:r.padding})};var Qj=({ref:e,descriptor:t,env:r,windowScroll:s,direction:a,isDropDisabled:o,isCombineEnabled:i,shouldClipSubject:l})=>{const c=r.closestScrollable,d=Kj(e,c),p=Gs(d,s),u=(()=>{if(!c)return null;const f=tm(c),b={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:f,page:Gs(f,s),scroll:zo(c),scrollSize:b,shouldClipSubject:l}})();return Hj({descriptor:t,isEnabled:!o,isCombineEnabled:i,isFixedOnPage:r.isFixedOnPage,direction:a,client:d,page:p,closest:u})};const Yj={passive:!1},Xj={passive:!0};var vc=e=>e.shouldPublishImmediately?Yj:Xj;const Ds=e=>e&&e.env.closestScrollable||null;function Jj(e){const t=h.useRef(null),r=Qs(ya),s=zi("droppable"),{registry:a,marshal:o}=r,i=Bm(e),l=je(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=h.useRef(l),d=je(()=>it((j,k)=>{t.current||H();const S={x:j,y:k};o.updateDroppableScroll(l.id,S)}),[l.id,o]),p=oe(()=>{const j=t.current;return!j||!j.env.closestScrollable?lt:zo(j.env.closestScrollable)},[]),u=oe(()=>{const j=p();d(j.x,j.y)},[p,d]),m=je(()=>ns(u),[u]),f=oe(()=>{const j=t.current,k=Ds(j);if(j&&k||H(),j.scrollOptions.shouldPublishImmediately){u();return}m()},[m,u]),b=oe((j,k)=>{t.current&&H();const S=i.current,A=S.getDroppableRef();A||H();const O=Wj(A),M={ref:A,descriptor:l,env:O,scrollOptions:k};t.current=M;const B=Qj({ref:A,descriptor:l,env:O,windowScroll:j,direction:S.direction,isDropDisabled:S.isDropDisabled,isCombineEnabled:S.isCombineEnabled,shouldClipSubject:!S.ignoreContainerClipping}),U=O.closestScrollable;return U&&(U.setAttribute(pc.contextId,r.contextId),U.addEventListener("scroll",f,vc(M.scrollOptions))),B},[r.contextId,l,f,i]),x=oe(()=>{const j=t.current,k=Ds(j);return j&&k||H(),zo(k)},[]),g=oe(()=>{const j=t.current;j||H();const k=Ds(j);t.current=null,k&&(m.cancel(),k.removeAttribute(pc.contextId),k.removeEventListener("scroll",f,vc(j.scrollOptions)))},[f,m]),v=oe(j=>{const k=t.current;k||H();const S=Ds(k);S||H(),S.scrollTop+=j.y,S.scrollLeft+=j.x},[]),y=je(()=>({getDimensionAndWatchScroll:b,getScrollWhileDragging:x,dragStopped:g,scroll:v}),[g,b,x,v]),w=je(()=>({uniqueId:s,descriptor:l,callbacks:y}),[y,l,s]);Rt(()=>(c.current=w.descriptor,a.droppable.register(w),()=>{t.current&&g(),a.droppable.unregister(w)}),[y,l,g,w,o,a.droppable]),Rt(()=>{t.current&&o.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,o]),Rt(()=>{t.current&&o.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,o])}function to(){}const yc={width:0,height:0,margin:iy},Zj=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>e||r==="close"?yc:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},ek=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>{const s=Zj({isAnimatingOpenOnMount:e,placeholder:t,animate:r});return{display:t.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?es.placeholder:null}},tk=e=>{const t=h.useRef(null),r=oe(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:s,onTransitionEnd:a,onClose:o,contextId:i}=e,[l,c]=h.useState(e.animate==="open");h.useEffect(()=>l?s!=="open"?(r(),c(!1),to):t.current?to:(t.current=setTimeout(()=>{t.current=null,c(!1)}),r):to,[s,l,r]);const d=oe(u=>{u.propertyName==="height"&&(a(),s==="close"&&o())},[s,o,a]),p=ek({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return ye.createElement(e.placeholder.tagName,{style:p,"data-rfd-placeholder-context-id":i,onTransitionEnd:d,ref:e.innerRef})};var rk=ye.memo(tk);class nk extends ye.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,r){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const sk=e=>{const t=h.useContext(ya);t||H();const{contextId:r,isMovementAllowed:s}=t,a=h.useRef(null),o=h.useRef(null),{children:i,droppableId:l,type:c,mode:d,direction:p,ignoreContainerClipping:u,isDropDisabled:m,isCombineEnabled:f,snapshot:b,useClone:x,updateViewportMaxScroll:g,getContainerForClone:v}=e,y=oe(()=>a.current,[]),w=oe((U=null)=>{a.current=U},[]);oe(()=>o.current,[]);const j=oe((U=null)=>{o.current=U},[]),k=oe(()=>{s()&&g({maxScroll:Om()})},[s,g]);Jj({droppableId:l,type:c,mode:d,direction:p,isDropDisabled:m,isCombineEnabled:f,ignoreContainerClipping:u,getDroppableRef:y});const S=je(()=>ye.createElement(nk,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:U,data:_,animate:G})=>ye.createElement(rk,{placeholder:_,onClose:U,innerRef:j,animate:G,contextId:r,onTransitionEnd:k})),[r,k,e.placeholder,e.shouldAnimatePlaceholder,j]),A=je(()=>({innerRef:w,placeholder:S,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":r}}),[r,l,S,w]),O=x?x.dragging.draggableId:null,M=je(()=>({droppableId:l,type:c,isUsingCloneFor:O}),[l,O,c]);function B(){if(!x)return null;const{dragging:U,render:_}=x,G=ye.createElement(Jm,{draggableId:U.draggableId,index:U.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(L,Q)=>_(L,Q,U));return xg.createPortal(G,v())}return ye.createElement(Bi.Provider,{value:M},i(A,b),B())};function ak(){return document.body||H(),document.body}const wc={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:ak},rp=e=>{let t={...e},r;for(r in wc)e[r]===void 0&&(t={...t,[r]:wc[r]});return t},ro=(e,t)=>e===t.droppable.type,jc=(e,t)=>t.draggables[e.draggable.id],ok=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},r=it(o=>({draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}})),s=it((o,i,l,c,d,p)=>{const u=d.descriptor.id;if(d.descriptor.droppableId===o){const b=p?{render:p,dragging:r(d.descriptor)}:null,x={isDraggingOver:l,draggingOverWith:l?u:null,draggingFromThisWith:u,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:x,useClone:b}}if(!i)return t;if(!c)return e;const f={isDraggingOver:l,draggingOverWith:u,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:f,useClone:null}});return(o,i)=>{const l=rp(i),c=l.droppableId,d=l.type,p=!l.isDropDisabled,u=l.renderClone;if(cs(o)){const m=o.critical;if(!ro(d,m))return t;const f=jc(m,o.dimensions),b=Et(o.impact)===c;return s(c,p,b,b,f,u)}if(o.phase==="DROP_ANIMATING"){const m=o.completed;if(!ro(d,m.critical))return t;const f=jc(m.critical,o.dimensions);return s(c,p,Ym(m.result)===c,Et(m.impact)===c,f,u)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){const m=o.completed;if(!ro(d,m.critical))return t;const f=Et(m.impact)===c,b=!!(m.impact.at&&m.impact.at.type==="COMBINE"),x=m.critical.droppable.id===c;return f?b?e:t:x?e:t}return t}},ik={updateViewportMaxScroll:vw},$o=Zu(ok,ik,(e,t,r)=>({...rp(r),...e,...t}),{context:Fi,areStatePropsEqual:Qm})(sk),np=h.forwardRef(({className:e,...t},r)=>n.jsx("div",{className:"relative w-full overflow-auto",children:n.jsx("table",{ref:r,className:J("w-full caption-bottom text-sm",e),...t})}));np.displayName="Table";const sp=h.forwardRef(({className:e,...t},r)=>n.jsx("thead",{ref:r,className:J("[&_tr]:border-b",e),...t}));sp.displayName="TableHeader";const ap=h.forwardRef(({className:e,...t},r)=>n.jsx("tbody",{ref:r,className:J("[&_tr:last-child]:border-0",e),...t}));ap.displayName="TableBody";const lk=h.forwardRef(({className:e,...t},r)=>n.jsx("tfoot",{ref:r,className:J("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));lk.displayName="TableFooter";const Ls=h.forwardRef(({className:e,...t},r)=>n.jsx("tr",{ref:r,className:J("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Ls.displayName="TableRow";const Bo=h.forwardRef(({className:e,...t},r)=>n.jsx("th",{ref:r,className:J("h-12 px-4 text-center align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Bo.displayName="TableHead";const Yn=h.forwardRef(({className:e,...t},r)=>n.jsx("td",{ref:r,className:J("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Yn.displayName="TableCell";const ck=h.forwardRef(({className:e,...t},r)=>n.jsx("caption",{ref:r,className:J("mt-4 text-sm text-muted-foreground",e),...t}));ck.displayName="TableCaption";const Ui=da("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",xs:"h-7 rounded-md px-2 text-xs",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),I=h.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...a},o)=>{const i=s?Jf:"button";return n.jsx(i,{className:J(Ui({variant:t,size:r,className:e})),ref:o,...a})});I.displayName="Button";function dk({column:e,dragHandleProps:t,onDelete:r,isAuthenticated:s=!1,editMode:a=!1}){const i=["id","no","route","code","location","delivery","tngRoute","info","images","kilometer","tollPrice"].includes(e.dataKey);return n.jsxs("div",{className:"flex items-center justify-center w-[98%] mx-auto relative",children:[n.jsx("div",{...t,className:"text-center",children:n.jsx("span",{className:"block bg-gradient-to-r from-blue-600 to-cyan-600 dark:from-blue-400 dark:to-cyan-400 bg-clip-text text-transparent font-medium",style:{fontSize:"11px"},children:e.name})}),!i&&n.jsx("div",{className:"absolute right-0 flex items-center gap-1 opacity-50 group-hover:opacity-100 transition-opacity",children:n.jsx(I,{size:"sm",variant:"ghost",className:`h-auto p-0 text-sm ${s?"text-muted-foreground hover:text-destructive":"opacity-50 cursor-not-allowed text-muted-foreground"}`,onClick:()=>s&&r(),disabled:!s,title:s?"Delete column":"Authentication required to delete columns","data-testid":`button-delete-column-${e.dataKey}`,children:n.jsx(vt,{className:"w-3 h-3"})})})]})}const ke=h.forwardRef(({className:e,type:t,...r},s)=>n.jsx("input",{type:t,className:J("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...r}));ke.displayName="Input";const En=sg,Rn=ag,Qr=h.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(Zc,{ref:s,className:J("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,n.jsx(Zf,{asChild:!0,children:n.jsx(ua,{className:"h-4 w-4 opacity-50"})})]}));Qr.displayName=Zc.displayName;const op=h.forwardRef(({className:e,...t},r)=>n.jsx(ed,{ref:r,className:J("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(xu,{className:"h-4 w-4"})}));op.displayName=ed.displayName;const ip=h.forwardRef(({className:e,...t},r)=>n.jsx(td,{ref:r,className:J("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(ua,{className:"h-4 w-4"})}));ip.displayName=td.displayName;const Yr=h.forwardRef(({className:e,children:t,position:r="popper",...s},a)=>n.jsx(eg,{children:n.jsxs(rd,{ref:a,className:J("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[n.jsx(op,{}),n.jsx(tg,{className:J("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(ip,{})]})}));Yr.displayName=rd.displayName;const uk=h.forwardRef(({className:e,...t},r)=>n.jsx(nd,{ref:r,className:J("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));uk.displayName=nd.displayName;const xt=h.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(sd,{ref:s,className:J("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(rg,{children:n.jsx(Er,{className:"h-4 w-4"})})}),n.jsx(ng,{children:t})]}));xt.displayName=sd.displayName;const mk=h.forwardRef(({className:e,...t},r)=>n.jsx(ad,{ref:r,className:J("-mx-1 my-1 h-px bg-muted",e),...t}));mk.displayName=ad.displayName;function no({value:e,type:t,onSave:r,options:s,dataKey:a}){const[o,i]=h.useState(!1),[l,c]=h.useState(e),d=h.useRef(null);h.useEffect(()=>{c(e)},[e]),h.useEffect(()=>{o&&d.current&&(d.current.focus(),d.current.select())},[o]);const p=()=>{let b=l;t==="number"?b=parseInt(l)||0:t==="currency"&&(b=parseFloat(l.toString().replace(/[^0-9.]/g,""))||0,b=b.toFixed(2)),r(b),i(!1)},u=()=>{c(e),i(!1)},m=b=>{b.key==="Enter"?p():b.key==="Escape"&&u()},f=()=>{if(a==="latitude")return"e.g. 3.139003 (decimal degrees)";if(a==="longitude")return"e.g. 101.686855 (decimal degrees)";if(t==="currency")return"0.00";if(t==="number")return"Enter number"};return o?t==="select"&&s?n.jsxs(En,{value:l,onValueChange:b=>{c(b),r(b),i(!1)},children:[n.jsx(Qr,{className:"w-full h-6 px-2 py-1 text-sm bg-transparent border-transparent",children:n.jsx(Rn,{})}),n.jsx(Yr,{children:s.map(b=>n.jsx(xt,{value:b,children:b},b))})]}):n.jsx(ke,{ref:d,type:t==="number"||t==="currency"?"number":"text",step:t==="currency"?"0.01":void 0,value:t==="currency"?l.toString().replace(/[^0-9.]/g,""):l,onChange:b=>c(b.target.value),onBlur:p,onKeyDown:m,placeholder:f(),className:"w-full h-6 px-2 py-1 text-sm cell-editing glass-input border-none","data-testid":"input-editable-cell"}):n.jsx("span",{onClick:()=>i(!0),className:"cursor-pointer hover:bg-muted/50 rounded px-1 py-0.5 transition-colors","data-testid":"text-editable-cell",children:e})}const pk="modulepreload",hk=function(e){return"/"+e},kc={},kt=function(t,r,s){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=hk(c),c in kc)return;kc[c]=!0;const d=c.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":pk,d||(u.as="script"),u.crossOrigin="",u.href=c,l&&u.setAttribute("nonce",l),document.head.appendChild(u),d)return new Promise((m,f)=>{u.addEventListener("load",m),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return a.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})};function fk({images:e,rowId:t,onAddImage:r,editMode:s,onAccessDenied:a}){const[o,i]=h.useState(null);return h.useEffect(()=>{let l=null;const d=setTimeout(async()=>{if(typeof window<"u"&&e.length>0)try{await new Promise(y=>setTimeout(y,150));const p=document.getElementById(`lightgallery-preview-${t}`);if(!p){console.warn("Gallery element not found:",`lightgallery-preview-${t}`);return}if(p.querySelectorAll("a[data-src]").length===0){console.warn("No image links found for lightGallery");return}const{default:m}=await kt(async()=>{const{default:y}=await import("./gallery-vendor-Bg4Nf3lp.js");return{default:y}},[]),f=await kt(()=>import("./lg-thumbnail.es5-B_2a59Ql.js"),[]),b=await kt(()=>import("./lg-zoom.es5-CFpITAXr.js"),[]),x=await kt(()=>import("./lg-autoplay.es5-DUE-vek5.js"),[]),g=await kt(()=>import("./lg-fullscreen.es5-BR_uMRHr.js"),[]),v=await kt(()=>import("./lg-video.es5-C1lgJo_I.js"),[]);await kt(()=>Promise.resolve({}),__vite__mapDeps([0])),await kt(()=>Promise.resolve({}),__vite__mapDeps([1])),await kt(()=>Promise.resolve({}),__vite__mapDeps([2])),await kt(()=>Promise.resolve({}),__vite__mapDeps([3])),await kt(()=>Promise.resolve({}),__vite__mapDeps([4])),await kt(()=>Promise.resolve({}),__vite__mapDeps([5])),l=m(p,{licenseKey:"GPLv3",plugins:[f.default,b.default,x.default,g.default,v.default],speed:800,mode:"lg-slide",download:!1,selector:"a[data-src]",animateThumb:!0,startClass:"lg-start-zoom",backdropDuration:300,hideBarsDelay:2e3,mousewheel:!0,enableSwipe:!0,enableDrag:!0,autoplayFirstVideo:!1,youTubePlayerParams:{modestbranding:1,showinfo:0,rel:0,controls:1},vimeoPlayerParams:{byline:0,portrait:0,color:"A90707"}}),i(l)}catch(p){console.error("Failed to load LightGallery:",p);const u=f=>{f.preventDefault();const x=f.target.closest("a[data-src]");x&&window.open(x.dataset.src,"_blank")},m=document.getElementById(`lightgallery-preview-${t}`);m&&m.addEventListener("click",u)}},100);return()=>{if(clearTimeout(d),l)try{l.destroy()}catch(p){console.warn("Error destroying lightGallery:",p)}}},[e,t]),e.length===0?n.jsx("div",{className:"flex items-center justify-center gap-2","data-testid":`image-preview-${t}`,children:n.jsx(vb,{className:"w-4 h-4 text-muted-foreground"})}):n.jsxs("div",{className:"flex items-center justify-center gap-2","data-testid":`image-preview-${t}`,children:[n.jsxs("div",{id:`lightgallery-preview-${t}`,className:"flex items-center gap-1",children:[n.jsx("div",{className:"flex flex-col items-center gap-1",children:n.jsxs("a",{href:e[0].url,"data-src":e[0].url,"data-sub-html":e[0].caption,"data-video":e[0].type==="video"?JSON.stringify({source:[{src:e[0].url,type:"video/mp4"}],attributes:{preload:!1,controls:!0}}):void 0,"data-poster":e[0].type==="video"?e[0].thumbnail:void 0,className:"relative inline-block rounded overflow-hidden hover:scale-105 transition-transform cursor-pointer","data-testid":`media-preview-${t}-0`,title:e[0].caption||(e[0].type==="video"?"Video":"Image"),onClick:l=>{o||(l.preventDefault(),window.open(e[0].url,"_blank"))},children:[e[0].type==="video"?n.jsxs("div",{className:"w-10 h-8 bg-gray-800 border border-border rounded flex items-center justify-center",children:[n.jsx(Ro,{className:"w-4 h-4 text-white"}),e[0].thumbnail&&n.jsx("img",{src:e[0].thumbnail,alt:e[0].caption||"Video thumbnail",className:"absolute inset-0 w-full h-full object-cover rounded"})]}):n.jsx("img",{src:e[0].url,alt:e[0].caption||"Image preview",className:"w-10 h-8 object-cover border border-border",onError:l=>{const c=l.target;c.style.display="none",console.warn("Failed to load image:",e[0].url)}}),e.length>1&&n.jsx("div",{className:"absolute -top-1 -right-1 bg-primary text-primary-foreground text-sm rounded-full w-5 h-5 flex items-center justify-center",children:e.length})]})}),e.slice(1).map((l,c)=>n.jsx("a",{href:l.url,"data-src":l.url,"data-sub-html":l.caption,"data-video":l.type==="video"?JSON.stringify({source:[{src:l.url,type:"video/mp4"}],attributes:{preload:!1,controls:!0}}):void 0,"data-poster":l.type==="video"?l.thumbnail:void 0,style:{display:"none"},"data-testid":`image-hidden-${t}-${c+1}`,children:n.jsx("img",{src:l.url,alt:l.caption||`Hidden media ${c+2}`})},c+1))]}),s&&n.jsx(I,{size:"sm",variant:"ghost",className:"text-xs text-primary hover:text-primary/80",onClick:()=>r(),"data-testid":`button-edit-images-${t}`,title:"Edit images",children:n.jsx(ma,{className:"w-4 h-4"})})]})}const Fe=od,Gi=id,gk=ld,bk=ei,lp=h.forwardRef(({className:e,...t},r)=>n.jsx(Yo,{ref:r,className:J("fixed inset-0 z-50 bg-black/40 dark:bg-black/85 backdrop-blur-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 transition-all duration-300 ease-out",e),...t}));lp.displayName=Yo.displayName;const Te=h.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(gk,{children:[n.jsx(lp,{}),n.jsx(Xo,{ref:s,className:J("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border-2 border-border bg-card backdrop-blur-lg p-6 shadow-2xl duration-300 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-xl transition-all ease-out",e),...r,children:t})]}));Te.displayName=Xo.displayName;const Ie=({className:e,...t})=>n.jsx("div",{className:J("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Ie.displayName="DialogHeader";const He=({className:e,...t})=>n.jsx("div",{className:J("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});He.displayName="DialogFooter";const Oe=h.forwardRef(({className:e,...t},r)=>n.jsx(Jo,{ref:r,className:J("text-lg font-semibold leading-none tracking-tight",e),...t}));Oe.displayName=Jo.displayName;const qe=h.forwardRef(({className:e,...t},r)=>n.jsx(Zo,{ref:r,className:J("text-sm text-muted-foreground",e),...t}));qe.displayName=Zo.displayName;const xk=da("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),cp=h.forwardRef(({className:e,variant:t,...r},s)=>n.jsx("div",{ref:s,role:"alert",className:J(xk({variant:t}),e),...r}));cp.displayName="Alert";const vk=h.forwardRef(({className:e,...t},r)=>n.jsx("h5",{ref:r,className:J("mb-1 font-medium leading-none tracking-tight",e),...t}));vk.displayName="AlertTitle";const dp=h.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:J("text-sm [&_p]:leading-relaxed",e),...t}));dp.displayName="AlertDescription";var yk="Label",up=h.forwardRef((e,t)=>n.jsx($e.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));up.displayName=yk;var mp=up;const wk=da("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ue=h.forwardRef(({className:e,...t},r)=>n.jsx(mp,{ref:r,className:J(wk(),e),...t}));ue.displayName=mp.displayName;var pp={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Nc=ye.createContext&&ye.createContext(pp),jk=["attr","size","title"];function kk(e,t){if(e==null)return{};var r=Nk(e,t),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Nk(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function Ys(){return Ys=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ys.apply(this,arguments)}function Cc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Xs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cc(Object(r),!0).forEach(function(s){Ck(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cc(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Ck(e,t,r){return t=Sk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sk(e){var t=Ek(e,"string");return typeof t=="symbol"?t:t+""}function Ek(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hp(e){return e&&e.map((t,r)=>ye.createElement(t.tag,Xs({key:r},t.attr),hp(t.child)))}function fp(e){return t=>ye.createElement(Rk,Ys({attr:Xs({},e.attr)},t),hp(e.child))}function Rk(e){var t=r=>{var{attr:s,size:a,title:o}=e,i=kk(e,jk),l=a||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),ye.createElement("svg",Ys({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,s,i,{className:c,style:Xs(Xs({color:e.color||r.color},r.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&ye.createElement("title",null,o),e.children)};return Nc!==void 0?ye.createElement(Nc.Consumer,null,r=>t(r)):t(pp)}function so(e){return fp({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19.527 4.799c1.212 2.608.937 5.678-.405 8.173-1.101 2.047-2.744 3.74-4.098 5.614-.619.858-1.244 1.75-1.669 2.727-.141.325-.263.658-.383.992-.121.333-.224.673-.34 1.008-.109.314-.236.684-.627.687h-.007c-.466-.001-.579-.53-.695-.887-.284-.874-.581-1.713-1.019-2.525-.51-.944-1.145-1.817-1.79-2.671L19.527 4.799zM8.545 7.705l-3.959 4.707c.724 1.54 1.821 2.863 2.871 4.18.247.31.494.622.737.936l4.984-5.925-.029.01c-1.741.601-3.691-.291-4.392-1.987a3.377 3.377 0 0 1-.209-.716c-.063-.437-.077-.761-.004-1.198l.001-.007zM5.492 3.149l-.003.004c-1.947 2.466-2.281 5.88-1.117 8.77l4.785-5.689-.058-.05-3.607-3.035zM14.661.436l-3.838 4.563a.295.295 0 0 1 .027-.01c1.6-.551 3.403.15 4.22 1.626.176.319.323.683.377 1.045.068.446.085.773.012 1.22l-.003.016 3.836-4.561A8.382 8.382 0 0 0 14.67.439l-.009-.003zM9.466 5.868L14.162.285l-.047-.012A8.31 8.31 0 0 0 11.986 0a8.439 8.439 0 0 0-6.169 2.766l-.016.018 3.665 3.084z"},child:[]}]})(e)}function ao(e){return fp({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M13.218 0C9.915 0 6.835 1.49 4.723 4.148c-1.515 1.913-2.31 4.272-2.31 6.706v1.739c0 .894-.62 1.738-1.862 1.813-.298.025-.547.224-.547.522-.05.82.82 2.31 2.012 3.502.82.844 1.788 1.515 2.832 2.036a3 3 0 0 0 2.955 3.528 2.966 2.966 0 0 0 2.931-2.385h2.509c.323 1.689 2.086 2.856 3.974 2.21 1.64-.546 2.36-2.409 1.763-3.924a12.84 12.84 0 0 0 1.838-1.465 10.73 10.73 0 0 0 3.18-7.65c0-2.882-1.118-5.589-3.155-7.625A10.899 10.899 0 0 0 13.218 0zm0 1.217c2.558 0 4.967.994 6.78 2.807a9.525 9.525 0 0 1 2.807 6.78A9.526 9.526 0 0 1 20 17.585a9.647 9.647 0 0 1-6.78 2.807h-2.46a3.008 3.008 0 0 0-2.93-2.41 3.03 3.03 0 0 0-2.534 1.367v.024a8.945 8.945 0 0 1-2.41-1.788c-.844-.844-1.316-1.614-1.515-2.11a2.858 2.858 0 0 0 1.441-.846 2.959 2.959 0 0 0 .795-2.036v-1.789c0-2.11.696-4.197 2.012-5.861 1.863-2.385 4.62-3.726 7.6-3.726zm-2.41 5.986a1.192 1.192 0 0 0-1.191 1.192 1.192 1.192 0 0 0 1.192 1.193A1.192 1.192 0 0 0 12 8.395a1.192 1.192 0 0 0-1.192-1.192zm7.204 0a1.192 1.192 0 0 0-1.192 1.192 1.192 1.192 0 0 0 1.192 1.193 1.192 1.192 0 0 0 1.192-1.193 1.192 1.192 0 0 0-1.192-1.192zm-7.377 4.769a.596.596 0 0 0-.546.845 4.813 4.813 0 0 0 4.346 2.757 4.77 4.77 0 0 0 4.347-2.757.596.596 0 0 0-.547-.845h-.025a.561.561 0 0 0-.521.348 3.59 3.59 0 0 1-3.254 2.061 3.591 3.591 0 0 1-3.254-2.061.64.64 0 0 0-.546-.348z"},child:[]}]})(e)}var Vi="Checkbox",[Dk,cC]=Jt(Vi),[Pk,Ak]=Dk(Vi),gp=h.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:s,checked:a,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:d,form:p,...u}=e,[m,f]=h.useState(null),b=ct(t,j=>f(j)),x=h.useRef(!1),g=m?p||!!m.closest("form"):!0,[v=!1,y]=Tn({prop:a,defaultProp:o,onChange:d}),w=h.useRef(v);return h.useEffect(()=>{const j=m==null?void 0:m.form;if(j){const k=()=>y(w.current);return j.addEventListener("reset",k),()=>j.removeEventListener("reset",k)}},[m,y]),n.jsxs(Pk,{scope:r,state:v,disabled:l,children:[n.jsx($e.button,{type:"button",role:"checkbox","aria-checked":Sr(v)?"mixed":v,"aria-required":i,"data-state":vp(v),"data-disabled":l?"":void 0,disabled:l,value:c,...u,ref:b,onKeyDown:xe(e.onKeyDown,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:xe(e.onClick,j=>{y(k=>Sr(k)?!0:!k),g&&(x.current=j.isPropagationStopped(),x.current||j.stopPropagation())})}),g&&n.jsx(Tk,{control:m,bubbles:!x.current,name:s,value:c,checked:v,required:i,disabled:l,form:p,style:{transform:"translateX(-100%)"},defaultChecked:Sr(o)?!1:o})]})});gp.displayName=Vi;var bp="CheckboxIndicator",xp=h.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:s,...a}=e,o=Ak(bp,r);return n.jsx(Wt,{present:s||Sr(o.state)||o.state===!0,children:n.jsx($e.span,{"data-state":vp(o.state),"data-disabled":o.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});xp.displayName=bp;var Tk=e=>{const{control:t,checked:r,bubbles:s=!0,defaultChecked:a,...o}=e,i=h.useRef(null),l=ti(r),c=ri(t);h.useEffect(()=>{const p=i.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(l!==r&&f){const b=new Event("click",{bubbles:s});p.indeterminate=Sr(r),f.call(p,Sr(r)?!1:r),p.dispatchEvent(b)}},[l,r,s]);const d=h.useRef(Sr(r)?!1:r);return n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??d.current,...o,tabIndex:-1,ref:i,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Sr(e){return e==="indeterminate"}function vp(e){return Sr(e)?"indeterminate":e?"checked":"unchecked"}var yp=gp,Ik=xp;const qr=h.forwardRef(({className:e,...t},r)=>n.jsx(yp,{ref:r,className:J("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:n.jsx(Ik,{className:J("flex items-center justify-center text-current"),children:n.jsx(Er,{className:"h-4 w-4"})})}));qr.displayName=yp.displayName;var qi="Popover",[wp,dC]=Jt(qi,[na]),ys=na(),[Ok,Pr]=wp(qi),jp=e=>{const{__scopePopover:t,children:r,open:s,defaultOpen:a,onOpenChange:o,modal:i=!1}=e,l=ys(t),c=h.useRef(null),[d,p]=h.useState(!1),[u=!1,m]=Tn({prop:s,defaultProp:a,onChange:o});return n.jsx(dg,{...l,children:n.jsx(Ok,{scope:t,contentId:cd(),triggerRef:c,open:u,onOpenChange:m,onOpenToggle:h.useCallback(()=>m(f=>!f),[m]),hasCustomAnchor:d,onCustomAnchorAdd:h.useCallback(()=>p(!0),[]),onCustomAnchorRemove:h.useCallback(()=>p(!1),[]),modal:i,children:r})})};jp.displayName=qi;var kp="PopoverAnchor",Mk=h.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=Pr(kp,r),o=ys(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=a;return h.useEffect(()=>(i(),()=>l()),[i,l]),n.jsx(Qo,{...o,...s,ref:t})});Mk.displayName=kp;var Np="PopoverTrigger",Cp=h.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=Pr(Np,r),o=ys(r),i=ct(t,a.triggerRef),l=n.jsx($e.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Pp(a.open),...s,ref:i,onClick:xe(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:n.jsx(Qo,{asChild:!0,...o,children:l})});Cp.displayName=Np;var Wi="PopoverPortal",[Lk,_k]=wp(Wi,{forceMount:void 0}),Sp=e=>{const{__scopePopover:t,forceMount:r,children:s,container:a}=e,o=Pr(Wi,t);return n.jsx(Lk,{scope:t,forceMount:r,children:n.jsx(Wt,{present:r||o.open,children:n.jsx(Hc,{asChild:!0,container:a,children:s})})})};Sp.displayName=Wi;var Dn="PopoverContent",Ep=h.forwardRef((e,t)=>{const r=_k(Dn,e.__scopePopover),{forceMount:s=r.forceMount,...a}=e,o=Pr(Dn,e.__scopePopover);return n.jsx(Wt,{present:s||o.open,children:o.modal?n.jsx(zk,{...a,ref:t}):n.jsx($k,{...a,ref:t})})});Ep.displayName=Dn;var Fk=ug("PopoverContent.RemoveScroll"),zk=h.forwardRef((e,t)=>{const r=Pr(Dn,e.__scopePopover),s=h.useRef(null),a=ct(t,s),o=h.useRef(!1);return h.useEffect(()=>{const i=s.current;if(i)return og(i)},[]),n.jsx(ig,{as:Fk,allowPinchZoom:!0,children:n.jsx(Rp,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xe(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),o.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:xe(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;o.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:xe(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),$k=h.forwardRef((e,t)=>{const r=Pr(Dn,e.__scopePopover),s=h.useRef(!1),a=h.useRef(!1);return n.jsx(Rp,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(s.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=o.target;((d=r.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),Rp=h.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:p,...u}=e,m=Pr(Dn,r),f=ys(r);return lg(),n.jsx(cg,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:n.jsx(Qc,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:p,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:n.jsx(Yc,{"data-state":Pp(m.open),role:"dialog",id:m.contentId,...f,...u,ref:t,style:{...u.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Dp="PopoverClose",Bk=h.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=Pr(Dp,r);return n.jsx($e.button,{type:"button",...s,ref:t,onClick:xe(e.onClick,()=>a.onOpenChange(!1))})});Bk.displayName=Dp;var Uk="PopoverArrow",Gk=h.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=ys(r);return n.jsx(Xc,{...a,...s,ref:t})});Gk.displayName=Uk;function Pp(e){return e?"open":"closed"}var Vk=jp,qk=Cp,Wk=Sp,Ap=Ep;const Uo=Vk,Go=qk,Js=h.forwardRef(({className:e,align:t="center",sideOffset:r=4,...s},a)=>n.jsx(Wk,{children:n.jsx(Ap,{ref:a,align:t,sideOffset:r,className:J("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...s})}));Js.displayName=Ap.displayName;delete oa.Icon.Default.prototype._getIconUrl;oa.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const Sc=e=>{if(!e)return"black";const t=e.toLowerCase().trim();return t.includes("kl 7")||t.includes("kl7")?"blue":t.includes("kl 6")||t.includes("kl6")?"green":t.includes("kl 4")||t.includes("kl4")?"red":t.includes("kl 3")||t.includes("kl3")?"orange":t.includes("kl 1")||t.includes("kl1")?"violet":t.includes("kl 5")||t.includes("kl5")?"yellow":t.includes("kl 9")||t.includes("kl9")?"grey":t.includes("sl 1")||t.includes("sl1")?"gold":t.includes("sl 2")||t.includes("sl2")?"blue":t.includes("sl 3")||t.includes("sl3")||t.includes("set 1")||t.includes("set1")?"grey":t.includes("set 2")||t.includes("set2")?"red":t.includes("set 3")||t.includes("set3")?"orange":(t.includes("warehouse"),"black")},an=new Map,Hk=(e,t=!1)=>{const r=`custom-${e}-${t}`;if(!an.has(r)){const s=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 36" width="24" height="36">
        <path fill="${e}" stroke="#000" stroke-width="1" d="M12 0C7.6 0 4 3.6 4 8c0 5.4 8 16 8 16s8-10.6 8-16c0-4.4-3.6-8-8-8zm0 12c-2.2 0-4-1.8-4-4s1.8-4 4-4 4 1.8 4 4-1.8 4-4 4z"/>
      </svg>
    `,a="data:image/svg+xml;base64,"+btoa(s);an.set(r,new oa.Icon({iconUrl:a,shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[12,18],iconAnchor:[6,18],popupAnchor:[0,-16],shadowSize:[15,15],className:t?"current-location-marker":""}))}return an.get(r)},Kk=(e,t=!1)=>{const r=`${e}-${t}`;return an.has(r)||an.set(r,new oa.Icon({iconUrl:`https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-${e}.png`,shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[12,20],iconAnchor:[6,20],popupAnchor:[0,-18],shadowSize:[15,15],className:t?"current-location-marker":""})),an.get(r)};function Qk({center:e,zoom:t}){const r=jd();return h.useEffect(()=>{if(!(!r||!r.getContainer()))try{r.setView(e,t,{animate:!0,duration:.5});const s=setTimeout(()=>{var a;try{(a=r==null?void 0:r.getContainer())!=null&&a.parentNode&&r.invalidateSize({animate:!1})}catch(o){console.debug("Map invalidateSize skipped:",(o==null?void 0:o.message)||"Unknown error")}},100);return()=>clearTimeout(s)}catch(s){console.warn("Map error:",s)}},[r,e,t]),null}function Yk({currentLocation:e}){const t=jd(),r=h.useCallback(()=>{e&&t&&t.setView([e.latitude,e.longitude],15,{animate:!0,duration:.8})},[e,t]);return e?n.jsx("div",{className:"absolute top-4 right-4 z-[1000]",children:n.jsx(I,{variant:"outline",size:"sm",onClick:r,className:"bg-white/95 hover:bg-white shadow-lg border-2 border-blue-500 hover:border-blue-600 backdrop-blur-sm","data-testid":"button-back-to-current",title:"Back to current location",children:n.jsx(Db,{className:"w-4 h-4 text-blue-500"})})}):null}const Xk=h.memo(function({locations:t,height:r="500px",showFullscreenButton:s=!0}){const[a,o]=h.useState(!1),[i,l]=h.useState([]),c=h.useMemo(()=>t.map(b=>b.code).filter(b=>!!b).filter((b,x,g)=>g.indexOf(b)===x).sort(),[t]);h.useEffect(()=>{c.length>0&&i.length===0&&l(c)},[c]);const d=f=>{l(b=>b.includes(f)?b.filter(x=>x!==f):[...b,f])},p=()=>{l(c)},u=()=>{l([])},m=({isFullscreen:f=!1})=>{const b=h.useMemo(()=>f?t.filter(y=>!y.code||i.includes(y.code)):t.filter(y=>y.isCurrent).length?t.filter(y=>y.isCurrent):[t[0]],[f,i]),x=h.useMemo(()=>t.find(y=>y.isCurrent),[t]),g=h.useMemo(()=>{if(b.length===0)return[3.139003,101.686855];const y=b.reduce((j,k)=>j+k.latitude,0)/b.length,w=b.reduce((j,k)=>j+k.longitude,0)/b.length;return[y,w]},[b]),v=h.useMemo(()=>{if(b.length<=1)return 15;const y=b.map(A=>A.latitude),w=b.map(A=>A.longitude),j=Math.max(...y)-Math.min(...y),k=Math.max(...w)-Math.min(...w),S=Math.max(j,k);return S>5?8:S>2?10:S>1?12:S>.5?13:S>.1?14:15},[b]);return n.jsxs(vg,{center:g,zoom:v,style:{height:f?"100%":r,width:"100%"},className:"rounded-lg border border-border",preferCanvas:!0,zoomControl:f,children:[n.jsx(yg,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",updateWhenIdle:!0,updateWhenZooming:!1,keepBuffer:2}),n.jsx(Qk,{center:g,zoom:v}),f&&n.jsx(Yk,{currentLocation:x}),b.map((y,w)=>{const j=y.markerColor||Sc(y.code),k=y.markerColor&&y.markerColor.startsWith("#")?Hk(y.markerColor,y.isCurrent):Kk(j,y.isCurrent);return n.jsx(wg,{position:[y.latitude,y.longitude],icon:k,children:n.jsx(jg,{children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"font-semibold",children:y.label}),y.code&&n.jsxs("div",{className:"text-sm font-medium",style:{color:j==="black"?"#000":j},children:["Route: ",y.code]}),n.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[y.latitude.toFixed(6),", ",y.longitude.toFixed(6)]})]})})},`${y.latitude}-${y.longitude}-${w}`)})]})};return t.length===0?n.jsx("div",{style:{height:r},className:"flex items-center justify-center bg-muted rounded-lg border border-border",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:"No location data available"})}):n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"pointer-events-auto",children:n.jsx(m,{})}),s&&n.jsx("div",{className:"absolute top-2 right-2 z-[1001] pointer-events-auto",children:n.jsxs(Fe,{open:a,onOpenChange:o,children:[n.jsx(Gi,{asChild:!0,children:n.jsx(I,{variant:"outline",size:"sm",className:"bg-white/95 hover:bg-white shadow-lg border-2 border-gray-400 backdrop-blur-sm pointer-events-auto","data-testid":"button-fullscreen-map",children:n.jsx(Eb,{className:"w-4 h-4 text-black"})})}),n.jsxs(Te,{className:"max-w-[95vw] w-full p-6",style:{height:"min(90vh, calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 40px))",touchAction:"pan-y"},children:[n.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0",style:{paddingTop:"max(0rem, env(safe-area-inset-top))"},children:[n.jsxs(Oe,{className:"tracking-tight font-semibold text-[12px]",children:["Map View - ",t.length===1?t[0].label:`${t.length} Locations`]}),n.jsx(qe,{className:"sr-only",children:"Interactive map showing delivery locations with route filters"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Uo,{children:[n.jsx(Go,{asChild:!0,children:n.jsxs(I,{variant:"outline",size:"sm","data-testid":"button-filter-routes",children:[n.jsx(Is,{className:"w-4 h-4 mr-2"}),"Filter Routes (",i.length,"/",c.length,")"]})}),n.jsx(Js,{className:"w-80",align:"end",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"font-semibold text-sm",children:"Select Routes"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(I,{variant:"ghost",size:"sm",onClick:p,className:"h-7 text-xs",children:"All"}),n.jsx(I,{variant:"ghost",size:"sm",onClick:u,className:"h-7 text-xs",children:"Clear"})]})]}),n.jsx("div",{className:"max-h-[300px] overflow-y-auto space-y-2",children:c.map(f=>{const b=Sc(f);return n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(qr,{id:`route-${f}`,checked:i.includes(f),onCheckedChange:()=>d(f)}),n.jsxs(ue,{htmlFor:`route-${f}`,className:"flex items-center gap-2 cursor-pointer flex-1",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:b==="black"?"#000":b}}),n.jsx("span",{className:"text-sm",children:f})]})]},f)})})]})})]}),n.jsx(bk,{asChild:!0,children:n.jsx(I,{variant:"outline",size:"sm",className:"pagination-button text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300","data-testid":"button-close-map",children:n.jsx(vt,{className:"w-4 h-4"})})})]})]}),n.jsx("div",{className:"mt-4",style:{height:"min(calc(90vh - 100px), calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 140px))",WebkitOverflowScrolling:"touch",overscrollBehavior:"contain"},children:n.jsx(m,{isFullscreen:!0})})]})]})})]})},(e,t)=>{if(e.locations.length!==t.locations.length||e.height!==t.height||e.showFullscreenButton!==t.showFullscreenButton)return!1;for(let r=0;r<e.locations.length;r++){const s=e.locations[r],a=t.locations[r];if(s.latitude!==a.latitude||s.longitude!==a.longitude||s.label!==a.label||s.code!==a.code||s.isCurrent!==a.isCurrent||s.markerColor!==a.markerColor)return!1}return!0});function Ec({value:e,onSave:t,isEditable:r=!0}){const[s,a]=h.useState(!1),[o,i]=h.useState(e);h.useEffect(()=>{i(e)},[e]);const l=u=>{i(u),t(u)},c=e||"No information available",d=c.length>50,p=d&&!s?c.substring(0,50)+"...":c;return r?n.jsx("div",{className:"space-y-2",children:n.jsx(ke,{value:o,onChange:u=>l(u.target.value),style:{fontSize:"10px"},placeholder:"Enter information...","data-testid":"input-sliding-description"})}):n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-start gap-2",children:[d&&n.jsx(I,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 flex-shrink-0 mt-0.5",onClick:()=>a(!s),"data-testid":"button-toggle-description",children:s?n.jsx(ua,{className:"w-3 h-3"}):n.jsx(zs,{className:"w-3 h-3"})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsx("div",{className:"flex-1 cursor-pointer transition-all duration-300 ease-in-out opacity-90",onClick:()=>a(!s),children:(()=>{const u=(s?c:p).split(`
`).map(m=>m.trim()).filter(m=>m.length>0);return u.length>1?n.jsx("dl",{className:"space-y-2",style:{fontSize:"10px"},children:u.map((m,f)=>n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsxs("dt",{className:"w-20 flex-shrink-0 font-semibold text-blue-600 dark:text-blue-400",children:["Item ",f+1]}),n.jsx("dd",{className:"flex-1 text-gray-700 dark:text-gray-300 m-0",children:m})]},f))}):n.jsx("div",{className:"whitespace-pre-wrap break-words text-gray-700 dark:text-gray-300",style:{fontSize:"10px"},children:s?c:p})})()})})]}),n.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${s?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:d&&s&&n.jsx("div",{className:"pl-8 text-muted-foreground",style:{fontSize:"10px"},children:"Click to collapse"})})]})}function Jk({value:e,onSave:t,isEditable:r=!0}){const s=x=>x.trim()?x.split(`
`).map(g=>g.trim()).filter(g=>g.length>0).map((g,v)=>{if(g.includes(" : ")){const[y,...w]=g.split(" : ");return{term:y.trim()||`Item ${v+1}`,definition:w.join(" : ").trim()}}return{term:`Item ${v+1}`,definition:g}}):[],[a,o]=h.useState(s(e)),[i,l]=h.useState(e);h.useEffect(()=>{if(e!==i){const x=a.map(y=>y.definition).join(`
`),g=s(e),v=g.map(y=>y.definition).join(`
`);x!==v&&(o(g),l(e))}},[e,i,a]);const c=x=>x.filter(g=>g.definition.trim()||g.term.trim()).map(g=>g.term.trim()&&g.definition.trim()?`${g.term.trim()} : ${g.definition.trim()}`:g.definition.trim()).join(`
`),d=()=>{const x=[...a,{term:`Item ${a.length+1}`,definition:""}];o(x);const g=c(x);t(g)},p=x=>{const g=a.filter((y,w)=>w!==x);o(g);const v=c(g);t(v)},u=(x,g)=>{const v=[...a];v[x].term=g,o(v)},m=x=>{const g=c(a);t(g)},f=(x,g)=>{const v=[...a];v[x].definition=g,o(v)},b=x=>{const g=c(a);t(g)};if(!r){const x=s(e);return n.jsx("div",{className:"space-y-2",children:x.length>0?n.jsx("dl",{className:"space-y-2",style:{fontSize:"10px"},children:x.map((g,v)=>n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("dt",{className:"w-20 flex-shrink-0 font-semibold text-blue-600 dark:text-blue-400",children:g.term}),n.jsx("dd",{className:"flex-1 text-gray-700 dark:text-gray-300 m-0",children:g.definition})]},v))}):n.jsx("p",{className:"text-muted-foreground",style:{fontSize:"10px"},children:"No information available"})})}return n.jsxs("div",{className:"space-y-3",children:[a.length>0?n.jsx("div",{className:"space-y-2",children:a.map((x,g)=>n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(ke,{value:x.term,onChange:v=>u(g,v.target.value),onBlur:()=>m(),className:"w-24",style:{fontSize:"10px"},placeholder:"Term","data-testid":`input-item-term-${g}`}),n.jsx(ke,{value:x.definition,onChange:v=>f(g,v.target.value),onBlur:()=>b(),className:"flex-1",style:{fontSize:"10px"},placeholder:"Definition","data-testid":`input-item-definition-${g}`}),n.jsx(I,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 bg-transparent border-transparent hover:bg-transparent hover:border-transparent text-red-600 hover:text-red-700",onClick:()=>p(g),"data-testid":`button-remove-item-${g}`,children:n.jsx(nn,{className:"w-3 h-3"})})]},g))}):n.jsx("p",{className:"text-muted-foreground",style:{fontSize:"10px"},children:'No items yet. Click "Add Item" to start.'}),n.jsxs(I,{variant:"outline",size:"sm",onClick:d,className:"bg-transparent border-transparent hover:bg-transparent hover:border-transparent text-blue-600 hover:text-blue-700",style:{fontSize:"10px"},"data-testid":"button-add-item",children:[n.jsx(Rr,{className:"w-3 h-3 mr-1"}),"Add Item"]})]})}class be{constructor(t,r,s,a,o){this._legacyCanvasSize=be.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=t,this.$canvas=document.createElement("canvas"),s&&typeof s=="object"?this._onDecode=r:(console.warn(s||a||o?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=r),r=typeof s=="object"?s:{},this._onDecodeError=r.onDecodeError||(typeof s=="function"?s:this._onDecodeError),this._calculateScanRegion=r.calculateScanRegion||(typeof a=="function"?a:this._calculateScanRegion),this._preferredCamera=r.preferredCamera||o||this._preferredCamera,this._legacyCanvasSize=typeof s=="number"?s:typeof a=="number"?a:this._legacyCanvasSize,this._maxScansPerSecond=r.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),t.disablePictureInPicture=!0,t.playsInline=!0,t.muted=!0;let i=!1;if(t.hidden&&(t.hidden=!1,i=!0),document.body.contains(t)||(document.body.appendChild(t),i=!0),s=t.parentElement,r.highlightScanRegion||r.highlightCodeOutline){if(a=!!r.overlay,this.$overlay=r.overlay||document.createElement("div"),o=this.$overlay.style,o.position="absolute",o.display="none",o.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!a&&r.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}s.insertBefore(this.$overlay,this.$video.nextSibling)}r.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(t),requestAnimationFrame(()=>{let l=window.getComputedStyle(t);l.display==="none"&&(t.style.setProperty("display","block","important"),i=!0),l.visibility!=="visible"&&(t.style.setProperty("visibility","visible","important"),i=!0),i&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),t.style.opacity="0",t.style.width="0",t.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),t.addEventListener("play",this._onPlay),t.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=be.createQrEngine()}static set WORKER_PATH(t){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await be.listCameras(!1)).length}catch{return!1}}static async listCameras(t=!1){if(!navigator.mediaDevices)return[];let r=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(a=>a.kind==="videoinput"),s;try{t&&(await r()).every(a=>!a.label)&&(s=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await r()).map((a,o)=>({id:a.deviceId,label:a.label||(o===0?"Default Camera":`Camera ${o+1}`)}))}finally{s&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),be._stopVideoStream(s))}}async hasFlash(){let t;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;t=this.$video.srcObject}else t=(await this._getCameraStream()).stream;return"torch"in t.getVideoTracks()[0].getSettings()}catch{return!1}finally{t&&t!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),be._stopVideoStream(t))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(t){throw this._flashOn=!1,t}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),be._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:t,facingMode:r}=await this._getCameraStream();!this._active||this._paused?be._stopVideoStream(t):(this._setVideoMirror(r),this.$video.srcObject=t,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(t){if(!this._paused)throw this._active=!1,t}}stop(){this.pause(),this._active=!1}async pause(t=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let r=()=>{this.$video.srcObject instanceof MediaStream&&(be._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return t?(r(),!0):(await new Promise(s=>setTimeout(s,300)),this._paused?(r(),!0):!1)}async setCamera(t){t!==this._preferredCamera&&(this._preferredCamera=t,await this._restartVideoStream())}static async scanImage(t,r,s,a,o=!1,i=!1){let l,c=!1;r&&("scanRegion"in r||"qrEngine"in r||"canvas"in r||"disallowCanvasResizing"in r||"alsoTryWithoutScanRegion"in r||"returnDetailedScanResult"in r)?(l=r.scanRegion,s=r.qrEngine,a=r.canvas,o=r.disallowCanvasResizing||!1,i=r.alsoTryWithoutScanRegion||!1,c=!0):console.warn(r||s||a||o||i?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),r=!!s;try{let d,p;[s,d]=await Promise.all([s||be.createQrEngine(),be._loadImage(t)]),[a,p]=be._drawToCanvas(d,l,a,o);let u;if(s instanceof Worker){let m=s;r||be._postWorkerMessageSync(m,"inversionMode","both"),u=await new Promise((f,b)=>{let x,g,v,y=-1;g=j=>{j.data.id===y&&(m.removeEventListener("message",g),m.removeEventListener("error",v),clearTimeout(x),j.data.data!==null?f({data:j.data.data,cornerPoints:be._convertPoints(j.data.cornerPoints,l)}):b(be.NO_QR_CODE_FOUND))},v=j=>{m.removeEventListener("message",g),m.removeEventListener("error",v),clearTimeout(x),b("Scanner error: "+(j?j.message||j:"Unknown Error"))},m.addEventListener("message",g),m.addEventListener("error",v),x=setTimeout(()=>v("timeout"),1e4);let w=p.getImageData(0,0,a.width,a.height);y=be._postWorkerMessageSync(m,"decode",w,[w.data.buffer])})}else u=await Promise.race([new Promise((m,f)=>window.setTimeout(()=>f("Scanner error: timeout"),1e4)),(async()=>{try{var[m]=await s.detect(a);if(!m)throw be.NO_QR_CODE_FOUND;return{data:m.rawValue,cornerPoints:be._convertPoints(m.cornerPoints,l)}}catch(f){if(m=f.message||f,/not implemented|service unavailable/.test(m))return be._disableBarcodeDetector=!0,be.scanImage(t,{scanRegion:l,canvas:a,disallowCanvasResizing:o,alsoTryWithoutScanRegion:i});throw`Scanner error: ${m}`}})()]);return c?u:u.data}catch(d){if(!l||!i)throw d;let p=await be.scanImage(t,{qrEngine:s,canvas:a,disallowCanvasResizing:o});return c?p:p.data}finally{r||be._postWorkerMessage(s,"close")}}setGrayscaleWeights(t,r,s,a=!0){be._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:t,green:r,blue:s,useIntegerApproximation:a})}setInversionMode(t){be._postWorkerMessage(this._qrEnginePromise,"inversionMode",t)}static async createQrEngine(t){if(t&&console.warn("Specifying a worker path is not required and not supported anymore."),t=()=>kt(()=>import("./qr-scanner-worker.min-D85Z9gVD.js"),[]).then(s=>s.createWorker()),!(!be._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return t();let r=navigator.userAgentData;return r&&r.brands.some(({brand:s})=>/Chromium/i.test(s))&&/mac ?OS/i.test(r.platform)&&await r.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:s,platformVersion:a})=>/arm/i.test(s||"arm")&&13<=parseInt(a||"13")).catch(()=>!0)?t():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(t){let r=Math.round(.6666666666666666*Math.min(t.videoWidth,t.videoHeight));return{x:Math.round((t.videoWidth-r)/2),y:Math.round((t.videoHeight-r)/2),width:r,height:r,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var t=this.$video,r=t.videoWidth,s=t.videoHeight,a=t.offsetWidth,o=t.offsetHeight,i=t.offsetLeft,l=t.offsetTop,c=window.getComputedStyle(t),d=c.objectFit,p=r/s,u=a/o;switch(d){case"none":var m=r,f=s;break;case"fill":m=a,f=o;break;default:(d==="cover"?p>u:p<u)?(f=o,m=f*p):(m=a,f=m/p),d==="scale-down"&&(m=Math.min(m,r),f=Math.min(f,s))}var[b,x]=c.objectPosition.split(" ").map((v,y)=>{const w=parseFloat(v);return v.endsWith("%")?(y?o-f:a-m)*w/100:w});c=this._scanRegion.width||r,u=this._scanRegion.height||s,d=this._scanRegion.x||0;var g=this._scanRegion.y||0;p=this.$overlay.style,p.width=`${c/r*m}px`,p.height=`${u/s*f}px`,p.top=`${l+x+g/s*f}px`,s=/scaleX\(-1\)/.test(t.style.transform),p.left=`${i+(s?a-b-m:b)+(s?r-d-c:d)/r*m}px`,p.transform=t.style.transform}})}static _convertPoints(t,r){if(!r)return t;let s=r.x||0,a=r.y||0,o=r.width&&r.downScaledWidth?r.width/r.downScaledWidth:1;r=r.height&&r.downScaledHeight?r.height/r.downScaledHeight:1;for(let i of t)i.x=i.x*o+s,i.y=i.y*r+a;return t}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var t=Date.now()-this._lastScanTimestamp,r=1e3/this._maxScansPerSecond;t<r&&await new Promise(a=>setTimeout(a,r-t)),this._lastScanTimestamp=Date.now();try{var s=await be.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(a){if(!this._active)return;this._onDecodeError(a)}!be._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=be.createQrEngine()),s?(this._onDecode?this._onDecode(s):this._legacyOnDecode&&this._legacyOnDecode(s.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",s.cornerPoints.map(({x:a,y:o})=>`${a},${o}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(t){t!==be.NO_QR_CODE_FOUND&&console.log(t)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let t=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",r=[{width:{min:1024}},{width:{min:768}},{}],s=r.map(a=>Object.assign({},a,{[t]:{exact:this._preferredCamera}}));for(let a of[...s,...r])try{let o=await navigator.mediaDevices.getUserMedia({video:a,audio:!1}),i=this._getFacingMode(o)||(a.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:o,facingMode:i}}catch{}throw"Camera not found."}async _restartVideoStream(){let t=this._paused;await this.pause(!0)&&!t&&this._active&&await this.start()}static _stopVideoStream(t){for(let r of t.getTracks())r.stop(),t.removeTrack(r)}_setVideoMirror(t){this.$video.style.transform="scaleX("+(t==="user"?-1:1)+")"}_getFacingMode(t){return(t=t.getVideoTracks()[0])?/rear|back|environment/i.test(t.label)?"environment":/front|user|face/i.test(t.label)?"user":null:null}static _drawToCanvas(t,r,s,a=!1){s=s||document.createElement("canvas");let o=r&&r.x?r.x:0,i=r&&r.y?r.y:0,l=r&&r.width?r.width:t.videoWidth||t.width,c=r&&r.height?r.height:t.videoHeight||t.height;return a||(a=r&&r.downScaledWidth?r.downScaledWidth:l,r=r&&r.downScaledHeight?r.downScaledHeight:c,s.width!==a&&(s.width=a),s.height!==r&&(s.height=r)),r=s.getContext("2d",{alpha:!1}),r.imageSmoothingEnabled=!1,r.drawImage(t,o,i,l,c,0,0,s.width,s.height),[s,r]}static async _loadImage(t){if(t instanceof Image)return await be._awaitImageLoad(t),t;if(t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||t instanceof SVGImageElement||"OffscreenCanvas"in window&&t instanceof OffscreenCanvas||"ImageBitmap"in window&&t instanceof ImageBitmap)return t;if(t instanceof File||t instanceof Blob||t instanceof URL||typeof t=="string"){let r=new Image;r.src=t instanceof File||t instanceof Blob?URL.createObjectURL(t):t.toString();try{return await be._awaitImageLoad(r),r}finally{(t instanceof File||t instanceof Blob)&&URL.revokeObjectURL(r.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(t){t.complete&&t.naturalWidth!==0||await new Promise((r,s)=>{let a=o=>{t.removeEventListener("load",a),t.removeEventListener("error",a),o instanceof ErrorEvent?s("Image load error"):r()};t.addEventListener("load",a),t.addEventListener("error",a)})}static async _postWorkerMessage(t,r,s,a){return be._postWorkerMessageSync(await t,r,s,a)}static _postWorkerMessageSync(t,r,s,a){if(!(t instanceof Worker))return-1;let o=be._workerMessageId++;return t.postMessage({id:o,type:r,data:s},a),o}}be.DEFAULT_CANVAS_SIZE=400;be.NO_QR_CODE_FOUND="No QR code found";be._disableBarcodeDetector=!1;be._workerMessageId=0;function Rc({info:e,rowId:t,code:r,route:s,location:a,latitude:o,longitude:i,qrCode:l,no:c,markerColor:d,onUpdateRow:p,editMode:u=!1,allRows:m=[],iconType:f="info"}){const[b,x]=h.useState(!1),[g,v]=h.useState(!1),[y,w]=h.useState(""),[j,k]=h.useState(!1),[S,A]=h.useState(!1),[O,M]=h.useState(!1),[B,U]=h.useState("google"),[_,G]=h.useState(!1),[L,Q]=h.useState(""),[F,D]=h.useState(!1),[V,z]=h.useState(!1),[R,C]=h.useState(!1),[ee,he]=h.useState({info:"",qrCode:"",latitude:"",longitude:"",markerColor:""}),[ae,Me]=h.useState({info:"",qrCode:"",latitude:"",longitude:"",markerColor:""});h.useEffect(()=>{if(b){const K={info:e||"",qrCode:l||"",latitude:o||"",longitude:i||"",markerColor:d||"#3388ff"};he(K),Me(K)}},[b,e,l,o,i,d]);const rt=()=>ae.info!==ee.info||ae.qrCode!==ee.qrCode||ae.latitude!==ee.latitude||ae.longitude!==ee.longitude||ae.markerColor!==ee.markerColor,Re=K=>K?(parseInt(K.replace(/\D/g,""),10)||0).toString().padStart(4,"0"):"0000",Ge=()=>{A(!0)},Qe=()=>{const ie=`https://fmvending.web.app/refill-service/M${Re(r)}`;window.open(ie,"_blank"),A(!1)},Le=()=>{U("google"),M(!0)},Se=()=>{if(o&&i&&!isNaN(parseFloat(o))&&!isNaN(parseFloat(i))){const K=`https://www.google.com/maps/dir/?api=1&destination=${o},${i}`;window.open(K,"_blank")}M(!1)},X=()=>{U("waze"),M(!0)},me=()=>{if(o&&i&&!isNaN(parseFloat(o))&&!isNaN(parseFloat(i))){const K=`https://waze.com/ul?ll=${o},${i}&navigate=yes`;window.open(K,"_blank")}M(!1)},Ne=async()=>{if(l){k(!0);try{let K=l;if(l.startsWith("http")){const fe=`/api/proxy-image?url=${encodeURIComponent(l)}`,we=await fetch(fe);if(!we.ok)throw new Error(`Failed to load image: ${we.statusText}`);K=await we.blob()}const ie=await be.scanImage(K,{returnDetailedScanResult:!0});w(ie.data),v(!0)}catch(K){console.error("QR scanning error:",K),alert("Could not read QR code from the image. Please check if the image contains a valid QR code.")}finally{k(!1)}}},_e=()=>{if(y){let K=y;y.match(/^https?:\/\//)||(y.includes(".")&&!y.includes(" ")?K=`https://${y}`:K=`https://www.google.com/search?q=${encodeURIComponent(y)}`),window.open(K,"_blank")}v(!1),w("")},We=()=>{v(!1),w("")},at=K=>{let ie=K.trim();!ie.startsWith("http://")&&!ie.startsWith("https://")&&(ie="https://"+ie),Q(ie),G(!0)},Pt=()=>{L&&window.open(L,"_blank"),G(!1),Q("")},ut=()=>{rt()&&D(!0)},nt=async()=>{D(!1),z(!0);try{if(rt()&&p){const K={};ae.info!==ee.info&&(K.info=ae.info),ae.qrCode!==ee.qrCode&&(K.qrCode=ae.qrCode||null),ae.latitude!==ee.latitude&&(K.latitude=ae.latitude?parseFloat(ae.latitude):null),ae.longitude!==ee.longitude&&(K.longitude=ae.longitude?parseFloat(ae.longitude):null),ae.markerColor!==ee.markerColor&&(K.markerColor=ae.markerColor),await p(K),he(ae),C(!0),setTimeout(()=>{C(!1)},3e3)}}finally{z(!1)}};return n.jsxs(Fe,{open:b,onOpenChange:x,children:[n.jsx(Gi,{asChild:!0,children:n.jsx(I,{variant:"ghost",size:"sm",className:"h-auto p-1 bg-transparent border-transparent hover:bg-transparent hover:border-transparent text-blue-400 hover:text-blue-500 dark:text-blue-300 dark:hover:text-blue-400","data-testid":`button-info-${t}`,children:u?n.jsx(yb,{className:"w-4 h-4"}):n.jsx(xb,{className:"w-4 h-4"})})}),n.jsxs(Te,{className:"max-w-lg overflow-hidden flex flex-col bg-white/70 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-200/60 dark:border-white/10 shadow-[0_20px_60px_0_rgba(0,0,0,0.25)] rounded-3xl transition-smooth data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-90 data-[state=open]:zoom-in-95 duration-300 ease-out",style:{maxHeight:"min(90vh, calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 40px))",touchAction:"pan-y"},children:[n.jsx("div",{className:"absolute inset-0 -z-10 rounded-3xl bg-gradient-to-br from-white/60 via-white/40 to-white/50 dark:from-black/40 dark:via-black/20 dark:to-black/30 border-0 shadow-inner",style:{backdropFilter:"blur(40px)",WebkitBackdropFilter:"blur(40px)"}}),n.jsxs(Ie,{className:"pb-6 border-b border-blue-900 dark:border-cyan-400/50 flex-shrink-0",style:{paddingTop:"max(1.5rem, env(safe-area-inset-top))"},children:[n.jsx(Oe,{className:"font-semibold text-center text-slate-900 dark:text-slate-400",style:{fontSize:"10px"},children:a||"Location"}),n.jsx("div",{className:"text-center text-muted-foreground pt-2",style:{fontSize:"10px"},children:r||""})]}),n.jsxs("div",{className:"py-6 space-y-6 overflow-y-auto flex-1",style:{WebkitOverflowScrolling:"touch",overscrollBehavior:"contain"},children:[o&&i&&!isNaN(parseFloat(o))&&!isNaN(parseFloat(i))&&n.jsxs("div",{className:"bg-transparent backdrop-blur-sm rounded-xl p-4 space-y-3 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-green-400 dark:bg-green-300 rounded-full animate-pulse"}),n.jsx("h4",{className:"font-semibold text-green-500 dark:text-green-300",style:{fontSize:"10px"},children:" Location Map"})]}),n.jsx(Xk,{locations:(()=>{const K={latitude:parseFloat(o),longitude:parseFloat(i),label:a||"Location",code:s||r,isCurrent:!0,markerColor:ae.markerColor||d},ie=m.filter(fe=>fe.latitude&&fe.longitude&&!isNaN(parseFloat(String(fe.latitude)))&&!isNaN(parseFloat(String(fe.longitude)))).map(fe=>({latitude:parseFloat(String(fe.latitude)),longitude:parseFloat(String(fe.longitude)),label:fe.location||"Location",code:fe.route||fe.code,isCurrent:fe.id===t,markerColor:fe.markerColor}));return ie.length>1?ie:[K]})(),height:"160px",showFullscreenButton:!0}),n.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200/50 dark:border-white/10",children:n.jsx(Ec,{value:(()=>{const K=ae.info||"";return K?K.includes("|||DESCRIPTION|||")?K.split("|||DESCRIPTION|||")[0]||"":K:""})(),onSave:K=>{const ie=ae.info||"";let fe=K;if(ie.includes("|||DESCRIPTION|||")){const we=ie.split("|||DESCRIPTION|||")[1]||"";we.trim()&&(fe=`${K}|||DESCRIPTION|||${we}`)}Me(we=>({...we,info:fe}))},isEditable:u})})]}),n.jsxs("div",{className:"bg-transparent backdrop-blur-sm rounded-xl p-4 space-y-3 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-purple-500 dark:bg-purple-400 rounded-full"}),n.jsx("h4",{className:"font-semibold text-purple-600 dark:text-purple-400",style:{fontSize:"10px"},children:" Description"})]}),n.jsx(Jk,{value:(()=>{const K=ae.info||"";if(!K)return"";if(K.includes("|||DESCRIPTION|||")){const ie=K.split("|||DESCRIPTION|||")[1]||"";return ie.includes("|||URL|||")?ie.split("|||URL|||")[0]||"":ie}return""})(),onSave:K=>{const ie=ae.info||"";let fe="",we="";if(ie.includes("|||DESCRIPTION|||")){fe=ie.split("|||DESCRIPTION|||")[0]||"";const ot=ie.split("|||DESCRIPTION|||")[1]||"";ot.includes("|||URL|||")&&(we=ot.split("|||URL|||")[1]||"")}else ie.includes("|||URL|||")?(fe=ie.split("|||URL|||")[0]||"",we=ie.split("|||URL|||")[1]||""):fe=ie;let pt=fe.trim();K.trim()&&(pt+=`|||DESCRIPTION|||${K.trim()}`),we.trim()&&(K.trim()?pt+=`|||URL|||${we.trim()}`:pt+=`|||DESCRIPTION||||||URL|||${we.trim()}`),Me(ot=>({...ot,info:pt}))},isEditable:u})]}),u&&n.jsxs("div",{className:"bg-transparent backdrop-blur-sm rounded-xl p-4 space-y-3 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-cyan-500 dark:bg-cyan-400 rounded-full"}),n.jsx("h4",{className:"font-semibold text-cyan-600 dark:text-cyan-400",style:{fontSize:"10px"},children:" Website URL"})]}),n.jsx(Ec,{value:(()=>{const K=ae.info||"";return K&&K.includes("|||URL|||")&&K.split("|||URL|||").pop()||""})(),onSave:K=>{const ie=ae.info||"";let fe="",we="";if(ie.includes("|||DESCRIPTION|||")){fe=ie.split("|||DESCRIPTION|||")[0]||"";const ot=ie.split("|||DESCRIPTION|||")[1]||"";ot.includes("|||URL|||")?we=ot.split("|||URL|||")[0]||"":we=ot}else fe=ie;let pt=fe;(we.trim()||K.trim())&&(pt+=`|||DESCRIPTION|||${we}`,K.trim()&&(pt+=`|||URL|||${K}`)),Me(ot=>({...ot,info:pt}))},isEditable:u})]}),u&&n.jsxs("div",{className:"bg-transparent backdrop-blur-sm rounded-xl p-4 space-y-3 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-purple-500 dark:bg-purple-400 rounded-full"}),n.jsxs("h4",{className:"font-semibold text-purple-600 dark:text-purple-400",style:{fontSize:"10px"},children:[n.jsx(Ml,{className:"w-4 h-4 inline mr-1"}),"QR Code URL"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ke,{value:ae.qrCode,onChange:K=>Me(ie=>({...ie,qrCode:K.target.value})),placeholder:"Enter QR code image URL...",style:{fontSize:"10px"},"data-testid":"input-qr-code"}),n.jsx("p",{className:"text-muted-foreground",style:{fontSize:"10px"},children:"URL to the QR code image"})]})]}),u&&n.jsxs("div",{className:"bg-transparent backdrop-blur-sm rounded-xl p-4 space-y-3 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 dark:bg-green-400 rounded-full"}),n.jsx("h4",{className:"font-semibold text-green-600 dark:text-green-400",style:{fontSize:"10px"},children:" Coordinates"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"latitude",style:{fontSize:"10px"},children:"Latitude"}),n.jsx(ke,{id:"latitude",type:"number",step:"any",value:ae.latitude,onChange:K=>Me(ie=>({...ie,latitude:K.target.value})),placeholder:"e.g., 3.1390",style:{fontSize:"10px"},"data-testid":"input-latitude"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"longitude",style:{fontSize:"10px"},children:"Longitude"}),n.jsx(ke,{id:"longitude",type:"number",step:"any",value:ae.longitude,onChange:K=>Me(ie=>({...ie,longitude:K.target.value})),placeholder:"e.g., 101.6869",style:{fontSize:"10px"},"data-testid":"input-longitude"})]})]}),n.jsx("p",{className:"text-muted-foreground",style:{fontSize:"10px"},children:"GPS coordinates for map location"}),n.jsxs("div",{className:"space-y-2 pt-3",children:[n.jsx(ue,{htmlFor:"markerColor",style:{fontSize:"10px"},children:" Marker Color"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ke,{id:"markerColor",type:"color",value:ae.markerColor,onChange:K=>Me(ie=>({...ie,markerColor:K.target.value})),className:"w-20 h-10 cursor-pointer","data-testid":"input-marker-color"}),n.jsx(ke,{type:"text",value:ae.markerColor,onChange:K=>Me(ie=>({...ie,markerColor:K.target.value})),placeholder:"#3b82f6",className:"flex-1",style:{fontSize:"10px"},pattern:"^#[0-9A-Fa-f]{6}$"})]}),n.jsx("p",{className:"text-muted-foreground",style:{fontSize:"10px"},children:"Custom color for map marker pin"})]}),n.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-blue-200 dark:border-blue-800/50",children:[n.jsxs(I,{variant:"ghost",size:"sm",onClick:()=>{Me(ee),x(!1)},className:"bg-transparent border-transparent hover:bg-transparent hover:border-transparent text-red-600 hover:text-red-700",style:{fontSize:"10px"},"data-testid":"button-cancel-info",children:[n.jsx(vt,{className:"w-4 h-4 mr-1"}),"Cancel"]}),n.jsx(I,{size:"sm",onClick:ut,disabled:V||!rt(),className:rt()?"bg-transparent border-transparent hover:bg-transparent hover:border-transparent text-green-600 hover:text-green-700":"bg-transparent border-transparent text-gray-400 cursor-not-allowed",style:{fontSize:"10px"},"data-testid":"button-save-info",children:V?n.jsxs(n.Fragment,{children:[n.jsx(So,{className:"w-4 h-4 mr-1 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx($a,{className:"w-4 h-4 mr-1"}),"Save"]})})]})]})]}),n.jsx(He,{className:"pt-6 mt-2 border-t border-blue-900 dark:border-cyan-400/50 bg-blue-50/50 dark:bg-black/30 backdrop-blur-sm rounded-b-2xl -mx-6 -mb-6 px-6",style:{paddingBottom:"max(1rem, env(safe-area-inset-bottom))"},children:n.jsx("div",{className:"flex flex-col gap-4 w-full",children:n.jsx("div",{className:"flex justify-between items-center w-full",children:n.jsxs("div",{className:"flex gap-2 flex-wrap",children:[a!=="QL Kitchen"&&n.jsx(I,{variant:"ghost",size:"sm",onClick:Ge,className:"bg-transparent border-transparent hover:bg-transparent hover:border-transparent","data-testid":`button-edit-${t}`,children:n.jsx(Os,{className:"w-4 h-4 text-green-600"})}),l&&n.jsxs(I,{variant:"ghost",size:"sm",onClick:Ne,disabled:j,className:"bg-transparent border-transparent hover:bg-transparent hover:border-transparent","data-testid":`button-qrcode-${t}`,children:[n.jsx(Ml,{className:"w-4 h-4 text-purple-600"}),j&&n.jsx("span",{className:"ml-1 text-xs",children:"Scanning..."})]}),(()=>{const K=e&&e.includes("|||URL|||")&&e.split("|||URL|||").pop()||"";return K.trim()?n.jsx(I,{variant:"ghost",size:"sm",onClick:()=>at(K),className:"bg-transparent border-transparent hover:bg-transparent hover:border-transparent","data-testid":`button-open-url-${t}`,children:n.jsx(sr,{className:"w-4 h-4 text-cyan-600"})}):null})(),o&&i&&!isNaN(parseFloat(o))&&!isNaN(parseFloat(i))&&n.jsxs(n.Fragment,{children:[n.jsx(I,{variant:"ghost",size:"sm",onClick:Le,className:"bg-transparent border-transparent hover:bg-transparent hover:border-transparent","data-testid":`button-direction-${t}`,children:n.jsx(so,{className:"w-4 h-4 text-red-500"})}),n.jsx(I,{variant:"ghost",size:"sm",onClick:X,className:"bg-transparent border-transparent hover:bg-transparent hover:border-transparent","data-testid":`button-waze-${t}`,children:n.jsx(ao,{className:"w-4 h-4 text-blue-500"})})]})]})})})})]}),n.jsx(Fe,{open:g,onOpenChange:We,children:n.jsxs(Te,{className:"max-w-md animate-in zoom-in-95 duration-200 bg-gradient-to-br from-background/95 via-background/98 to-background dark:from-black/95 dark:via-black/98 dark:to-black border-2 border-blue-500/20 dark:border-blue-400/20",children:[n.jsxs(Ie,{children:[n.jsxs(Oe,{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[n.jsx(_a,{className:"w-5 h-5"}),"QR Code Detected"]}),n.jsx(qe,{children:"A QR code was scanned and contains a link."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-blue-50/50 dark:bg-blue-950/30 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(sr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Detected content:"}),n.jsx("div",{className:"bg-background/50 dark:bg-black/50 p-2 rounded text-sm font-mono break-all",children:y})]})]})}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Do you want to navigate to this link? It will open in a new tab."})]}),n.jsxs(He,{className:"flex-col-reverse sm:flex-row gap-2",children:[n.jsx(I,{variant:"outline",onClick:We,"data-testid":"button-cancel-qr-navigation",children:"Cancel"}),n.jsxs(I,{onClick:_e,className:"bg-green-600 hover:bg-green-700","data-testid":"button-confirm-qr-navigation",children:[n.jsx(sr,{className:"w-4 h-4 mr-2"}),"Open Link"]})]})]})}),n.jsx(Fe,{open:S,onOpenChange:A,children:n.jsxs(Te,{className:"max-w-md animate-in zoom-in-95 duration-200 bg-gradient-to-br from-background/95 via-background/98 to-background dark:from-black/95 dark:via-black/98 dark:to-black border-2 border-blue-500/20 dark:border-blue-400/20",children:[n.jsxs(Ie,{children:[n.jsxs(Oe,{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[n.jsx(Os,{className:"w-5 h-5"}),"Open Checklist"]}),n.jsx(qe,{children:"Access the refill service checklist for this location."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-blue-50/50 dark:bg-blue-950/30 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(sr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"External Link:"}),n.jsxs("div",{className:"bg-background/50 dark:bg-black/50 p-2 rounded text-sm font-mono break-all",children:["https://fmvending.web.app/refill-service/M",Re(r)]})]})]})}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Do you want to open the refill service checklist? It will open in a new tab."})]}),n.jsxs(He,{className:"flex-col-reverse sm:flex-row gap-2",children:[n.jsx(I,{variant:"outline",onClick:()=>A(!1),"data-testid":"button-cancel-checklist",children:"Cancel"}),n.jsxs(I,{onClick:Qe,className:"bg-green-600 hover:bg-green-700","data-testid":"button-confirm-checklist",children:[n.jsx(Os,{className:"w-4 h-4 mr-2"}),"Open Checklist"]})]})]})}),n.jsx(Fe,{open:O,onOpenChange:M,children:n.jsxs(Te,{className:"max-w-md animate-in zoom-in-95 duration-200 bg-gradient-to-br from-background/95 via-background/98 to-background dark:from-black/95 dark:via-black/98 dark:to-black border-2 border-blue-500/20 dark:border-blue-400/20",children:[n.jsxs(Ie,{children:[n.jsxs(Oe,{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[B==="google"?n.jsx(so,{className:"w-5 h-5"}):n.jsx(ao,{className:"w-5 h-5"}),"Open Navigation"]}),n.jsxs(qe,{children:["Navigate to this location using ",B==="google"?"Google Maps":"Waze","."]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-blue-50/50 dark:bg-blue-950/30 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(sr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Navigation to:"}),n.jsxs("div",{className:"bg-background/50 dark:bg-black/50 p-2 rounded text-sm",children:[a||"Location"," (",o,", ",i,")"]}),n.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Using ",B==="google"?"Google Maps":"Waze"]})]})]})}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Do you want to open navigation to this location? It will open in a new tab."})]}),n.jsxs(He,{className:"flex-col-reverse sm:flex-row gap-2",children:[n.jsx(I,{variant:"outline",onClick:()=>M(!1),"data-testid":"button-cancel-navigation",children:"Cancel"}),n.jsxs(I,{onClick:B==="google"?Se:me,className:B==="google"?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700","data-testid":"button-confirm-navigation",children:[B==="google"?n.jsx(so,{className:"w-4 h-4 mr-2"}):n.jsx(ao,{className:"w-4 h-4 mr-2"}),"Open ",B==="google"?"Google Maps":"Waze"]})]})]})}),n.jsx(Fe,{open:_,onOpenChange:G,children:n.jsxs(Te,{className:"max-w-md animate-in zoom-in-95 duration-200 bg-gradient-to-br from-background/95 via-background/98 to-background dark:from-black/95 dark:via-black/98 dark:to-black border-2 border-blue-500/20 dark:border-blue-400/20",children:[n.jsxs(Ie,{children:[n.jsxs(Oe,{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[n.jsx(sr,{className:"w-5 h-5"}),"Open External Link"]}),n.jsx(qe,{children:"This will open a website in a new tab."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-blue-50/50 dark:bg-blue-950/30 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(sr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Website URL:"}),n.jsx("div",{className:"bg-background/50 dark:bg-black/50 p-2 rounded text-sm font-mono break-all",children:L})]})]})}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Do you want to open this external link? It will open in a new tab and may use your data."})]}),n.jsxs(He,{className:"flex-col-reverse sm:flex-row gap-2",children:[n.jsx(I,{variant:"outline",onClick:()=>G(!1),"data-testid":"button-cancel-url",children:"Cancel"}),n.jsxs(I,{onClick:Pt,className:"bg-cyan-600 hover:bg-cyan-700","data-testid":"button-confirm-url",children:[n.jsx(sr,{className:"w-4 h-4 mr-2"}),"Open Link"]})]})]})}),n.jsx(Fe,{open:F,onOpenChange:D,children:n.jsxs(Te,{className:"max-w-md animate-in zoom-in-95 duration-200 bg-gradient-to-br from-background/95 via-background/98 to-background dark:from-black/95 dark:via-black/98 dark:to-black border-2 border-green-500/20 dark:border-green-400/20",children:[n.jsxs(Ie,{children:[n.jsxs(Oe,{className:"flex items-center gap-2 text-green-600 dark:text-green-400",children:[n.jsx($a,{className:"w-5 h-5"}),"Save Changes"]}),n.jsx(qe,{children:"Are you sure you want to save these changes to the location information?"})]}),n.jsx("div",{className:"space-y-4",children:n.jsx("div",{className:"bg-green-50/50 dark:bg-green-950/30 p-4 rounded-lg border border-green-200 dark:border-green-800",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(_a,{className:"w-5 h-5 text-green-600 dark:text-green-400 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-semibold text-green-900 dark:text-green-100 mb-2",children:"Changes to be saved:"}),n.jsxs("ul",{className:"text-sm space-y-1",children:[ae.info!==ee.info&&n.jsx("li",{className:"text-green-700 dark:text-green-300",children:" Location details updated"}),ae.qrCode!==ee.qrCode&&n.jsx("li",{className:"text-green-700 dark:text-green-300",children:" QR code URL updated"}),ae.latitude!==ee.latitude&&n.jsx("li",{className:"text-green-700 dark:text-green-300",children:" Latitude updated"}),ae.longitude!==ee.longitude&&n.jsx("li",{className:"text-green-700 dark:text-green-300",children:" Longitude updated"}),ae.markerColor!==ee.markerColor&&n.jsx("li",{className:"text-green-700 dark:text-green-300",children:" Marker color updated"})]})]})]})})}),n.jsxs(He,{className:"flex-col-reverse sm:flex-row gap-2",children:[n.jsx(I,{variant:"outline",onClick:()=>D(!1),"data-testid":"button-cancel-save",children:"Cancel"}),n.jsxs(I,{onClick:nt,className:"bg-green-600 hover:bg-green-700","data-testid":"button-confirm-save",children:[n.jsx($a,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})}),R&&n.jsx("div",{className:"fixed top-4 right-4 z-[100] animate-in slide-in-from-top-2 duration-300",children:n.jsxs(cp,{className:"bg-green-600 text-white border-green-700 shadow-lg",children:[n.jsx(_a,{className:"h-4 w-4"}),n.jsxs(dp,{className:"ml-2",children:[n.jsx("strong",{children:"Success!"})," Information saved successfully."]})]})})]})}function ja({message:e="Loading...",type:t="pulse"}){const[r,s]=h.useState(0),[a,o]=h.useState(0),[i,l]=h.useState("Initializing"),c=[" Add images to your rows for visual reference"," Share your table with custom links"," Customize marker colors on the map"," Drag and drop rows to reorder"," View delivery routes with Google Maps"," Upload images from gallery or URL"," Toggle between delivery alternates"," Calculate distances automatically"," Save your table layout preferences"," Filter routes by delivery schedule"];return h.useEffect(()=>{const d=setInterval(()=>{s(Math.floor(Math.random()*c.length))},800),p=setInterval(()=>{o(m=>m>=100?100:m+2)},100),u=setInterval(()=>{o(m=>(m<20?l("Initializing"):m<40?l("Loading data"):m<60?l("Processing"):m<80?l("Almost there"):m<95?l("Finalizing"):l("Complete"),m))},100);return()=>{clearInterval(d),clearInterval(p),clearInterval(u)}},[]),n.jsx("div",{className:"table-loading-overlay","data-testid":"loading-overlay",children:n.jsxs("div",{className:"flex flex-col items-center gap-8 zoom-in",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-24 h-24 flex items-center justify-center",children:n.jsx("img",{src:"/assets/FamilyMart.png",alt:"FamilyMart Logo",className:"w-20 h-20 object-contain animate-pulse",style:{animationDuration:"2s"}})}),n.jsx("div",{className:"absolute inset-0 -m-2 rounded-3xl border-4 border-blue-400/20 animate-spin",style:{animationDuration:"3s"}}),n.jsx("div",{className:"absolute inset-0 -m-4 rounded-3xl bg-blue-500/10 animate-ping",style:{animationDuration:"2s"}})]}),n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"text-sm text-blue-200/90 font-medium transition-all duration-300",children:c[r]})}),n.jsxs("div",{className:"w-72 space-y-2",children:[n.jsx("div",{className:"h-1.5 bg-white/10 rounded-full overflow-hidden relative",children:n.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 via-blue-500 to-blue-600 rounded-full shadow-lg shadow-blue-500/50 transition-all duration-100 ease-linear",style:{width:`${a}%`}})}),n.jsxs("div",{className:"flex justify-between text-xs text-blue-200/70",children:[n.jsx("span",{children:i}),n.jsxs("span",{className:"font-mono font-bold",children:[a,"%"]})]})]})]})})}function Tp({size:e="sm",type:t="spinner"}){return t==="triple"?n.jsxs("div",{className:"loading-triple-bounce","data-testid":"inline-loading",children:[n.jsx("div",{className:"bounce"}),n.jsx("div",{className:"bounce"}),n.jsx("div",{className:"bounce"})]}):t==="particles"?n.jsx("div",{className:"loading-particles","data-testid":"inline-loading"}):n.jsx("div",{className:`${e==="lg"?"loading-spinner-lg":"loading-spinner"}`,"data-testid":"inline-loading"})}function Zk({content:e,children:t,showBelow:r=!1}){const[s,a]=h.useState(!1),[o,i]=h.useState(!1);h.useEffect(()=>{const p=()=>{i("ontouchstart"in window||navigator.maxTouchPoints>0)};return p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]);const l=()=>{o&&(a(!s),setTimeout(()=>a(!1),3e3))},c=()=>{o||a(!0)},d=()=>{o||a(!1)};return n.jsxs("div",{className:"relative inline-block",children:[n.jsx("div",{onClick:l,onMouseEnter:c,onMouseLeave:d,className:`${o?"cursor-pointer":"cursor-help"}`,children:t}),s&&n.jsxs("div",{className:`absolute left-1/2 transform -translate-x-1/2 z-50 ${r?"top-full mt-1":"bottom-full mb-1"}`,children:[n.jsx("div",{className:"px-2 py-1 text-xs bg-gray-900 text-white rounded shadow-lg whitespace-nowrap",children:e}),n.jsx("div",{className:`absolute left-1/2 transform -translate-x-1/2 border-4 border-transparent ${r?"bottom-full border-b-gray-900":"top-full border-t-gray-900"}`})]})]})}function Hi({rows:e,columns:t,editMode:r,isSharedView:s=!1,hideShareButton:a=!1,onUpdateRow:o,onDeleteRow:i,onReorderRows:l,onReorderColumns:c,onDeleteColumn:d,onSelectRowForImage:p,onShowCustomization:u,onOptimizeRoute:m,onShareTable:f,onSavedLinks:b,isAuthenticated:x=!1,isLoading:g=!1,isFiltered:v=!1,searchTerm:y="",onSearchTermChange:w,filterValue:j=[],onFilterValueChange:k,deliveryFilterValue:S=[],onDeliveryFilterValueChange:A,routeOptions:O=[],deliveryOptions:M=[],onClearAllFilters:B,filteredRowsCount:U=0,totalRowsCount:_=0}){const[G,L]=h.useState(1),[Q,F]=h.useState(16),[D,V]=h.useState(!1),[z,R]=h.useState(null),[C,ee]=h.useState(null);Dt();const he=r?t:t.filter(P=>P.dataKey!=="info");h.useEffect(()=>{G>1&&L(1)},[e.length]);const ae=P=>{const E=new Date().getDay(),q=[1,3,5,0],W=[2,4,6];return P.active===!1||P.deliveryAlt==="inactive"?"inactive":P.deliveryAlt==="alt1"&&!q.includes(E)||P.deliveryAlt==="alt2"&&!W.includes(E)||s&&P.delivery==="Weekday"&&(E===5||E===6)?"off-schedule":"on-schedule"},Me=C?(()=>{const P=[...e].sort((q,W)=>{if(s||r){const te=ae(q),ne=ae(W),Be={"on-schedule":0,"off-schedule":1,inactive:2};if(Be[te]!==Be[ne])return Be[te]-Be[ne]}else{const te=q.active!==!1,ne=W.active!==!1;if(te!==ne)return te?-1:1}const re=C.direction==="asc"?1:-1;switch(C.column){case"code":{const te=q.code||"",ne=W.code||"",Be=parseInt(te)||0,se=parseInt(ne)||0;return(Be-se)*re}case"route":{const te=q.route||"",ne=W.route||"";return te.localeCompare(ne)*re}case"location":{const te=q.location||"",ne=W.location||"";return te.localeCompare(ne)*re}case"delivery":{const te=q.delivery||"",ne=W.delivery||"";return te.localeCompare(ne)*re}case"kilometer":{const te=parseFloat(q.kilometer)||0,ne=parseFloat(W.kilometer)||0;return(te-ne)*re}case"order":{const te=q.no||0,ne=W.no||0;return(te-ne)*re}default:return 0}}),E=P.findIndex(q=>q.location==="QL Kitchen"&&q.active!==!1);if(E>0){const q=P.splice(E,1)[0];P.unshift(q)}return P})():(()=>{if(s||r){const P=e.filter(W=>ae(W)==="on-schedule"),E=e.filter(W=>ae(W)==="off-schedule"),q=e.filter(W=>ae(W)==="inactive");return[...P,...E,...q]}else{const P=e.filter(q=>q.active!==!1),E=e.filter(q=>q.active===!1);return[...P,...E]}})(),rt=Me.length,Re=Math.ceil(rt/Q),Ge=(G-1)*Q,Qe=Ge+Q,Le=Me.slice(Ge,Qe),Se=P=>{F(Number(P)),L(1)},X=P=>{P!==G&&L(Math.max(1,Math.min(P,Re)))},me=P=>{if(!P.destination)return;const{source:E,destination:q,type:W}=P;if(W==="column"){const re=Array.from(t),[te]=re.splice(E.index,1);re.splice(q.index,0,te);const ne=re.map(Be=>Be.id);c.mutate(ne)}else if(W==="row"){const re=Array.from(e),[te]=re.splice(E.index,1);re.splice(q.index,0,te);const ne=re.map(Be=>Be.id);l.mutate(ne)}},Ne=P=>{const E=typeof P=="string"?parseFloat(P):P;return new Intl.NumberFormat("en-MY",{style:"currency",currency:"MYR",currencyDisplay:"symbol"}).format(E||0).replace("MYR","RM")},_e=(P,E,q)=>{var W;switch(E.dataKey){case"id":return P.id.slice(0,8).toUpperCase();case"no":return P.location==="QL Kitchen"?"":q!==void 0?((W=Le[0])==null?void 0:W.location)==="QL Kitchen"?q:q+1:P.no||0;case"route":return P.route||"";case"code":return P.code||"";case"location":return P.location||"";case"delivery":return P.delivery||"";case"alt1":return P.alt1||"";case"alt2":return P.alt2||"";case"info":return P.info||"";case"tngSite":return P.tngSite||"";case"tngRoute":if(E.type==="currency"){const ne=parseFloat(P.tngRoute||"0")||0;return Ne(ne)}return P.tngRoute||"";case"destination":if(E.type==="currency"){const ne=parseFloat(P.destination||"0")||0;return Ne(ne)}return P.destination||"";case"images":return(P.images||[]).map(ne=>typeof ne=="string"?{url:ne,caption:""}:ne);case"kilometer":const te=P.kilometer;return te===""||te===void 0||te===null?"":typeof te=="number"?te===0?"0.00 km":`${te.toFixed(2)} km`:"";default:return P[E.dataKey]||""}},We=(P,E)=>{if(P==="no")return e.reduce((q,W)=>q+(W.no||0),0);if(P==="kilometer"){const q=e.filter(jt=>jt.location!=="QL Kitchen"&&jt.latitude&&jt.longitude&&Number.isFinite(parseFloat(jt.latitude))&&Number.isFinite(parseFloat(jt.longitude)));if(q.length===0)return 0;const W=q[q.length-1],re=W.kilometer;if(typeof re!="number"||!Number.isFinite(re))return 0;const ne=[...e].find(jt=>jt.location==="QL Kitchen");if(!ne||!ne.latitude||!ne.longitude)return re;const Be=parseFloat(ne.latitude),se=parseFloat(ne.longitude);if(!Number.isFinite(Be)||!Number.isFinite(se))return re;const Je=parseFloat(W.latitude||"0"),zt=parseFloat(W.longitude||"0"),Ee=6371,Ar=(Be-Je)*(Math.PI/180),Tr=(se-zt)*(Math.PI/180),tt=Math.sin(Ar/2)*Math.sin(Ar/2)+Math.cos(Je*(Math.PI/180))*Math.cos(Be*(Math.PI/180))*Math.sin(Tr/2)*Math.sin(Tr/2),Ze=2*Math.atan2(Math.sqrt(tt),Math.sqrt(1-tt)),Jr=Ee*Ze;return re+Jr}return E==="currency"&&P==="tngRoute"?e.reduce((q,W)=>{const re=parseFloat(W.tngRoute||"0")||0;return q+re},0):E==="currency"&&P==="destination"?e.reduce((q,W)=>{const re=parseFloat(W.destination||"0")||0;return q+re},0):E==="currency"&&P==="tollPrice"?e.reduce((q,W)=>{const re=parseFloat(W.tollPrice||"0")||0;return q+re},0):0},at=P=>{const q=[...e].sort((W,re)=>{const te=W.code||"",ne=re.code||"",Be=parseInt(te)||0,se=parseInt(ne)||0;return!isNaN(Be)&&!isNaN(se)?P==="asc"?Be-se:se-Be:P==="asc"?te.localeCompare(ne):ne.localeCompare(te)}).map(W=>W.id);l.mutate(q)},Pt=P=>{const q=[...e].sort((W,re)=>{const te=W.no||0,ne=re.no||0;return P==="asc"?te-ne:ne-te}).map(W=>W.id);l.mutate(q)},ut=P=>{const q=[...e].sort((W,re)=>{const te=W.delivery||"",ne=re.delivery||"";return P==="asc"?te.localeCompare(ne):ne.localeCompare(te)}).map(W=>W.id);l.mutate(q)},nt=P=>{const q=[...e].sort((W,re)=>{const te=W.location||"",ne=re.location||"";return P==="asc"?te.localeCompare(ne):ne.localeCompare(te)}).map(W=>W.id);l.mutate(q)},K=P=>{const q=[...e].sort((W,re)=>{const te=W.route||"",ne=re.route||"";return P==="asc"?te.localeCompare(ne):ne.localeCompare(te)}).map(W=>W.id);l.mutate(q)},ie=P=>{const q=[...e].sort((W,re)=>{const te=parseFloat(W.kilometer)||0,ne=parseFloat(re.kilometer)||0;return P==="asc"?te-ne:ne-te}).map(W=>W.id);l.mutate(q)},fe=P=>{let E=null;if(!C||C.column!==P?E="asc":C.direction==="asc"?E="desc":E=null,E===null){ee(null);return}switch(ee({column:P,direction:E}),P){case"route":K(E);break;case"code":at(E);break;case"delivery":ut(E);break;case"location":nt(E);break;case"kilometer":ie(E);break;case"order":Pt(E);break}},we=P=>{R(P),V(!0)},pt=()=>{z&&(i.mutate(z),V(!1),R(null))},ot=()=>{V(!1),R(null)},er=P=>{if(!k)return;const E=j.includes(P)?j.filter(q=>q!==P):[...j,P];k(E)},lr=P=>{if(!A)return;const E=S.includes(P)?S.filter(q=>q!==P):[...S,P];A(E)};return n.jsxs("div",{className:"glass-table rounded-xl border-none shadow-2xl table-container my-10","data-testid":"data-table",children:[n.jsx("div",{className:"px-6 py-3 border-b border-border/20 bg-gradient-to-r from-blue-500/5 via-transparent to-blue-500/5 dark:from-blue-500/5 dark:via-transparent dark:to-blue-500/5 backdrop-blur-sm text-[10px]",style:{fontFamily:"system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif"},children:n.jsxs("div",{className:"flex flex-row gap-3 items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[n.jsx("span",{className:"text-sm text-muted-foreground pagination-10px",children:"Show"}),n.jsxs(En,{value:Q.toString(),onValueChange:Se,children:[n.jsx(Qr,{className:"h-6 px-2 pagination-button text-xs font-semibold [&>svg]:hidden w-auto min-w-[3rem]",children:n.jsx(Rn,{})}),n.jsxs(Yr,{className:"bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-700",children:[n.jsx(xt,{value:"16",className:"font-semibold",children:"16"}),n.jsx(xt,{value:"30",className:"font-semibold",children:"30"}),n.jsx(xt,{value:"50",className:"font-semibold",children:"50"}),n.jsx(xt,{value:"100",className:"font-semibold",children:"100"})]})]}),n.jsxs("span",{className:"text-sm text-muted-foreground pagination-10px",children:["of ",rt," entries"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(I,{onClick:u,variant:"outline",size:"sm",className:"w-8 h-8 p-0 pagination-button","data-testid":"button-show",title:"Customize columns",children:n.jsx(ju,{className:"w-3 h-3 text-blue-600 dark:text-blue-400"})}),n.jsx(I,{onClick:m,variant:"outline",size:"sm",className:"w-8 h-8 p-0 pagination-button","data-testid":"button-optimize-route",title:"Optimize delivery route with AI",children:n.jsx($s,{className:"w-3 h-3 text-blue-600 dark:text-blue-400"})}),!a&&n.jsx(I,{onClick:f,variant:"outline",size:"sm",className:"w-8 h-8 p-0 pagination-button","data-testid":"button-share-table",title:"Share current table view",children:n.jsx(gi,{className:"w-3 h-3 text-green-500 dark:text-green-400"})})]})]})}),n.jsxs("div",{className:"flex justify-between items-center px-6 py-3 border-b border-border/20 bg-background/30",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[n.jsxs(Uo,{children:[n.jsx(Go,{asChild:!0,children:n.jsxs(I,{variant:"outline",className:"h-6 px-2 pagination-button text-xs justify-start","data-testid":"sort-trigger",children:[C&&n.jsxs(n.Fragment,{children:[C.direction==="asc"?n.jsx(Mr,{className:"w-3 h-3 mr-1"}):n.jsx(Or,{className:"w-3 h-3 mr-1"}),n.jsxs("span",{className:"hidden sm:inline",children:[C.column==="route"&&"Route",C.column==="code"&&"Code",C.column==="location"&&"Location",C.column==="delivery"&&"Delivery",C.column==="kilometer"&&"Km",C.column==="order"&&"No"]}),n.jsx("span",{className:"sm:hidden",children:"Sort"})]}),!C&&n.jsxs(n.Fragment,{children:[n.jsx(dr,{className:"w-3 h-3 mr-1 opacity-50"}),n.jsx("span",{children:"Sort"})]})]})}),n.jsx(Js,{className:"w-52 p-0",align:"start",children:n.jsxs("div",{className:"p-3 btn-glass",children:[n.jsxs("h4",{className:"font-medium text-sm mb-3 pb-2 border-b border-border/20 flex items-center gap-2",children:[n.jsx(dr,{className:"w-3.5 h-3.5 text-blue-500 dark:text-blue-400"}),"Sort By"]}),n.jsxs("div",{className:"space-y-1.5 text-sm",children:[n.jsxs(I,{variant:(C==null?void 0:C.column)==="route"?"default":"ghost",size:"sm",className:`w-full justify-between text-xs ${(C==null?void 0:C.column)==="route"?"bg-blue-500 hover:bg-blue-600 text-white":""}`,onClick:()=>fe("route"),"data-testid":"button-sort-route",children:[n.jsx("span",{children:"Route"}),(C==null?void 0:C.column)==="route"&&(C.direction==="asc"?n.jsx(Mr,{className:"w-3 h-3"}):n.jsx(Or,{className:"w-3 h-3"})),(C==null?void 0:C.column)!=="route"&&n.jsx(dr,{className:"w-3 h-3 opacity-30"})]}),n.jsxs(I,{variant:(C==null?void 0:C.column)==="code"?"default":"ghost",size:"sm",className:`w-full justify-between text-xs ${(C==null?void 0:C.column)==="code"?"bg-blue-500 hover:bg-blue-600 text-white":""}`,onClick:()=>fe("code"),"data-testid":"button-sort-code",children:[n.jsx("span",{children:"Code"}),(C==null?void 0:C.column)==="code"&&(C.direction==="asc"?n.jsx(Mr,{className:"w-3 h-3"}):n.jsx(Or,{className:"w-3 h-3"})),(C==null?void 0:C.column)!=="code"&&n.jsx(dr,{className:"w-3 h-3 opacity-30"})]}),n.jsxs(I,{variant:(C==null?void 0:C.column)==="location"?"default":"ghost",size:"sm",className:`w-full justify-between text-xs ${(C==null?void 0:C.column)==="location"?"bg-blue-500 hover:bg-blue-600 text-white":""}`,onClick:()=>fe("location"),"data-testid":"button-sort-location",children:[n.jsx("span",{children:"Location"}),(C==null?void 0:C.column)==="location"&&(C.direction==="asc"?n.jsx(Mr,{className:"w-3 h-3"}):n.jsx(Or,{className:"w-3 h-3"})),(C==null?void 0:C.column)!=="location"&&n.jsx(dr,{className:"w-3 h-3 opacity-30"})]}),n.jsxs(I,{variant:(C==null?void 0:C.column)==="delivery"?"default":"ghost",size:"sm",className:`w-full justify-between text-xs ${(C==null?void 0:C.column)==="delivery"?"bg-blue-500 hover:bg-blue-600 text-white":""}`,onClick:()=>fe("delivery"),"data-testid":"button-sort-delivery",children:[n.jsx("span",{children:"Delivery"}),(C==null?void 0:C.column)==="delivery"&&(C.direction==="asc"?n.jsx(Mr,{className:"w-3 h-3"}):n.jsx(Or,{className:"w-3 h-3"})),(C==null?void 0:C.column)!=="delivery"&&n.jsx(dr,{className:"w-3 h-3 opacity-30"})]}),n.jsxs(I,{variant:(C==null?void 0:C.column)==="kilometer"?"default":"ghost",size:"sm",className:`w-full justify-between text-xs ${(C==null?void 0:C.column)==="kilometer"?"bg-blue-500 hover:bg-blue-600 text-white":""}`,onClick:()=>fe("kilometer"),"data-testid":"button-sort-kilometer",children:[n.jsx("span",{children:"Kilometer"}),(C==null?void 0:C.column)==="kilometer"&&(C.direction==="asc"?n.jsx(Mr,{className:"w-3 h-3"}):n.jsx(Or,{className:"w-3 h-3"})),(C==null?void 0:C.column)!=="kilometer"&&n.jsx(dr,{className:"w-3 h-3 opacity-30"})]}),v&&n.jsxs(I,{variant:(C==null?void 0:C.column)==="order"?"default":"ghost",size:"sm",className:`w-full justify-between text-xs ${(C==null?void 0:C.column)==="order"?"bg-blue-500 hover:bg-blue-600 text-white":""}`,onClick:()=>fe("order"),"data-testid":"button-sort-order",children:[n.jsx("span",{children:"No"}),(C==null?void 0:C.column)==="order"&&(C.direction==="asc"?n.jsx(Mr,{className:"w-3 h-3"}):n.jsx(Or,{className:"w-3 h-3"})),(C==null?void 0:C.column)!=="order"&&n.jsx(dr,{className:"w-3 h-3 opacity-30"})]})]})]})})]}),n.jsx("div",{className:"w-auto",children:n.jsxs(Uo,{children:[n.jsx(Go,{asChild:!0,children:n.jsxs(I,{variant:"outline",className:"h-6 px-2 pagination-button text-xs justify-start","data-testid":"combined-filter-trigger",children:[n.jsx("span",{className:"hidden sm:inline",children:s?S.length===0?" Hide Deliveries":` ${S.length} hidden`:j.length===0&&S.length===0?" Filters":` ${j.length}   ${S.length}`}),n.jsx("span",{className:"sm:hidden",children:s?S.length===0?"":`${S.length}`:j.length===0&&S.length===0?"":`${j.length} ${S.length}`})]})}),n.jsx(Js,{className:"w-64 p-0",align:"start",children:n.jsxs("div",{className:"space-y-4 p-4 text-sm btn-glass",children:[!s&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h4",{className:"font-medium text-sm flex items-center gap-2",children:[n.jsx(Cb,{className:"w-3 h-3 text-accent"}),"Routes (",j.length," selected)"]}),j.length>0&&n.jsxs(I,{variant:"ghost",size:"sm",onClick:()=>k==null?void 0:k([]),className:"h-auto p-1 text-xs",children:[n.jsx(vt,{className:"w-3 h-3 mr-1"}),"Clear"]})]}),n.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto border rounded p-2 bg-background/50",children:O.filter(P=>P!=="WH").map(P=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(qr,{id:`route-${P}`,checked:j.includes(P),onCheckedChange:()=>er(P)}),n.jsxs(ue,{htmlFor:`route-${P}`,className:"text-xs cursor-pointer",children:[" ",P]})]},P))})]}),n.jsx("div",{className:"border-t border-border/20"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h4",{className:"font-medium text-sm flex items-center gap-2",children:[n.jsx(Is,{className:"w-3 h-3 text-orange-500"}),"Hide Deliveries (",S.length," hidden)"]}),S.length>0&&n.jsxs(I,{variant:"ghost",size:"sm",onClick:()=>A==null?void 0:A([]),className:"h-auto p-1 text-xs",children:[n.jsx(vt,{className:"w-3 h-3 mr-1"}),"Clear"]})]}),n.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto border rounded p-2 bg-background/50",children:M.map(P=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(qr,{id:`delivery-${P}`,checked:S.includes(P),onCheckedChange:()=>lr(P)}),n.jsxs(ue,{htmlFor:`delivery-${P}`,className:"peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-xs cursor-pointer font-medium",children:[" ",P]})]},P))})]})]})})]})}),(y||j.length>0||S.length>0)&&n.jsxs(I,{onClick:B,variant:"outline",size:"sm",className:"h-6 px-2 pagination-button text-xs border-destructive/30 hover:bg-destructive/10 hover:border-destructive/50","data-testid":"clear-all-filters",children:[n.jsx("span",{className:"hidden sm:inline bg-gradient-to-r from-red-600 to-rose-600 dark:from-red-400 dark:to-rose-400 bg-clip-text text-transparent",children:"Clear"}),n.jsx("span",{className:"sm:hidden bg-gradient-to-r from-red-600 to-rose-600 dark:from-red-400 dark:to-rose-400 bg-clip-text text-transparent",children:"Clear"})]})]}),n.jsx("div",{className:"flex-1 max-w-[30%] lg:max-w-md ml-auto flex items-center gap-2",children:n.jsxs("div",{className:"relative group flex-1",children:[n.jsx(Ll,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-3 h-4 text-muted-foreground group-hover:text-primary transition-colors"}),n.jsx(ke,{placeholder:"Search...",value:y,onChange:P=>w==null?void 0:w(P.target.value),className:"pl-7 pr-7 h-8 bg-transparent text-foreground placeholder:text-muted-foreground border-2 border-primary/20 hover:border-primary/30 hover:bg-transparent rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 focus-visible:ring-offset-2 focus-visible:border-primary/40 focus-visible:bg-transparent disabled:cursor-not-allowed disabled:opacity-50 transition-colors text-sm","data-testid":"search-input"}),y&&n.jsx("button",{onClick:()=>w==null?void 0:w(""),className:"absolute right-1 top-1/2 transform -translate-y-1/2 p-0.5 w-5 h-5 rounded-full hover:bg-muted/50 transition-colors flex items-center justify-center","data-testid":"clear-search","aria-label":"Clear search",children:n.jsx(vt,{className:"w-2.5 h-2.5 text-muted-foreground hover:text-foreground"})})]})})]}),(y||j.length>0||S.length>0)&&n.jsx("div",{className:"px-6 py-2 border-b border-border/20 bg-gradient-to-r from-blue-500/5 via-transparent to-blue-500/5 dark:from-blue-500/5 dark:via-transparent dark:to-blue-500/5",children:n.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[n.jsx("span",{className:"text-muted-foreground font-medium text-xs",children:"Active:"}),y&&n.jsxs("div",{className:"flex items-center gap-0.5 px-2 py-0.5 bg-primary/10 border border-primary/20 rounded-full text-primary text-xs",children:[n.jsx(Ll,{className:"w-2.5 h-2.5"}),n.jsxs("span",{children:['"',y,'"']}),n.jsx("button",{onClick:()=>w==null?void 0:w(""),className:"ml-0.5 p-0.5 hover:text-primary/70 flex items-center justify-center rounded-full hover:bg-primary/10","aria-label":"Remove text filter",children:n.jsx(vt,{className:"w-2.5 h-2.5"})})]}),j.map(P=>n.jsxs("div",{className:"flex items-center gap-0.5 px-2 py-0.5 bg-transparent border border-transparent rounded-full text-gray-400 text-xs",children:[n.jsx(Is,{className:"w-2.5 h-2.5"}),n.jsx("span",{children:P}),n.jsx("button",{onClick:()=>er(P),className:"ml-0.5 p-0.5 hover:text-red-600 flex items-center justify-center rounded-full hover:bg-red-500/10","aria-label":`Remove route filter: ${P}`,children:n.jsx(vt,{className:"w-2.5 h-2.5 text-red-500"})})]},P)),S.map(P=>n.jsxs("div",{className:"flex items-center gap-0.5 px-2 py-0.5 bg-transparent border border-transparent rounded-full text-gray-400 text-xs",children:[n.jsx(Is,{className:"w-2.5 h-2.5"}),n.jsx("span",{children:P}),n.jsx("button",{onClick:()=>lr(P),className:"ml-0.5 p-0.5 hover:text-red-600 flex items-center justify-center rounded-full hover:bg-red-500/10","aria-label":`Remove delivery filter: ${P}`,children:n.jsx(vt,{className:"w-2.5 h-2.5 text-red-500"})})]},P)),n.jsxs("div",{className:"ml-auto text-muted-foreground text-xs",children:[U," of ",_," results"]})]})}),n.jsx("div",{className:"overflow-x-auto w-full",children:n.jsxs(Km,{onDragEnd:me,children:[n.jsxs(np,{className:"min-w-full",children:[n.jsx(sp,{className:"table-header-glass sticky top-0 z-20 bg-white dark:bg-slate-900 border-b-2 border-yellow-400/30",children:n.jsx($o,{droppableId:"columns",direction:"horizontal",type:"column",children:P=>n.jsxs(Ls,{ref:P.innerRef,...P.droppableProps,children:[he.map((E,q)=>n.jsx(Fo,{draggableId:E.id,index:q,children:W=>n.jsx(Bo,{ref:W.innerRef,...W.draggableProps,className:"px-4 py-3 text-center table-header-footer-12px font-medium text-blue-700 dark:text-blue-300 tracking-wide border-b border-border sticky top-0 bg-white dark:bg-slate-900 shadow-sm whitespace-nowrap",style:{textAlign:"center",textDecoration:"normal",fontSize:"10px",...E.dataKey==="location"&&{minWidth:"135px"}},colSpan:E.dataKey==="location"?3:1,"data-testid":`column-header-${E.dataKey}`,children:n.jsx(dk,{column:E,dragHandleProps:W.dragHandleProps,onDelete:()=>d.mutate(E.id),isAuthenticated:x,editMode:r})})},E.id)),n.jsx(Bo,{className:"px-4 py-3 text-center table-header-footer-12px font-semibold tracking-wide border-b border-border sticky top-0 bg-white dark:bg-slate-900 shadow-sm whitespace-nowrap",style:{textAlign:"center",textDecoration:"normal",fontSize:"10px"},children:n.jsx("span",{className:"bg-gradient-to-r from-red-600 to-rose-600 dark:from-red-400 dark:to-rose-400 bg-clip-text text-transparent",children:"Actions"})}),P.placeholder]})})}),n.jsx($o,{droppableId:"rows",type:"row",children:P=>h.createElement(ap,{ref:P.innerRef,...P.droppableProps,className:"pt-2 motion-layer zoom-in",key:`page-${G}`},g?Array.from({length:Math.min(Q,5)}).map((E,q)=>n.jsxs("tr",{className:"skeleton-row fade-in-stagger odd:bg-white dark:odd:bg-gray-900/50 even:bg-blue-50/50 dark:even:bg-blue-900/20 backdrop-blur-sm hover:bg-muted/60 table-cell-unique-transition",children:[n.jsx("td",{className:"p-3 w-16",children:n.jsxs("div",{className:"flex gap-3 justify-center",children:[n.jsx("div",{className:"skeleton w-8 h-8 rounded-md bg-gradient-to-r from-gray-500/20 to-slate-500/20 animate-pulse"}),n.jsx("div",{className:"skeleton w-8 h-8 rounded-md bg-gradient-to-r from-blue-500/20 to-purple-500/20 animate-pulse",style:{animationDelay:"0.1s"}}),n.jsx("div",{className:"skeleton w-8 h-8 rounded-md bg-gradient-to-r from-green-500/20 to-blue-500/20 animate-pulse",style:{animationDelay:"0.2s"}}),n.jsx("div",{className:"skeleton w-8 h-8 rounded-md bg-gradient-to-r from-yellow-500/20 to-green-500/20 animate-pulse",style:{animationDelay:"0.3s"}}),n.jsx("div",{className:"skeleton w-8 h-8 rounded-md bg-gradient-to-r from-red-500/20 to-yellow-500/20 animate-pulse",style:{animationDelay:"0.4s"}}),n.jsx("div",{className:"skeleton w-8 h-8 rounded-md bg-gradient-to-r from-green-500/20 to-emerald-500/20 animate-pulse",style:{animationDelay:"0.5s"}})]})}),he.map(W=>n.jsx("td",{className:"p-3",colSpan:W.dataKey==="location"?3:1,children:W.dataKey==="images"?n.jsx("div",{className:"skeleton w-12 h-8 rounded mx-auto bg-gradient-to-r from-blue-400/20 to-purple-400/20 animate-pulse"}):W.dataKey==="delivery"?n.jsx("div",{className:"skeleton w-16 h-6 rounded-full mx-auto bg-gradient-to-r from-green-400/20 to-blue-400/20 animate-pulse"}):W.dataKey==="location"?n.jsx("div",{className:"skeleton w-32 h-4 mx-auto bg-gradient-to-r from-yellow-400/20 to-green-400/20 animate-pulse"}):n.jsx("div",{className:"skeleton w-20 h-4 mx-auto bg-gradient-to-r from-cyan-400/20 to-blue-400/20 animate-pulse"})},W.id))]},`skeleton-${q}`)):Le.map((E,q)=>n.jsx(Fo,{draggableId:E.id,index:q,children:(W,re)=>{var te,ne,Be;return n.jsxs(Ls,{ref:W.innerRef,...W.draggableProps,className:`table-row-glass group ${(()=>{if(s||r){const se=ae(E);return se==="inactive"?"bg-gray-100/60 dark:bg-gray-800/40 opacity-50":se==="off-schedule"?E.location==="QL Kitchen"?"bg-gradient-to-r from-gray-100/80 to-slate-100/80 dark:from-gray-800/60 dark:to-slate-800/60 opacity-60":"odd:bg-white dark:odd:bg-gray-900/50 even:bg-blue-50/50 dark:even:bg-blue-900/20 opacity-60":E.location==="QL Kitchen"?"bg-gradient-to-r from-gray-100/80 to-slate-100/80 dark:from-gray-800/60 dark:to-slate-800/60":"odd:bg-white dark:odd:bg-gray-900/50 even:bg-blue-50/50 dark:even:bg-blue-900/20"}else return E.active===!1?"bg-gray-100/60 dark:bg-gray-800/40 opacity-50":E.location==="QL Kitchen"?"bg-gradient-to-r from-gray-100/80 to-slate-100/80 dark:from-gray-800/60 dark:to-slate-800/60":"odd:bg-white dark:odd:bg-gray-900/50 even:bg-blue-50/50 dark:even:bg-blue-900/20"})()} hover:bg-blue-100/60 dark:hover:bg-blue-800/30 table-cell-unique-transition ${re.isDragging?"drag-elevate":""}`,"data-testid":`table-row-${E.id}`,children:[he.map(se=>n.jsx(Yn,{className:"p-4 align-middle [&:has([role=checkbox])]:pr-0 px-3 py-3 table-cell-10px text-center text-[12px] bg-transparent text-foreground whitespace-nowrap font-normal table-zoom-in",style:{minWidth:"100px",...se.dataKey==="location"&&{minWidth:"135px",fontSize:"10px"},...se.dataKey==="delivery"&&{minWidth:"110px",fontSize:"10px",fontWeight:"normal"},...se.dataKey==="id"&&{minWidth:"120px"},...se.dataKey==="code"&&{minWidth:"100px"},...se.dataKey==="route"&&{minWidth:"90px"},...se.dataKey==="no"&&{minWidth:"70px"},...se.dataKey==="kilometer"&&{minWidth:"80px"},...se.dataKey==="tollPrice"&&{minWidth:"90px"},...se.dataKey==="tngRoute"&&{minWidth:"90px"},...se.dataKey==="images"&&{minWidth:"120px"},...se.type==="currency"&&!se.dataKey.match(/tollPrice|tngRoute/)&&{minWidth:"100px"}},colSpan:se.dataKey==="location"?3:1,"data-testid":`cell-${E.id}-${se.dataKey}`,children:n.jsx("div",{className:"w-[98%] mx-auto text-center",children:se.dataKey==="images"?n.jsx(fk,{images:E.images,rowId:E.id,onAddImage:()=>p(E.id),editMode:r,onAccessDenied:()=>p("access-denied")}):se.dataKey==="info"?E.info&&E.info.trim()?n.jsx(Rc,{info:E.info,rowId:E.id,code:E.code,route:E.route,location:E.location,latitude:E.latitude?String(E.latitude):void 0,longitude:E.longitude?String(E.longitude):void 0,qrCode:E.qrCode||void 0,no:E.no,markerColor:E.markerColor||void 0,onUpdateRow:Je=>o.mutate({id:E.id,updates:Je}),editMode:!1,allRows:e,iconType:"info"}):n.jsx("span",{className:"text-muted-foreground",children:""}):se.dataKey==="delivery"?r&&se.isEditable==="true"?n.jsx(no,{value:_e(E,se,q),type:"select",options:M,dataKey:se.dataKey,onSave:Je=>o.mutate({id:E.id,updates:{[se.dataKey]:Je}})}):n.jsx("span",{className:"text-[9px] text-gray-500 dark:text-gray-400 font-medium",children:_e(E,se,q)||""}):se.dataKey==="id"?n.jsx("span",{className:"font-mono text-slate-600 dark:text-slate-300",style:{fontSize:"10px"},children:_e(E,se,q)}):se.dataKey==="no"&&r&&E.location!=="QL Kitchen"?n.jsx(no,{value:String(E.no||0),type:"number",dataKey:se.dataKey,onSave:Je=>o.mutate({id:E.id,updates:{no:parseInt(Je)||0}})}):r&&se.isEditable==="true"?n.jsx(no,{value:_e(E,se,q),type:se.type,options:se.options||void 0,dataKey:se.dataKey,onSave:Je=>o.mutate({id:E.id,updates:{[se.dataKey]:Je}})}):n.jsx("span",{className:"text-[9px] text-gray-500 dark:text-gray-400 font-medium",children:se.dataKey==="kilometer"?n.jsx(Zk,{content:(()=>{const Je=E.segmentDistance;return Je&&typeof Je=="number"&&Je>0?`${Je.toFixed(2)} km`:"Starting point"})(),showBelow:q===0&&q!==Le.length-1,children:n.jsx("span",{className:"cursor-help",children:_e(E,se,q)})}):_e(E,se,q)})})},se.id)),n.jsx(Yn,{className:"px-4 py-2 text-sm text-center text-foreground",style:{textAlign:"center"},children:n.jsx("div",{className:"flex flex-col items-center gap-1",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{...W.dragHandleProps,className:`p-2 rounded ${re.isDragging?"cursor-grabbing":r?"cursor-grab":"cursor-default"} text-gray-500 dark:text-gray-400 hover:text-blue-500 dark:hover:text-blue-400 transition-all`,title:r?"Drag to reorder":"","data-testid":`drag-handle-${E.id}`,children:n.jsx(ku,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex items-center gap-3 opacity-60 group-hover:opacity-100 transition-opacity",children:[r&&n.jsxs(n.Fragment,{children:[n.jsx(I,{size:"sm",variant:"ghost",className:`bg-transparent border-transparent hover:bg-transparent hover:border-transparent text-blue-400 dark:text-blue-300 hover:text-blue-500 dark:hover:text-blue-400 ${o.isPending&&((te=o.variables)==null?void 0:te.id)===E.id?"opacity-50":""}`,onClick:()=>{p(r?E.id:"access-denied")},disabled:o.isPending&&((ne=o.variables)==null?void 0:ne.id)===E.id,"data-testid":`button-add-image-${E.id}`,title:"Add image",children:n.jsx(db,{className:"w-4 h-4"})}),n.jsx(I,{size:"sm",variant:"ghost",className:`bg-transparent border-transparent hover:bg-transparent hover:border-transparent ${x?"text-blue-400 dark:text-blue-300 hover:text-blue-500 dark:hover:text-blue-400":"opacity-50 cursor-not-allowed"} ${i.isPending&&i.variables===E.id?"mutation-loading":""}`,onClick:()=>x&&we(E.id),disabled:!x||i.isPending&&i.variables===E.id,"data-testid":`button-delete-row-${E.id}`,title:x?"Delete row":"Authentication required to delete rows",children:i.isPending&&i.variables===E.id?n.jsx(Tp,{type:"particles"}):n.jsx(Eo,{className:"w-4 h-4"})})]}),n.jsx(Rc,{info:E.info||"",rowId:E.id,code:E.code,route:E.route,location:E.location,latitude:E.latitude?String(E.latitude):void 0,longitude:E.longitude?String(E.longitude):void 0,qrCode:E.qrCode||void 0,no:E.no,markerColor:E.markerColor||void 0,onUpdateRow:se=>o.mutate({id:E.id,updates:se}),editMode:r,allRows:e,iconType:r?"filetext":"info"}),r?n.jsxs(En,{value:E.deliveryAlt||"normal",onValueChange:se=>{const Je=se!=="inactive";o.mutate({id:E.id,updates:{deliveryAlt:se,active:Je}})},disabled:o.isPending&&((Be=o.variables)==null?void 0:Be.id)===E.id,children:[n.jsx(Qr,{className:`h-8 w-16 text-xs border-transparent bg-transparent ${(()=>{if(s||r){const se=ae(E);return se==="inactive"?"text-red-500 dark:text-red-400":se==="off-schedule"?"opacity-60 text-yellow-500 dark:text-yellow-400":"text-green-500 dark:text-green-400"}else return E.deliveryAlt==="inactive"?"text-red-500 dark:text-red-400":E.deliveryAlt==="alt1"||E.deliveryAlt==="alt2"?"text-yellow-500 dark:text-yellow-400":"text-green-500 dark:text-green-400"})()}`,"data-testid":`select-delivery-alt-${E.id}`,children:n.jsx(Rn,{})}),n.jsxs(Yr,{children:[n.jsx(xt,{value:"normal",children:n.jsx("span",{className:"text-green-600 dark:text-green-400",children:""})}),n.jsx(xt,{value:"alt1",children:n.jsx("span",{className:"text-yellow-600 dark:text-yellow-400",children:""})}),n.jsx(xt,{value:"alt2",children:n.jsx("span",{className:"text-yellow-600 dark:text-yellow-400",children:""})}),n.jsx(xt,{value:"inactive",children:n.jsx("span",{className:"text-red-500 dark:text-red-400",children:""})})]})]}):n.jsx(I,{size:"sm",variant:"ghost",className:`border-transparent bg-transparent hover:bg-transparent cursor-not-allowed ${(()=>{if(s||r){const se=ae(E);return se==="inactive"?"text-red-500 dark:text-red-400 hover:text-red-600 dark:hover:text-red-300":se==="off-schedule"?"opacity-40 text-yellow-500 dark:text-yellow-400 hover:text-yellow-600 dark:hover:text-yellow-500":"opacity-60 text-green-500 dark:text-green-400 hover:text-green-600 dark:hover:text-green-500"}else return E.deliveryAlt==="inactive"?"text-red-500 dark:text-red-400 hover:text-red-600 dark:hover:text-red-300":E.deliveryAlt==="alt1"||E.deliveryAlt==="alt2"?"opacity-60 text-yellow-500 dark:text-yellow-400 hover:text-yellow-600 dark:hover:text-yellow-500":"opacity-60 text-green-500 dark:text-green-400 hover:text-green-600 dark:hover:text-green-500"})()}`,disabled:!0,"data-testid":`button-toggle-active-${E.id}`,title:E.deliveryAlt==="alt1"?"Delivery Alt 1 (Mon, Wed, Fri, Sun)":E.deliveryAlt==="alt2"?"Delivery Alt 2 (Tue, Thu, Sat)":E.deliveryAlt==="inactive"?"Inactive":"Normal Delivery (Every Day)",children:n.jsx(Ib,{className:"w-4 h-4"})})]})]})})})]})}},E.id)),P.placeholder)}),n.jsx("tfoot",{children:n.jsxs(Ls,{children:[he.map((P,E)=>n.jsx(Yn,{className:"px-3 py-3 text-center table-header-footer-12px font-semibold tracking-wide border-t border-border sticky bottom-0 bg-white dark:bg-slate-900 shadow-sm whitespace-nowrap",style:{textAlign:"center",fontSize:"10px"},colSpan:P.dataKey==="location"?3:1,children:E===0?n.jsx("span",{className:"font-semibold bg-gradient-to-r from-blue-600 to-cyan-600 dark:from-blue-400 dark:to-cyan-400 bg-clip-text text-transparent",style:{fontSize:"11px"},children:"Totals"}):P.dataKey==="no"?n.jsx("span",{className:"font-semibold bg-gradient-to-r from-blue-600 to-cyan-600 dark:from-blue-400 dark:to-cyan-400 bg-clip-text text-transparent",children:""}):P.dataKey==="kilometer"?n.jsx("span",{className:"font-semibold bg-gradient-to-r from-blue-600 to-cyan-600 dark:from-blue-400 dark:to-cyan-400 bg-clip-text text-transparent",children:(()=>{const q=We("kilometer",P.type);return q>0?`${q.toFixed(2)} km`:""})()}):P.dataKey==="tngRoute"&&P.type==="currency"?n.jsx("span",{className:"font-semibold bg-gradient-to-r from-blue-600 to-cyan-600 dark:from-blue-400 dark:to-cyan-400 bg-clip-text text-transparent",children:Ne(We("tngRoute",P.type))}):P.dataKey==="tollPrice"&&P.type==="currency"?n.jsx("span",{className:"font-semibold bg-gradient-to-r from-blue-600 to-cyan-600 dark:from-blue-400 dark:to-cyan-400 bg-clip-text text-transparent",children:Ne(We("tollPrice",P.type))}):n.jsx("span",{className:"font-semibold bg-gradient-to-r from-blue-600 to-cyan-600 dark:from-blue-400 dark:to-cyan-400 bg-clip-text text-transparent",children:""})},P.id)),n.jsx(Yn,{className:"px-3 py-3 text-center table-header-footer-12px font-semibold tracking-wide border-t border-border sticky bottom-0 bg-white dark:bg-slate-900 shadow-sm text-foreground whitespace-nowrap",style:{textAlign:"center",fontSize:"10px"},children:n.jsx("span",{className:"font-semibold bg-gradient-to-r from-blue-600 to-cyan-600 dark:from-blue-400 dark:to-cyan-400 bg-clip-text text-transparent",children:""})})]})})]}),n.jsxs("div",{className:"flex flex-col items-center gap-2 px-4 py-2 border-t border-blue-200 dark:border-blue-500/20 transition-smooth-fast",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[G>3&&n.jsx(I,{variant:"outline",size:"xs",onClick:()=>X(1),className:"pagination-button","data-testid":"button-first-page",children:n.jsx(ib,{className:"h-3 w-3"})}),n.jsx("div",{className:"flex items-center gap-1",children:(()=>{if(Re<=6){const re=[];for(let te=1;te<=Re;te++)re.push(te);return re.map(te=>{const ne=te===G;return n.jsx(I,{variant:"outline",size:"xs",onClick:()=>X(te),className:`pagination-button page-number ${ne?"active":""}`,"data-testid":`button-page-${te}`,children:te},te)})}let E=Math.max(1,G-3),q=Math.min(Re,E+6-1);q-E<5&&(E=Math.max(1,q-6+1));const W=[];for(let re=E;re<=q;re++)W.push(re);return W.map(re=>{const te=re===G;return n.jsx(I,{variant:"outline",size:"xs",onClick:()=>X(re),className:`pagination-button page-number ${te?"active":""}`,"data-testid":`button-page-${re}`,children:re},re)})})()}),Re-G>=3&&n.jsx(I,{variant:"outline",size:"xs",onClick:()=>X(Re),className:"pagination-button","data-testid":"button-last-page",children:n.jsx(lb,{className:"h-3 w-3"})})]}),n.jsxs("div",{className:"text-[10px] font-medium text-muted-foreground whitespace-nowrap",children:[G," of ",Re]})]})]})}),n.jsx(Fe,{open:D,onOpenChange:V,children:n.jsxs(Te,{className:"sm:max-w-[425px] transition-smooth-fast",children:[n.jsxs(Ie,{children:[n.jsx(Oe,{children:"Confirm Deletion"}),n.jsx(qe,{children:"Are you sure you want to delete this row? This action cannot be undone."})]}),n.jsxs(He,{children:[n.jsx(I,{variant:"outline",onClick:ot,"data-testid":"button-cancel-delete",children:"Cancel"}),n.jsx(I,{variant:"destructive",onClick:pt,"data-testid":"button-confirm-delete",children:"Delete"})]})]})})]})}const ka=h.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:J("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));ka.displayName="Card";const Ip=h.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:J("flex flex-col space-y-1.5 p-6",e),...t}));Ip.displayName="CardHeader";const Op=h.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:J("text-2xl font-semibold leading-none tracking-tight",e),...t}));Op.displayName="CardTitle";const eN=h.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:J("text-sm text-muted-foreground",e),...t}));eN.displayName="CardDescription";const Na=h.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:J("p-6 pt-0",e),...t}));Na.displayName="CardContent";const tN=h.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:J("flex items-center p-6 pt-0",e),...t}));tN.displayName="CardFooter";const Zs=h.forwardRef(({className:e,...t},r)=>n.jsx("textarea",{className:J("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));Zs.displayName="Textarea";var Ki="Radio",[rN,Mp]=Jt(Ki),[nN,sN]=rN(Ki),Lp=h.forwardRef((e,t)=>{const{__scopeRadio:r,name:s,checked:a=!1,required:o,disabled:i,value:l="on",onCheck:c,form:d,...p}=e,[u,m]=h.useState(null),f=ct(t,g=>m(g)),b=h.useRef(!1),x=u?d||!!u.closest("form"):!0;return n.jsxs(nN,{scope:r,checked:a,disabled:i,children:[n.jsx($e.button,{type:"button",role:"radio","aria-checked":a,"data-state":zp(a),"data-disabled":i?"":void 0,disabled:i,value:l,...p,ref:f,onClick:xe(e.onClick,g=>{a||c==null||c(),x&&(b.current=g.isPropagationStopped(),b.current||g.stopPropagation())})}),x&&n.jsx(aN,{control:u,bubbles:!b.current,name:s,value:l,checked:a,required:o,disabled:i,form:d,style:{transform:"translateX(-100%)"}})]})});Lp.displayName=Ki;var _p="RadioIndicator",Fp=h.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:s,...a}=e,o=sN(_p,r);return n.jsx(Wt,{present:s||o.checked,children:n.jsx($e.span,{"data-state":zp(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t})})});Fp.displayName=_p;var aN=e=>{const{control:t,checked:r,bubbles:s=!0,...a}=e,o=h.useRef(null),i=ti(r),l=ri(t);return h.useEffect(()=>{const c=o.current,d=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(d,"checked").set;if(i!==r&&u){const m=new Event("click",{bubbles:s});u.call(c,r),c.dispatchEvent(m)}},[i,r,s]),n.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:o,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function zp(e){return e?"checked":"unchecked"}var oN=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Qi="RadioGroup",[iN,uC]=Jt(Qi,[sa,Mp]),$p=sa(),Bp=Mp(),[lN,cN]=iN(Qi),Up=h.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:s,defaultValue:a,value:o,required:i=!1,disabled:l=!1,orientation:c,dir:d,loop:p=!0,onValueChange:u,...m}=e,f=$p(r),b=ni(d),[x,g]=Tn({prop:o,defaultProp:a,onChange:u});return n.jsx(lN,{scope:r,name:s,required:i,disabled:l,value:x,onValueChange:g,children:n.jsx(dd,{asChild:!0,...f,orientation:c,dir:b,loop:p,children:n.jsx($e.div,{role:"radiogroup","aria-required":i,"aria-orientation":c,"data-disabled":l?"":void 0,dir:b,...m,ref:t})})})});Up.displayName=Qi;var Gp="RadioGroupItem",Vp=h.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:s,...a}=e,o=cN(Gp,r),i=o.disabled||s,l=$p(r),c=Bp(r),d=h.useRef(null),p=ct(t,d),u=o.value===a.value,m=h.useRef(!1);return h.useEffect(()=>{const f=x=>{oN.includes(x.key)&&(m.current=!0)},b=()=>m.current=!1;return document.addEventListener("keydown",f),document.addEventListener("keyup",b),()=>{document.removeEventListener("keydown",f),document.removeEventListener("keyup",b)}},[]),n.jsx(ud,{asChild:!0,...l,focusable:!i,active:u,children:n.jsx(Lp,{disabled:i,required:o.required,checked:u,...c,...a,name:o.name,ref:p,onCheck:()=>o.onValueChange(a.value),onKeyDown:xe(f=>{f.key==="Enter"&&f.preventDefault()}),onFocus:xe(a.onFocus,()=>{var f;m.current&&((f=d.current)==null||f.click())})})})});Vp.displayName=Gp;var dN="RadioGroupIndicator",qp=h.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...s}=e,a=Bp(r);return n.jsx(Fp,{...a,...s,ref:t})});qp.displayName=dN;var Wp=Up,Hp=Vp,uN=qp;const on=h.forwardRef(({className:e,...t},r)=>n.jsx(Wp,{className:J("grid gap-2",e),...t,ref:r}));on.displayName=Wp.displayName;const Mt=h.forwardRef(({className:e,...t},r)=>n.jsx(Hp,{ref:r,className:J("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(uN,{className:"flex items-center justify-center",children:n.jsx(yu,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Mt.displayName=Hp.displayName;var Yi="Tabs",[mN,mC]=Jt(Yi,[sa]),Kp=sa(),[pN,Xi]=mN(Yi),Qp=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,onValueChange:a,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:c="automatic",...d}=e,p=ni(l),[u,m]=Tn({prop:s,onChange:a,defaultProp:o});return n.jsx(pN,{scope:r,baseId:cd(),value:u,onValueChange:m,orientation:i,dir:p,activationMode:c,children:n.jsx($e.div,{dir:p,"data-orientation":i,...d,ref:t})})});Qp.displayName=Yi;var Yp="TabsList",Xp=h.forwardRef((e,t)=>{const{__scopeTabs:r,loop:s=!0,...a}=e,o=Xi(Yp,r),i=Kp(r);return n.jsx(dd,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:s,children:n.jsx($e.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:t})})});Xp.displayName=Yp;var Jp="TabsTrigger",Zp=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,disabled:a=!1,...o}=e,i=Xi(Jp,r),l=Kp(r),c=rh(i.baseId,s),d=nh(i.baseId,s),p=s===i.value;return n.jsx(ud,{asChild:!0,...l,focusable:!a,active:p,children:n.jsx($e.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":d,"data-state":p?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...o,ref:t,onMouseDown:xe(e.onMouseDown,u=>{!a&&u.button===0&&u.ctrlKey===!1?i.onValueChange(s):u.preventDefault()}),onKeyDown:xe(e.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&i.onValueChange(s)}),onFocus:xe(e.onFocus,()=>{const u=i.activationMode!=="manual";!p&&!a&&u&&i.onValueChange(s)})})})});Zp.displayName=Jp;var eh="TabsContent",th=h.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,forceMount:a,children:o,...i}=e,l=Xi(eh,r),c=rh(l.baseId,s),d=nh(l.baseId,s),p=s===l.value,u=h.useRef(p);return h.useEffect(()=>{const m=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(m)},[]),n.jsx(Wt,{present:a||p,children:({present:m})=>n.jsx($e.div,{"data-state":p?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:m&&o})})});th.displayName=eh;function rh(e,t){return`${e}-trigger-${t}`}function nh(e,t){return`${e}-content-${t}`}var hN=Qp,sh=Xp,ah=Zp,oh=th;const fN=hN,ih=h.forwardRef(({className:e,...t},r)=>n.jsx(sh,{ref:r,className:J("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));ih.displayName=sh.displayName;const Vo=h.forwardRef(({className:e,...t},r)=>n.jsx(ah,{ref:r,className:J("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Vo.displayName=ah.displayName;const qo=h.forwardRef(({className:e,...t},r)=>n.jsx(oh,{ref:r,className:J("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));qo.displayName=oh.displayName;function lh({open:e,onOpenChange:t,onSave:r,onSaveMultiple:s}){const[a,o]=h.useState("single"),[i,l]=h.useState("image"),[c,d]=h.useState("url"),[p,u]=h.useState(""),[m,f]=h.useState(""),[b,x]=h.useState(""),[g,v]=h.useState([]),[y,w]=h.useState(""),[j,k]=h.useState(!1),S=h.useRef(null),{toast:A}=Dt(),O=D=>D.includes("youtube.com")||D.includes("youtu.be")?"youtube":D.includes("vimeo.com")?"vimeo":D.includes(".mp4")||D.includes(".webm")||D.includes(".ogg")?"direct":"unknown",M=D=>new Promise((V,z)=>{const R=new FileReader;R.onload=()=>V(R.result),R.onerror=z,R.readAsDataURL(D)}),B=async D=>{const V=D.target.files;if(!(!V||V.length===0)){k(!0);try{if(a==="single"){const z=V[0],R=await M(z),C=R.includes("data:")?R.replace(/^data:([^;]+)/,`data:${z.type}`):R;u(C),z.type.startsWith("video/")?l("video"):l("image"),A({title:"File Loaded",description:`${z.name} (${(z.size/1024/1024).toFixed(2)} MB)`})}else{const z=[];for(const R of Array.from(V)){const C=await M(R),ee=R.type.startsWith("video/")?"video":"image",he=C.includes("data:")?C.replace(/^data:([^;]+)/,`data:${R.type}`):C;z.push({url:he,caption:R.name,type:ee,mimeType:R.type})}v([...g,...z]),A({title:"Files Loaded",description:`${V.length} file(s) added to album`})}}catch{A({title:"Error",description:"Failed to load file(s)",variant:"destructive"})}finally{k(!1),S.current&&(S.current.value="")}}},U=()=>{if(a==="single"){if(!p.trim())return;const D=z=>{if(z.startsWith("data:")){const R=z.match(/^data:([^;]+)/);return R?R[1]:void 0}},V={url:p.trim(),caption:m.trim(),type:i,...i==="video"&&b.trim()&&{thumbnail:b.trim()},...D(p)&&{mimeType:D(p)}};r(V)}else{if(g.length===0)return;s==null||s(g)}Q()},_=()=>{if(!p.trim())return;const D={url:p.trim(),caption:m.trim(),type:i,...i==="video"&&b.trim()&&{thumbnail:b.trim()}};v([...g,D]),u(""),f(""),x("")},G=D=>{v(g.filter((V,z)=>z!==D))},L=()=>{const V=y.split(`
`).filter(z=>z.trim()).map(z=>({url:z.trim(),caption:"",type:i}));v([...g,...V]),w("")},Q=()=>{u(""),f(""),x(""),l("image"),v([]),w(""),o("single"),d("url"),k(!1),t(!1)},F=()=>{Q()};return n.jsx(Fe,{open:e,onOpenChange:t,children:n.jsxs(Te,{className:"max-w-3m max-h-[90vh] flex flex-col bg-white/95 dark:bg-black/95 backdrop-blur-xl border border-gray-200 dark:border-white/10 shadow-2xl rounded-xl",children:[n.jsxs(Ie,{className:"flex-shrink-0 text-center",children:[n.jsxs(Oe,{className:"flex items-center justify-center gap-2 text-center text-sm font-semibold",children:[a==="single"?n.jsx(_l,{className:"w-5 h-5"}):n.jsx(za,{className:"w-5 h-5"}),a==="single"?"Add Media":"Add Album"]}),n.jsx(qe,{className:"text-center text-muted-foreground text-sm mt-2",children:a==="single"?"Upload an image or video to the gallery":"Create an album with multiple media items"})]}),n.jsx("div",{className:"mt-6 space-y-6 overflow-y-auto flex-1 pr-2 px-2",children:n.jsxs("div",{className:"bg-gray-50 dark:bg-black/50 backdrop-blur-sm border border-gray-200 dark:border-white/15 rounded-lg p-4",children:[n.jsx(ue,{className:"text-sm font-medium text-foreground/90 mb-3 block",children:" Upload Mode"}),n.jsxs(fN,{value:a,onValueChange:D=>o(D),className:"w-full",children:[n.jsxs(ih,{className:"grid w-full grid-cols-2 bg-gray-100 dark:bg-white/5",children:[n.jsxs(Vo,{value:"single",className:"flex items-center gap-2",children:[n.jsx(bb,{className:"w-4 h-4"}),"Single"]}),n.jsxs(Vo,{value:"album",className:"flex items-center gap-2",children:[n.jsx(za,{className:"w-4 h-4"}),"Album"]})]}),n.jsx(qo,{value:"single",className:"mt-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx(ue,{className:"text-sm font-medium text-foreground/90",children:" Upload Method"}),n.jsxs(on,{value:c,onValueChange:D=>{d(D),u("")},className:"flex gap-6",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Mt,{value:"url",id:"method-url"}),n.jsx(ue,{htmlFor:"method-url",className:"flex items-center gap-2 cursor-pointer",children:" URL"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Mt,{value:"file",id:"method-file"}),n.jsxs(ue,{htmlFor:"method-file",className:"flex items-center gap-2 cursor-pointer",children:[n.jsx(Fa,{className:"w-4 h-4 text-green-400"}),"Upload from Gallery"]})]})]})]}),c==="url"&&n.jsxs("div",{className:"space-y-3",children:[n.jsx(ue,{className:"text-sm font-medium text-foreground/90",children:" Media Type"}),n.jsxs(on,{value:i,onValueChange:D=>l(D),className:"flex gap-6",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Mt,{value:"image",id:"image"}),n.jsxs(ue,{htmlFor:"image",className:"flex items-center gap-2 cursor-pointer",children:[n.jsx(rn,{className:"w-4 h-4 text-blue-400"}),"Image"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Mt,{value:"video",id:"video"}),n.jsxs(ue,{htmlFor:"video",className:"flex items-center gap-2 cursor-pointer",children:[n.jsx(Ro,{className:"w-4 h-4 text-purple-400"}),"Video"]})]})]})]}),c==="file"?n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{className:"text-sm font-medium text-foreground/90",children:" Select File"}),n.jsx("input",{ref:S,type:"file",accept:"image/*,video/*",onChange:B,className:"hidden"}),n.jsxs(I,{type:"button",onClick:()=>{var D;return(D=S.current)==null?void 0:D.click()},disabled:j,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white",children:[n.jsx(Fa,{className:"w-4 h-4 mr-2"}),j?"Processing...":"Choose from Gallery"]}),p&&n.jsx("div",{className:"mt-3 p-3 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-500/30 rounded-lg",children:n.jsx("p",{className:"text-xs text-green-700 dark:text-green-300",children:' File loaded successfully! Add caption below and click "Add" to save.'})})]}):n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ue,{htmlFor:"url",className:"text-sm font-medium text-foreground/90",children:[" ",i==="video"?"Video URL":"Image URL"]}),n.jsx(ke,{id:"url",type:"url",placeholder:i==="video"?"YouTube, Vimeo, or direct video URL...":"https://example.com/image.jpg",value:p,onChange:D=>u(D.target.value),className:"bg-white dark:bg-black/60 border-gray-300 dark:border-white/20 backdrop-blur-sm text-sm"}),i==="video"&&p&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:[" Detected: ",O(p)," video"]})]}),i==="video"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"thumbnail",className:"text-sm font-medium text-foreground/90",children:" Thumbnail URL (optional)"}),n.jsx(ke,{id:"thumbnail",type:"url",placeholder:"https://example.com/thumbnail.jpg",value:b,onChange:D=>x(D.target.value),className:"bg-white dark:bg-black/60 border-gray-300 dark:border-white/20 backdrop-blur-sm text-sm"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"caption",className:"text-sm font-medium text-foreground/90",children:" Caption (optional)"}),n.jsx(Zs,{id:"caption",placeholder:"Enter a caption or description...",value:m,onChange:D=>f(D.target.value),rows:2,className:"bg-white dark:bg-black/60 border-gray-300 dark:border-white/20 backdrop-blur-sm text-sm"})]})]})}),n.jsx(qo,{value:"album",className:"mt-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-green-50 dark:bg-black/20 backdrop-blur-sm border border-green-200 dark:border-white/10 rounded-lg p-3",children:[n.jsx(ue,{className:"text-sm font-medium text-foreground/90 mb-2 block",children:" Upload from Gallery"}),n.jsx("input",{type:"file",accept:"image/*,video/*",multiple:!0,onChange:B,className:"hidden",id:"album-file-input"}),n.jsxs(I,{type:"button",onClick:()=>{var D;return(D=document.getElementById("album-file-input"))==null?void 0:D.click()},disabled:j,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white",children:[n.jsx(Fa,{className:"w-4 h-4 mr-2"}),j?"Processing...":"Select Multiple Files"]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(ue,{className:"text-sm font-medium text-foreground/90",children:" Media Type for URL Input"}),n.jsxs(on,{value:i,onValueChange:D=>l(D),className:"flex gap-6",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Mt,{value:"image",id:"album-image"}),n.jsxs(ue,{htmlFor:"album-image",className:"flex items-center gap-2 cursor-pointer",children:[n.jsx(rn,{className:"w-4 h-4 text-blue-400"}),"Images"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Mt,{value:"video",id:"album-video"}),n.jsxs(ue,{htmlFor:"album-video",className:"flex items-center gap-2 cursor-pointer",children:[n.jsx(Ro,{className:"w-4 h-4 text-purple-400"}),"Videos"]})]})]})]}),n.jsxs("div",{className:"bg-blue-50 dark:bg-black/20 backdrop-blur-sm border border-blue-200 dark:border-white/10 rounded-lg p-3",children:[n.jsx(ue,{className:"text-sm font-medium text-foreground/90 mb-2 block",children:"Add URL Item to Album"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ke,{type:"url",placeholder:i==="video"?"Video URL...":"Image URL...",value:p,onChange:D=>u(D.target.value),className:"bg-white dark:bg-black/60 border-gray-300 dark:border-white/20 backdrop-blur-sm text-sm"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ke,{placeholder:"Caption (optional)",value:m,onChange:D=>f(D.target.value),className:"flex-1 bg-white dark:bg-black/40 border-gray-300 dark:border-white/15 backdrop-blur-sm"}),n.jsx(I,{type:"button",onClick:_,disabled:!p.trim(),className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white",children:n.jsx(Rr,{className:"w-4 h-4"})})]})]})]}),n.jsxs("div",{className:"bg-purple-50 dark:bg-black/20 backdrop-blur-sm border border-purple-200 dark:border-white/10 rounded-lg p-3",children:[n.jsx(ue,{className:"text-sm font-medium text-foreground/90 mb-2 block",children:"Bulk Add URLs"}),n.jsx(Zs,{placeholder:"Paste multiple URLs (one per line)...",value:y,onChange:D=>w(D.target.value),rows:3,className:"bg-white dark:bg-black/60 border-gray-300 dark:border-white/20 backdrop-blur-sm text-sm"}),n.jsxs(I,{type:"button",onClick:L,disabled:!y.trim(),className:"mt-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white",size:"sm",children:[n.jsx(za,{className:"w-4 h-4 mr-2"}),"Add All"]})]}),g.length>0&&n.jsxs("div",{className:"bg-purple-50 dark:bg-black/20 backdrop-blur-sm border border-purple-200 dark:border-white/10 rounded-lg p-3",children:[n.jsxs(ue,{className:"text-sm font-medium text-foreground/90 mb-3 block",children:[" Album Preview (",g.length," items)"]}),n.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:g.map((D,V)=>n.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-white/5 rounded border border-purple-200 dark:border-white/10",children:[D.type==="video"?n.jsx(cb,{className:"w-4 h-4 text-purple-400 flex-shrink-0"}):n.jsx(rn,{className:"w-4 h-4 text-blue-400 flex-shrink-0"}),n.jsx("span",{className:"text-xs text-foreground/70 truncate flex-1",children:D.caption||D.url}),n.jsx(I,{type:"button",variant:"ghost",size:"sm",onClick:()=>G(V),className:"h-6 w-6 p-0 hover:bg-red-500/20",children:n.jsx(vt,{className:"w-3 h-3"})})]},V))})]})]})})]})]})}),n.jsxs(He,{className:"space-x-3 flex-shrink-0 mt-6 border-t border-gray-200 dark:border-white/15 pt-4 bg-gray-50 dark:bg-black/50 backdrop-blur-sm rounded-b-xl -mx-6 -mb-6 px-6 py-4",children:[n.jsxs(I,{variant:"outline",onClick:F,className:"border-red-600 text-red-600 hover:bg-red-50 dark:border-red-500 dark:text-red-500 dark:hover:bg-red-950/30 backdrop-blur-sm",children:[n.jsx(vt,{className:"w-4 h-4 mr-2"}),"Cancel"]}),n.jsxs(I,{onClick:U,disabled:a==="single"?!p.trim():g.length===0,className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white border-0 shadow-lg shadow-blue-500/30",children:[n.jsx(_l,{className:"w-4 h-4 mr-2"}),a==="single"?`Add ${i==="video"?"Video":"Image"}`:`Add Album (${g.length} items)`]})]})]})})}function gN({rowId:e,location:t,onClose:r,onAddImage:s}){const[a,o]=h.useState(!1),{toast:i}=Dt(),l=async d=>{try{await s.mutateAsync({rowId:e,imageUrl:d.url,caption:d.caption}),i({title:"Media Added",description:"Media has been added successfully."}),o(!1),r()}catch{i({title:"Error",description:"Failed to add media.",variant:"destructive"})}},c=async d=>{try{for(const p of d)await s.mutateAsync({rowId:e,imageUrl:p.url,caption:p.caption});i({title:"Album Added",description:`${d.length} media items have been added successfully.`}),o(!1),r()}catch{i({title:"Error",description:"Failed to add some media items.",variant:"destructive"})}};return n.jsxs(n.Fragment,{children:[n.jsx(ka,{className:"bg-card/90 backdrop-blur-xl border-2 border-border shadow-2xl rounded-xl mb-6","data-testid":"add-image-section",children:n.jsxs(Na,{className:"p-6",children:[n.jsxs("h3",{className:"font-semibold mb-6 flex items-center text-foreground text-center justify-center text-sm",children:[n.jsx(rn,{className:"w-4 h-4 mr-2 text-primary"})," Add Media to ",t||"Row"]}),n.jsxs("div",{className:"flex flex-col gap-6 items-center text-center",children:[n.jsxs("div",{className:"bg-muted/50 backdrop-blur-sm border border-border rounded-lg p-6",children:[n.jsx("p",{className:"text-muted-foreground mb-4 text-sm",children:" Add images or videos to this location"}),n.jsxs(I,{onClick:()=>o(!0),className:"bg-green-500 hover:bg-green-600 text-white","data-testid":"button-open-media-upload",children:[n.jsx(Rr,{className:"w-4 h-4 mr-2"}),"Add Media"]})]}),n.jsx("div",{className:"flex gap-3",children:n.jsx(I,{variant:"outline",onClick:r,"data-testid":"button-cancel",children:"Cancel"})})]})]})}),n.jsx(lh,{open:a,onOpenChange:o,onSave:l,onSaveMultiple:c})]})}function bN({rowId:e,images:t,location:r,onClose:s,onAddImage:a,onUpdateImage:o,onDeleteImage:i}){const[l,c]=h.useState("add"),[d,p]=h.useState(0),[u,m]=h.useState(""),[f,b]=h.useState(""),[x,g]=h.useState(!1),[v,y]=h.useState("single"),[w,j]=h.useState(!1),{toast:k}=Dt(),S=F=>/\.(jpg|jpeg|png|gif|webp)(\?.*)?$/i.test(F)||F.includes("unsplash.com")||F.includes("images.unsplash.com"),A=async F=>{try{await a.mutateAsync({rowId:e,imageUrl:F.url,caption:F.caption}),k({title:"Media Added",description:"Media has been added successfully."}),j(!1)}catch{k({title:"Error",description:"Failed to add media.",variant:"destructive"})}},O=async F=>{try{for(const D of F)await a.mutateAsync({rowId:e,imageUrl:D.url,caption:D.caption});k({title:"Album Added",description:`${F.length} media items have been added successfully.`}),j(!1)}catch{k({title:"Error",description:"Failed to add some media items.",variant:"destructive"})}},M=F=>{var D,V,z;if(F==="add"){j(!0);return}c(F),F==="edit"&&t.length>0?(b(((D=t[d])==null?void 0:D.caption)||""),m("")):F==="replace"&&t.length>0?(m(((V=t[d])==null?void 0:V.url)||""),b(((z=t[d])==null?void 0:z.caption)||"")):(m(""),b(""))},B=F=>{var V,z,R;const D=parseInt(F);p(D),l==="edit"?(b(((V=t[D])==null?void 0:V.caption)||""),m("")):l==="replace"&&(m(((z=t[D])==null?void 0:z.url)||""),b(((R=t[D])==null?void 0:R.caption)||""))},U=async()=>{if(l==="add"){if(!u.trim()){k({title:"Error",description:"Please enter an image URL.",variant:"destructive"});return}if(!S(u)){k({title:"Error",description:"Please enter a valid image URL.",variant:"destructive"});return}try{await a.mutateAsync({rowId:e,imageUrl:u,caption:f.trim()}),k({title:"Image Added",description:"Image has been added successfully."}),m(""),b("")}catch{k({title:"Error",description:"Failed to add image.",variant:"destructive"})}}else if(l==="edit")try{await o.mutateAsync({rowId:e,imageIndex:d,caption:f.trim()}),k({title:"Caption Updated",description:"Image caption has been updated successfully."})}catch{k({title:"Error",description:"Failed to update caption.",variant:"destructive"})}else if(l==="replace"){if(!u.trim()){k({title:"Error",description:"Please enter an image URL.",variant:"destructive"});return}if(!S(u)){k({title:"Error",description:"Please enter a valid image URL.",variant:"destructive"});return}try{await o.mutateAsync({rowId:e,imageIndex:d,imageUrl:u,caption:f.trim()}),k({title:"Image Replaced",description:"Image has been replaced successfully."})}catch{k({title:"Error",description:"Failed to replace image.",variant:"destructive"})}}},_=F=>{y(F),g(!0)},G=async()=>{try{v==="all"?(await i.mutateAsync({rowId:e}),k({title:"All Images Deleted",description:"All images have been deleted successfully."}),s()):(await i.mutateAsync({rowId:e,imageIndex:d}),k({title:"Image Deleted",description:"Image has been deleted successfully."}),t.length<=1&&s()),g(!1)}catch{k({title:"Error",description:"Failed to delete image(s).",variant:"destructive"})}},L=a.isPending||o.isPending||i.isPending,Q=(()=>{var F,D;if(l==="add")return u.trim().length>0;if(l==="edit"){const V=((F=t[d])==null?void 0:F.caption)||"";return f!==V}else if(l==="replace"){const V=((D=t[d])==null?void 0:D.url)||"";return u!==V}return!1})();return n.jsxs(n.Fragment,{children:[n.jsx(Fe,{open:!0,onOpenChange:F=>!F&&s(),children:n.jsxs(Te,{className:"w-[90vw] max-w-[600px] max-h-[90vh] overflow-y-auto animate-in zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:zoom-out-90 duration-300 transition-all bg-white/70 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-200/60 dark:border-white/10 shadow-[0_20px_60px_0_rgba(0,0,0,0.25)] rounded-3xl",children:[n.jsx("div",{className:"absolute inset-0 -z-10 rounded-3xl bg-gradient-to-br from-white/60 via-white/40 to-white/50 dark:from-black/40 dark:via-black/20 dark:to-black/30 backdrop-blur-3xl border-0 shadow-inner"}),n.jsx(Ie,{className:"relative z-10",children:n.jsxs(Oe,{className:"text-xs font-semibold flex items-center justify-center gap-2",children:[n.jsx(rn,{className:"w-4 h-4 text-blue-400"})," Manage Media for ",r||"Row"]})}),n.jsxs("div",{className:"relative z-10 flex flex-col gap-4 py-4",children:[n.jsxs("div",{className:"bg-white/40 dark:bg-slate-800/40 backdrop-blur-sm border border-blue-400/20 dark:border-blue-500/20 rounded-lg p-3",children:[n.jsx("label",{className:"text-xs font-medium text-foreground/90 mb-2 block",children:" Action:"}),n.jsxs(En,{value:l,onValueChange:M,children:[n.jsx(Qr,{className:"bg-white/60 dark:bg-slate-700/60 backdrop-blur-sm border-blue-400/30 dark:border-blue-500/30 text-xs",children:n.jsx(Rn,{})}),n.jsxs(Yr,{children:[n.jsx(xt,{value:"add",children:" Add New Media"}),t.length>0&&n.jsx(xt,{value:"edit",children:" Edit Caption"}),t.length>0&&n.jsx(xt,{value:"replace",children:" Replace Media"})]})]})]}),(l==="edit"||l==="replace")&&t.length>1&&n.jsxs("div",{className:"bg-white/40 dark:bg-slate-800/40 backdrop-blur-sm border border-blue-400/20 dark:border-blue-500/20 rounded-lg p-3",children:[n.jsx("label",{className:"text-xs font-medium text-foreground/90 mb-2 block",children:" Select Media:"}),n.jsxs(En,{value:d.toString(),onValueChange:B,children:[n.jsx(Qr,{className:"bg-white/60 dark:bg-slate-700/60 backdrop-blur-sm border-blue-400/30 dark:border-blue-500/30 text-xs",children:n.jsx(Rn,{})}),n.jsx(Yr,{children:t.map((F,D)=>n.jsxs(xt,{value:D.toString(),children:[F.type==="video"?"":""," Item ",D+1," ",F.caption?`- ${F.caption}`:""]},D))})]})]}),(l==="edit"||l==="replace")&&t[d]&&n.jsxs("div",{className:"bg-white/40 dark:bg-slate-800/40 backdrop-blur-sm border border-blue-400/20 dark:border-blue-500/20 rounded-lg p-3",children:[n.jsxs("label",{className:"text-xs font-medium text-foreground/90 mb-2 block",children:[" Current ",t[d].type==="video"?"Video":"Image",":"]}),t[d].type==="video"?n.jsxs("div",{className:"relative",children:[n.jsx("video",{src:t[d].url,className:"w-32 h-24 object-cover border border-white/20 rounded-lg",controls:!1,poster:t[d].thumbnail}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 rounded-lg",children:n.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:n.jsx("div",{className:"w-0 h-0 border-l-[6px] border-l-white border-y-[4px] border-y-transparent ml-1"})})})]}):n.jsx("img",{src:t[d].url,alt:t[d].caption||"Current image",className:"w-32 h-24 object-cover border border-white/20 rounded-lg"})]}),(l==="add"||l==="replace")&&n.jsxs("div",{className:"bg-white/40 dark:bg-slate-800/40 backdrop-blur-sm border border-blue-400/20 dark:border-blue-500/20 rounded-lg p-3",children:[n.jsxs("label",{className:"text-xs font-medium text-foreground/90 mb-2 block",children:[" ",l==="add"?"Media URL:":"New Media URL:"]}),n.jsx(ke,{type:"url",placeholder:"Image, video, YouTube, or Vimeo URL...",value:u,onChange:F=>m(F.target.value),className:"bg-white/60 dark:bg-slate-700/60 backdrop-blur-sm border-blue-400/30 dark:border-blue-500/30 w-full text-xs","data-testid":"input-image-url"}),u&&!S(u)&&n.jsx("p",{className:"text-amber-400 text-xs mt-2",children:" This looks like a video URL. For best compatibility, use direct image formats: jpg, png, gif, webp"})]}),n.jsxs("div",{className:"bg-white/40 dark:bg-slate-800/40 backdrop-blur-sm border border-blue-400/20 dark:border-blue-500/20 rounded-lg p-3",children:[n.jsx("label",{className:"text-xs font-medium text-foreground/90 mb-2 block",children:" Caption:"}),n.jsx(ke,{type:"text",placeholder:"Add caption (optional)...",value:f,onChange:F=>b(F.target.value),className:"bg-white/60 dark:bg-slate-700/60 backdrop-blur-sm border-blue-400/30 dark:border-blue-500/30 w-full text-xs","data-testid":"input-image-caption"})]}),t.length>0&&n.jsxs("div",{className:"bg-red-900/20 backdrop-blur-sm border border-red-500/30 rounded-lg p-3",children:[n.jsx("label",{className:"text-xs font-medium text-red-400 mb-2 block",children:" Delete Options:"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs(I,{variant:"destructive",onClick:()=>_("single"),disabled:L,className:"flex-1 bg-transparent hover:bg-red-600/20 backdrop-blur-sm border-transparent text-red-400 hover:text-red-300 text-xs","data-testid":"button-delete-single",children:[n.jsx(Eo,{className:"w-3 h-3 mr-1"}),"Delete This Item"]}),n.jsxs(I,{variant:"destructive",onClick:()=>_("all"),disabled:L,className:"flex-1 bg-transparent hover:bg-red-600/20 backdrop-blur-sm border-transparent text-red-400 hover:text-red-300 text-xs","data-testid":"button-delete-all",children:[n.jsx(Eo,{className:"w-3 h-3 mr-1"}),"Delete All Items"]})]})]})]}),n.jsxs(He,{className:"relative z-10 flex gap-2",children:[n.jsxs(I,{variant:"outline",onClick:s,className:"bg-transparent border-transparent text-red-500 hover:bg-red-500/10 backdrop-blur-sm text-xs","data-testid":"button-cancel",disabled:L,children:[n.jsx(vt,{className:"w-3 h-3 mr-1"}),"Cancel"]}),n.jsx(I,{onClick:U,disabled:L,className:`flex-1 bg-transparent backdrop-blur-sm border-transparent text-xs transition-all ${Q?"text-green-400 hover:text-green-300 hover:bg-green-600/20":"text-gray-400 dark:text-gray-500 hover:bg-gray-500/10"}`,"data-testid":"button-submit",children:L?n.jsx(Tp,{type:"triple"}):n.jsxs(n.Fragment,{children:[l==="add"&&n.jsx(Rr,{className:"w-3 h-3 mr-1"}),l==="edit"&&n.jsx(ma,{className:"w-3 h-3 mr-1"}),l==="replace"&&n.jsx(Cu,{className:"w-3 h-3 mr-1"}),l==="add"?"Add Media":l==="edit"?"Update Caption":"Replace Media"]})})]})]})}),n.jsx(Fe,{open:x,onOpenChange:g,children:n.jsxs(Te,{className:"sm:max-w-[425px] bg-white/70 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-200/60 dark:border-white/10 shadow-[0_20px_60px_0_rgba(0,0,0,0.25)] rounded-3xl",children:[n.jsx("div",{className:"absolute inset-0 -z-10 rounded-3xl bg-gradient-to-br from-white/60 via-white/40 to-white/50 dark:from-black/40 dark:via-black/20 dark:to-black/30 backdrop-blur-3xl border-0 shadow-inner"}),n.jsxs(Ie,{className:"relative z-10",children:[n.jsx(Oe,{className:"text-xs font-semibold",children:"Confirm Deletion"}),n.jsx(qe,{className:"text-xs",children:v==="all"?"Are you sure you want to delete ALL images? This action cannot be undone.":"Are you sure you want to delete this image? This action cannot be undone."})]}),n.jsxs(He,{className:"relative z-10",children:[n.jsx(I,{variant:"outline",onClick:()=>g(!1),"data-testid":"button-cancel-delete",disabled:L,className:"bg-transparent border-transparent hover:bg-gray-500/10 backdrop-blur-sm text-xs",children:"Cancel"}),n.jsx(I,{variant:"destructive",onClick:G,"data-testid":"button-confirm-delete",disabled:L,className:"bg-transparent hover:bg-red-600/20 backdrop-blur-sm border-transparent text-red-400 hover:text-red-300 text-xs",children:"Delete"})]})]})}),n.jsx(lh,{open:w,onOpenChange:j,onSave:A,onSaveMultiple:O})]})}var Ji="Switch",[xN,pC]=Jt(Ji),[vN,yN]=xN(Ji),ch=h.forwardRef((e,t)=>{const{__scopeSwitch:r,name:s,checked:a,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:d,form:p,...u}=e,[m,f]=h.useState(null),b=ct(t,w=>f(w)),x=h.useRef(!1),g=m?p||!!m.closest("form"):!0,[v=!1,y]=Tn({prop:a,defaultProp:o,onChange:d});return n.jsxs(vN,{scope:r,checked:v,disabled:l,children:[n.jsx($e.button,{type:"button",role:"switch","aria-checked":v,"aria-required":i,"data-state":mh(v),"data-disabled":l?"":void 0,disabled:l,value:c,...u,ref:b,onClick:xe(e.onClick,w=>{y(j=>!j),g&&(x.current=w.isPropagationStopped(),x.current||w.stopPropagation())})}),g&&n.jsx(wN,{control:m,bubbles:!x.current,name:s,value:c,checked:v,required:i,disabled:l,form:p,style:{transform:"translateX(-100%)"}})]})});ch.displayName=Ji;var dh="SwitchThumb",uh=h.forwardRef((e,t)=>{const{__scopeSwitch:r,...s}=e,a=yN(dh,r);return n.jsx($e.span,{"data-state":mh(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})});uh.displayName=dh;var wN=e=>{const{control:t,checked:r,bubbles:s=!0,...a}=e,o=h.useRef(null),i=ti(r),l=ri(t);return h.useEffect(()=>{const c=o.current,d=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(d,"checked").set;if(i!==r&&u){const m=new Event("click",{bubbles:s});u.call(c,r),c.dispatchEvent(m)}},[i,r,s]),n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:o,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function mh(e){return e?"checked":"unchecked"}var ph=ch,jN=uh;const Zi=h.forwardRef(({className:e,...t},r)=>n.jsx(ph,{className:J("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:n.jsx(jN,{className:J("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Zi.displayName=ph.displayName;function kN({open:e,onOpenChange:t,columns:r,visibleColumns:s,onApplyChanges:a,editMode:o=!1}){const[i,l]=h.useState([]),[c,d]=h.useState([]),p=["ID","No","Route","Code","Location","Delivery","Destination"];h.useEffect(()=>{if(r.length>0){const v=o?["longitude","latitude","tollPrice"]:["longitude","latitude","info","tollPrice"],y=r.filter(w=>!v.includes(w.dataKey)).sort((w,j)=>w.sortOrder-j.sortOrder).map(w=>({id:w.id,name:w.name,dataKey:w.dataKey,visible:s.includes(w.id),isCore:p.includes(w.name)}));l(y),d(y)}},[r,s,o]);const u=v=>{l(y=>y.map(w=>w.id===v?{...w,visible:!w.visible}:w))},m=v=>{if(!v.destination)return;const y=Array.from(i),[w]=y.splice(v.source.index,1);y.splice(v.destination.index,0,w),l(y)},f=()=>{const v=i.filter(w=>w.visible).map(w=>w.id),y=i.map(w=>w.id);a(v,y),t(!1)},b=()=>{const v=o?["longitude","latitude","tollPrice"]:["longitude","latitude","info","tollPrice"],y=r.filter(w=>!v.includes(w.dataKey)).sort((w,j)=>w.sortOrder-j.sortOrder).map(w=>({id:w.id,name:w.name,dataKey:w.dataKey,visible:!0,isCore:p.includes(w.name)}));l(y)},x=i.filter(v=>v.visible).length,g=()=>{if(i.length!==c.length)return!0;if(c.length===0)return!1;for(const w of i){const j=c.find(k=>k.id===w.id);if(!j||j.visible!==w.visible)return!0}const v=c.map(w=>w.id),y=i.map(w=>w.id);if(v.length!==y.length)return!0;for(let w=0;w<v.length;w++)if(v[w]!==y[w])return!0;return!1};return n.jsx(Fe,{open:e,onOpenChange:t,children:n.jsxs(Te,{className:"max-w-md bg-white/70 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-200/60 dark:border-white/10 shadow-[0_20px_60px_0_rgba(0,0,0,0.25)] rounded-3xl transition-smooth",children:[n.jsx("div",{className:"absolute inset-0 -z-10 rounded-3xl bg-gradient-to-br from-white/60 via-white/40 to-white/50 dark:from-black/40 dark:via-black/20 dark:to-black/30 backdrop-blur-3xl border-0 shadow-inner"}),n.jsxs(Ie,{children:[n.jsxs(Oe,{className:"text-lg font-semibold flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[n.jsx(mb,{className:"w-6 h-6"}),"Customize Columns",n.jsxs("span",{className:"text-sm text-muted-foreground font-normal",children:["(",x," of ",i.length," visible)"]})]}),n.jsx(qe,{className:"text-base",children:"Toggle column visibility and drag to reorder them in your table."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(Km,{onDragEnd:m,children:n.jsx($o,{droppableId:"column-customization",children:v=>n.jsxs("div",{...v.droppableProps,ref:v.innerRef,className:"space-y-2 max-h-80 overflow-y-auto",children:[i.map((y,w)=>n.jsx(Fo,{draggableId:y.id,index:w,children:(j,k)=>n.jsxs("div",{ref:j.innerRef,...j.draggableProps,className:`flex items-center justify-between p-3 rounded-lg border bg-muted/30 hover:bg-muted/50 transition-colors ${k.isDragging?"shadow-lg border-blue-500 dark:border-blue-400":"border-border"} ${y.visible?"":"opacity-60"}`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{...j.dragHandleProps,className:"cursor-grab active:cursor-grabbing text-muted-foreground hover:text-foreground",children:n.jsx(ku,{className:"w-4 h-4"})}),n.jsx(ue,{htmlFor:`column-${y.id}`,className:"text-sm font-medium cursor-pointer",children:y.name})]}),n.jsx(Zi,{id:`column-${y.id}`,checked:y.visible,onCheckedChange:()=>u(y.id),disabled:y.isCore&&y.visible&&x<=1,"data-testid":`switch-column-${y.dataKey}`})]})},y.id)),v.placeholder]})})}),n.jsxs("div",{className:"text-sm bg-blue-50/50 dark:bg-blue-950/30 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:[n.jsx("strong",{className:"text-blue-900 dark:text-blue-100",children:"Tip:"})," At least one column must remain visible. Core columns are recommended to stay visible for the best experience."]})]}),n.jsx(He,{className:"flex justify-center",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx(I,{variant:"outline",onClick:b,size:"sm",className:"w-8 h-8 p-0","data-testid":"button-reset-columns",title:"Reset columns",children:n.jsx(Cu,{className:"w-4 h-4"})}),n.jsx(I,{variant:"outline",onClick:()=>t(!1),size:"sm",className:"w-8 h-8 p-0","data-testid":"button-cancel-customize",title:"Cancel",children:n.jsx(vt,{className:"w-4 h-4"})}),n.jsx(I,{onClick:f,size:"sm",className:`w-8 h-8 p-0 transition-all duration-200 ${g()?"bg-transparent border border-border/50 text-green-500 hover:text-green-400 hover:bg-green-500/10":"bg-transparent border border-border/50 text-muted-foreground hover:text-foreground hover:bg-background/50"}`,"data-testid":"button-apply-customize",title:"Apply changes",children:n.jsx(ob,{className:"w-4 h-4"})})]})})]})})}function NN({open:e,onOpenChange:t,onSuccess:r,title:s,description:a}){const[o,i]=h.useState(""),[l,c]=h.useState(!1),{toast:d}=Dt(),p="Acun97",u=f=>{f.preventDefault(),o===p?(r(),t(!1),i(""),d({title:"Access Granted",description:"You now have access to restricted features."})):(d({title:"Access Denied",description:"Incorrect password. Please try again.",variant:"destructive"}),i(""))},m=()=>{i(""),t(!1)};return n.jsx(Fe,{open:e,onOpenChange:t,children:n.jsxs(Te,{className:"w-[80vw] max-w-[80vw] animate-in zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:zoom-out-90 duration-300 transition-all bg-white/70 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-200/60 dark:border-white/10 shadow-[0_20px_60px_0_rgba(0,0,0,0.25)] rounded-3xl",children:[n.jsx("div",{className:"absolute inset-0 -z-10 rounded-3xl bg-gradient-to-br from-white/60 via-white/40 to-white/50 dark:from-black/40 dark:via-black/20 dark:to-black/30 backdrop-blur-3xl border-0 shadow-inner"}),n.jsxs(Ie,{className:"relative z-10",children:[n.jsxs(Oe,{className:"flex items-center gap-2",children:[n.jsx(Nb,{className:"w-5 h-5 text-primary"}),s]}),n.jsx(qe,{className:"text-sm text-muted-foreground",children:a})]}),n.jsx("div",{className:"space-y-4 relative z-10",children:n.jsxs("form",{onSubmit:u,className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(ke,{type:l?"text":"password",placeholder:"Enter password...",value:o,onChange:f=>i(f.target.value),className:"pr-10 bg-white/10 dark:bg-black/10 backdrop-blur-sm border-transparent","data-testid":"password-input",autoFocus:!0}),n.jsx(I,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>c(!l),"data-testid":"toggle-password-visibility",children:l?n.jsx(gb,{className:"h-4 w-4"}):n.jsx(ju,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx(I,{type:"button",variant:"outline",onClick:m,className:"bg-transparent backdrop-blur-sm border-transparent text-red-500 hover:bg-red-500/10","data-testid":"cancel-password",children:"Cancel"}),n.jsx(I,{type:"submit",disabled:!o.trim(),className:"transition-all duration-200 backdrop-blur-sm border-transparent bg-transparent text-green-500 hover:bg-green-500/10 disabled:text-muted-foreground disabled:hover:bg-transparent","data-testid":"submit-password",children:"Unlock"})]})]})})]})})}function CN({onCreateColumn:e,disabled:t}){const[r,s]=h.useState(!1),[a,o]=h.useState(""),[i,l]=h.useState(""),[c,d]=h.useState("text"),[p,u]=h.useState(""),[m,f]=h.useState(!1),{toast:b}=Dt(),x=[{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"currency",label:"Currency (MYR)"},{value:"select",label:"Select Options"},{value:"images",label:"Images"}],g=async w=>{if(w.preventDefault(),!a.trim()){b({title:"Error",description:"Column name is required.",variant:"destructive"});return}if(!i.trim()){b({title:"Error",description:"Data key is required.",variant:"destructive"});return}f(!0);try{const j={name:a.trim(),dataKey:i.trim(),type:c};c==="select"&&p.trim()&&(j.options=p.split(`
`).map(k=>k.trim()).filter(k=>k.length>0)),await e(j),o(""),l(""),d("text"),u(""),s(!1),b({title:"Success",description:"Column created successfully!"})}catch(j){console.error("Error creating column:",j),b({title:"Error",description:"Failed to create column. Please try again.",variant:"destructive"})}finally{f(!1)}},v=w=>w.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_{2,}/g,"_").replace(/^_|_$/g,""),y=w=>{o(w),w&&!i&&l(v(w))};return n.jsxs(Fe,{open:r,onOpenChange:s,children:[n.jsx(Gi,{asChild:!0,children:n.jsx(I,{variant:"outline",size:"sm",className:"btn-glass w-8 h-8 p-0 pagination-button md:w-20 md:h-9 md:px-3",disabled:t,"data-testid":"button-add-column",title:"Add new field",children:n.jsx(Ol,{className:"w-4 h-4"})})}),n.jsxs(Te,{className:"max-w-md",children:[n.jsx(Ie,{children:n.jsxs(Oe,{className:"flex items-center gap-2",children:[n.jsx(Ol,{className:"w-5 h-5"}),"Add New Field"]})}),n.jsxs("form",{onSubmit:g,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"column-name",children:"Field Name"}),n.jsx(ke,{id:"column-name",placeholder:"Enter column name...",value:a,onChange:w=>y(w.target.value),"data-testid":"input-column-name",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"data-key",children:"Data Key"}),n.jsx(ke,{id:"data-key",placeholder:"data_key",value:i,onChange:w=>l(w.target.value),"data-testid":"input-data-key",required:!0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique identifier for this column (auto-generated from name)"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"column-type",children:"Column Type"}),n.jsxs(En,{value:c,onValueChange:d,children:[n.jsx(Qr,{"data-testid":"select-column-type",children:n.jsx(Rn,{placeholder:"Select column type"})}),n.jsx(Yr,{children:x.map(w=>n.jsx(xt,{value:w.value,children:w.label},w.value))})]})]}),c==="select"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"options",children:"Select Options"}),n.jsx(Zs,{id:"options",placeholder:`Enter options (one per line)
Option 1
Option 2
Option 3`,value:p,onChange:w=>u(w.target.value),"data-testid":"textarea-options",rows:4}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter each option on a new line"})]}),c==="currency"&&n.jsx("div",{className:"p-3 bg-muted rounded-md",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:" Currency columns will display values in Malaysian Ringgit (MYR) format"})}),n.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[n.jsx(I,{type:"button",variant:"outline",onClick:()=>s(!1),disabled:m,"data-testid":"button-cancel-column",children:"Cancel"}),n.jsx(I,{type:"submit",disabled:m,"data-testid":"button-create-column",children:m?"Creating...":"Create Column"})]})]})]})]})}const hh=pg,fh=hg,SN=h.forwardRef(({className:e,inset:t,children:r,...s},a)=>n.jsxs(md,{ref:a,className:J("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...s,children:[r,n.jsx(zs,{className:"ml-auto"})]}));SN.displayName=md.displayName;const EN=h.forwardRef(({className:e,...t},r)=>n.jsx(pd,{ref:r,className:J("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));EN.displayName=pd.displayName;const el=h.forwardRef(({className:e,sideOffset:t=4,...r},s)=>n.jsx(mg,{children:n.jsx(hd,{ref:s,sideOffset:t,className:J("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...r})}));el.displayName=hd.displayName;const Ct=h.forwardRef(({className:e,inset:t,...r},s)=>n.jsx(fd,{ref:s,className:J("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r}));Ct.displayName=fd.displayName;const RN=h.forwardRef(({className:e,children:t,checked:r,...s},a)=>n.jsxs(gd,{ref:a,className:J("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(bd,{children:n.jsx(Er,{className:"h-4 w-4"})})}),t]}));RN.displayName=gd.displayName;const DN=h.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(xd,{ref:s,className:J("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(bd,{children:n.jsx(yu,{className:"h-2 w-2 fill-current"})})}),t]}));DN.displayName=xd.displayName;const PN=h.forwardRef(({className:e,inset:t,...r},s)=>n.jsx(vd,{ref:s,className:J("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));PN.displayName=vd.displayName;const Wo=h.forwardRef(({className:e,...t},r)=>n.jsx(yd,{ref:r,className:J("-mx-1 my-1 h-px bg-muted",e),...t}));Wo.displayName=yd.displayName;function AN({editMode:e,onEditModeRequest:t,onShowCustomization:r,onAddRow:s,onSaveData:a,onGenerateTng:o,onAddColumn:i,onOptimizeRoute:l,onCalculateTolls:c,onSaveLayout:d,onSavedLinks:p,onShowTutorial:u,isAuthenticated:m,theme:f,onToggleTheme:b}){const[x,g]=h.useState(new Date),[,v]=oi();return h.useEffect(()=>{const y=setInterval(()=>{g(new Date)},1e3);return()=>clearInterval(y)},[]),n.jsx("nav",{className:"sticky top-0 z-50 w-full border-b border-white/20 dark:border-white/10 bg-white/30 dark:bg-black/30 backdrop-blur-2xl shadow-[0_8px_32px_0_rgba(0,0,0,0.12)]",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsxs("div",{className:"flex h-14 items-center justify-between text-[12px]",children:[n.jsx("div",{className:"flex items-center space-x-2",children:n.jsxs("div",{className:"flex items-center space-x-2 hover:opacity-80 transition-opacity",children:[n.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg overflow-hidden",children:n.jsx("img",{src:"/assets/FamilyMart.png",alt:"Logo",className:"h-full w-full object-cover"})}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300",style:{fontSize:"12px"},children:e?"Edit Mode":"Route Management"}),n.jsx("span",{className:"text-slate-500 dark:text-slate-400",style:{fontSize:"10px"},children:"All in one data informations"})]})]})}),n.jsxs(hh,{children:[n.jsx(fh,{asChild:!0,children:n.jsxs(I,{variant:"outline",size:"sm",className:"btn-glass w-8 h-8 md:w-auto md:h-9 p-0 md:px-3 pagination-button group transition-all duration-300 ease-out hover:scale-110 hover:shadow-lg hover:shadow-blue-500/20 active:scale-95 active:shadow-none","data-testid":"button-main-menu",title:"Menu",children:[n.jsx(jb,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 transition-all duration-300"}),n.jsx("span",{className:"hidden md:inline ml-2 text-xs transition-all duration-300",children:"Menu"})]})}),n.jsxs(el,{align:"end",className:"w-56 bg-white/70 dark:bg-black/70 backdrop-blur-2xl border-2 border-gray-200/60 dark:border-white/10 shadow-[0_20px_60px_0_rgba(0,0,0,0.25)] rounded-2xl",children:[n.jsxs(Ct,{onClick:p,className:"cursor-pointer","data-testid":"menu-saved-links",children:[n.jsx(bu,{className:"w-4 h-4 mr-2 text-amber-500 dark:text-amber-400"}),n.jsx("span",{style:{fontSize:"10px"},children:"Saved Links"})]}),n.jsxs(Ct,{onClick:()=>v("/custom-tables"),className:"cursor-pointer","data-testid":"menu-custom-tables",children:[n.jsx(Os,{className:"w-4 h-4 mr-2 text-purple-500 dark:text-purple-400"}),n.jsx("span",{style:{fontSize:"10px"},children:"Custom Tables"})]}),n.jsx(Ct,{onClick:b,className:"cursor-pointer","data-testid":"menu-toggle-theme",children:f==="dark"?n.jsxs(n.Fragment,{children:[n.jsx(Lb,{className:"w-4 h-4 mr-2 text-yellow-500"}),n.jsx("span",{style:{fontSize:"10px"},children:"Light Mode"})]}):n.jsxs(n.Fragment,{children:[n.jsx(Rb,{className:"w-4 h-4 mr-2 text-blue-500"}),n.jsx("span",{style:{fontSize:"10px"},children:"Dark Mode"})]})}),n.jsxs(Ct,{onClick:()=>v("/help"),className:"cursor-pointer","data-testid":"menu-help-guide",children:[n.jsx(No,{className:"w-4 h-4 mr-2 text-green-600 dark:text-green-400"}),n.jsx("span",{style:{fontSize:"10px"},children:"User Guide"})]}),n.jsx(Wo,{className:"bg-gray-200/50 dark:bg-gray-700/50"}),e?n.jsxs(n.Fragment,{children:[n.jsxs(Ct,{onClick:s,className:"cursor-pointer","data-testid":"menu-add-row",children:[n.jsx(Ob,{className:"w-4 h-4 mr-2"}),n.jsx("span",{style:{fontSize:"10px"},children:"Add Row"})]}),i&&n.jsxs(Ct,{onClick:()=>{const y=document.querySelector('[data-testid="button-add-column"]');y&&y.click()},className:"cursor-pointer","data-testid":"menu-add-column",children:[n.jsx(Rr,{className:"w-4 h-4 mr-2"}),n.jsx("span",{style:{fontSize:"10px"},children:"Add Column"})]}),n.jsx(Wo,{className:"bg-gray-200/50 dark:bg-gray-700/50"}),n.jsxs(Ct,{onClick:t,className:"cursor-pointer text-red-600 dark:text-red-400 focus:text-red-600 dark:focus:text-red-400","data-testid":"menu-exit-edit",children:[n.jsx(pb,{className:"w-4 h-4 mr-2"}),n.jsx("span",{style:{fontSize:"10px"},children:"Exit Edit Mode"})]})]}):n.jsxs(Ct,{onClick:t,className:"cursor-pointer","data-testid":"menu-enter-edit",children:[n.jsx(Mb,{className:"w-4 h-4 mr-2 text-red-900 dark:text-red-400"}),n.jsx("span",{style:{fontSize:"10px"},children:"Edit Mode"})]})]})]}),e&&i&&n.jsx("div",{className:"hidden",children:n.jsx(CN,{onCreateColumn:i,disabled:!m})})]})})})}function TN({open:e,onOpenChange:t,rows:r,selectedRowIds:s}){const[a,o]=h.useState("nearest_neighbor"),[i,l]=h.useState(!1),[c,d]=h.useState(null),{toast:p}=Dt(),u=Mn(),m=Ce({mutationFn:async()=>{const j={...s&&s.length>0?{rowIds:s}:{},algorithm:a,prioritizeDelivery:i,vehicleSpecs:{type:"lorry refrigerator 1 ton",fuelType:"diesel",tollClass:1}};return await(await ze("POST","/api/optimize-route",j)).json()},onSuccess:j=>{if(!j||!Array.isArray(j.optimizedOrder)||j.optimizedOrder.length===0){p({title:"Invalid Response",description:"The optimization response was invalid. Please try again.",variant:"destructive"});return}d(j)},onError:j=>{p({title:"Optimization Failed",description:j.message||"Failed to optimize route. Please try again.",variant:"destructive"})}}),f=Ce({mutationFn:async()=>{if(!c)return;const j=new Set(c.optimizedOrder),k=r.filter(O=>!j.has(O.id)).sort((O,M)=>O.sortOrder-M.sortOrder).map(O=>O.id),S=[...c.optimizedOrder,...k];return await(await ze("POST","/api/table-rows/reorder",{rowIds:S})).json()},onSuccess:()=>{u.invalidateQueries({queryKey:["/api/table-rows"]}),p({title:"Route Applied",description:"The optimized route has been applied successfully!"}),g()},onError:j=>{p({title:"Failed to Apply Route",description:j.message||"Failed to apply the optimized route. Please try again.",variant:"destructive"})}}),b=()=>{d(null),m.mutate()},x=()=>{f.mutate()},g=()=>{d(null),t(!1)},v=j=>{switch(j){case"nearest_neighbor":return"Fast and efficient. Best for most routes. Finds nearby stops first.";case"genetic":return"AI-powered evolution. Best for complex routes with many stops.";case"simulated_annealing":return"Balanced approach. Good for medium-sized routes with obstacles.";default:return""}},w=(s&&s.length>0?r.filter(j=>s.includes(j.id)&&j.sortOrder!==-1):r.filter(j=>j.sortOrder!==-1)).filter(j=>j.latitude&&j.longitude&&parseFloat(j.latitude)!==0&&parseFloat(j.longitude)!==0);return n.jsx(Fe,{open:e,onOpenChange:t,children:n.jsxs(Te,{className:"max-w-2m max-h-[90vh] overflow-hidden flex flex-col bg-gradient-to-br from-background/95 via-background/98 to-background dark:from-black/95 dark:via-black/98 dark:to-black border-2 border-blue-500/20 dark:border-blue-400/20 transition-smooth","data-testid":"modal-route-optimization",children:[n.jsxs(Ie,{className:"flex-shrink-0",children:[n.jsxs(Oe,{className:"text-1m font-semibold flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[n.jsx($s,{className:"w-6 h-6"}),"AI Route Optimization"]}),n.jsx(qe,{className:"text-base",children:"Optimize your delivery route to save time, fuel, and distance using advanced AI algorithms."})]}),n.jsx("div",{className:"overflow-y-auto flex-1 -mx-6 px-6",children:c?n.jsxs("div",{className:"space-y-6 mt-4",children:[n.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-950/30 dark:to-blue-950/30 p-6 rounded-lg border-2 border-green-500/30 dark:border-green-400/30",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Co,{className:"w-6 h-6 text-green-600 dark:text-green-400"}),n.jsx("h3",{className:"text-xl font-bold text-green-900 dark:text-green-100",children:"Optimization Complete!"})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-white/60 dark:bg-black/40 p-4 rounded-lg","data-testid":"stat-distance-saved",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Fb,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),n.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Distance"})]}),n.jsxs("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:["-",c.distanceSaved.toFixed(1)," km"]}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[c.optimizationFactors.distanceReduction.toFixed(1),"% reduction"]})]}),n.jsxs("div",{className:"bg-white/60 dark:bg-black/40 p-4 rounded-lg","data-testid":"stat-time-saved",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ub,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),n.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Time"})]}),n.jsxs("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:[c.timeSaved.toFixed(0)," min"]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"saved per trip"})]}),n.jsxs("div",{className:"bg-white/60 dark:bg-black/40 p-4 rounded-lg","data-testid":"stat-fuel-saved",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(hb,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),n.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Fuel"})]}),n.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[c.fuelSaved.toFixed(2)," L"]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"less consumption"})]}),n.jsxs("div",{className:"bg-white/60 dark:bg-black/40 p-4 rounded-lg","data-testid":"stat-optimized-distance",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx($s,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),n.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"New Total"})]}),n.jsxs("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[c.optimizedDistance.toFixed(1)," km"]}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["from ",c.originalDistance.toFixed(1)," km"]})]})]})]}),n.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg border",children:[n.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[n.jsx(Ba,{className:"w-4 h-4"}),"Algorithm Used"]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[c.algorithm==="nearest_neighbor"&&"Nearest Neighbor with 2-Opt optimization",c.algorithm==="genetic"&&"Genetic Algorithm with population-based evolution",c.algorithm==="simulated_annealing"&&"Simulated Annealing with probabilistic search"]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(I,{onClick:x,disabled:f.isPending,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",size:"lg","data-testid":"button-apply-optimization",children:f.isPending?n.jsxs(n.Fragment,{children:[n.jsx(So,{className:"w-4 h-4 mr-2 animate-spin"}),"Applying..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Co,{className:"w-4 h-4 mr-2"}),"Apply Optimized Route"]})}),n.jsx(I,{variant:"outline",onClick:g,disabled:f.isPending,"data-testid":"button-close",children:"Close"})]})]}):n.jsxs("div",{className:"space-y-6 mt-4",children:[n.jsx("div",{className:"bg-blue-50/50 dark:bg-blue-950/30 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ba,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-1",children:[w.length," stops ready to optimize"]}),n.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:s&&s.length>0?`Optimizing ${w.length} selected locations with valid coordinates`:`Optimizing all ${w.length} locations with valid coordinates`})]})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{className:"text-base font-semibold mb-3 block",children:"Choose Algorithm"}),n.jsxs(on,{value:a,onValueChange:j=>o(j),className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg border hover:bg-accent transition-colors","data-testid":"radio-algorithm-nearest-neighbor",children:[n.jsx(Mt,{value:"nearest_neighbor",id:"nearest_neighbor"}),n.jsxs("div",{className:"flex-1",children:[n.jsx(ue,{htmlFor:"nearest_neighbor",className:"font-medium cursor-pointer",children:"Nearest Neighbor (Recommended)"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:v("nearest_neighbor")})]})]}),n.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg border hover:bg-accent transition-colors","data-testid":"radio-algorithm-genetic",children:[n.jsx(Mt,{value:"genetic",id:"genetic"}),n.jsxs("div",{className:"flex-1",children:[n.jsx(ue,{htmlFor:"genetic",className:"font-medium cursor-pointer",children:"Genetic Algorithm (Advanced)"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:v("genetic")})]})]}),n.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg border hover:bg-accent transition-colors","data-testid":"radio-algorithm-simulated-annealing",children:[n.jsx(Mt,{value:"simulated_annealing",id:"simulated_annealing"}),n.jsxs("div",{className:"flex-1",children:[n.jsx(ue,{htmlFor:"simulated_annealing",className:"font-medium cursor-pointer",children:"Simulated Annealing"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:v("simulated_annealing")})]})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-lg border",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(ue,{htmlFor:"prioritize-delivery",className:"font-medium cursor-pointer",children:"Prioritize Delivery Grouping"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Group locations with the same delivery type together"})]}),n.jsx(Zi,{id:"prioritize-delivery",checked:i,onCheckedChange:l,"data-testid":"switch-prioritize-delivery"})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(I,{onClick:b,disabled:m.isPending||w.length<2,variant:"outline",className:"flex-1",size:"lg","data-testid":"button-optimize",children:m.isPending?n.jsxs(n.Fragment,{children:[n.jsx(So,{className:"w-4 h-4 mr-2 animate-spin"}),"Optimizing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ba,{className:"w-4 h-4 mr-2"}),"Optimize Route"]})}),n.jsx(I,{variant:"outline",onClick:g,disabled:m.isPending,className:"border-red-600 text-red-600 hover:bg-red-50 dark:border-red-500 dark:text-red-500 dark:hover:bg-red-950/30","data-testid":"button-cancel",children:"Cancel"})]})]})})]})})}function IN({open:e,onOpenChange:t,tableState:r}){const[s,a]=h.useState(""),[o,i]=h.useState(""),[l,c]=h.useState(!1),[d,p]=h.useState(!1),[u,m]=h.useState(!1),[f,b]=h.useState(!1),{toast:x}=Dt(),g=Mn(),v=async()=>{p(!0);try{const k=Math.random().toString(36).substring(2,8);if(!(await ze("POST","/api/share-table",{shareId:k,tableState:r})).ok)throw new Error("Failed to create share link");const A=`${window.location.origin}/share/${k}`;a(A),i(k),x({title:"Share link created",description:"Your table view has been saved and can now be shared."})}catch(k){console.error("Error generating share link:",k),x({title:"Error",description:"Failed to create share link. Please try again.",variant:"destructive"})}finally{p(!1)}},y=async()=>{b(!0);try{if(!(await ze("POST","/api/saved-share-links",{shareId:o,url:s,remark:""})).ok)throw new Error("Failed to save share link");m(!0),g.invalidateQueries({queryKey:["/api/saved-share-links"]}),x({title:"Link saved!",description:"Share link has been added to your saved links."})}catch(k){console.error("Error saving share link:",k),x({title:"Error",description:"Failed to save share link. Please try again.",variant:"destructive"})}finally{b(!1)}},w=async()=>{try{await navigator.clipboard.writeText(s),c(!0),x({title:"Copied!",description:"Share link copied to clipboard."}),setTimeout(()=>c(!1),2e3)}catch(k){console.error("Error copying to clipboard:",k),x({title:"Error",description:"Failed to copy to clipboard.",variant:"destructive"})}},j=k=>{k||(a(""),i(""),c(!1),m(!1)),t(k)};return n.jsx(Fe,{open:e,onOpenChange:j,children:n.jsxs(Te,{className:"w-[90vw] max-w-md sm:max-w-lg animate-in zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:zoom-out-90 duration-300 transition-all bg-white/70 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-200/60 dark:border-white/10 shadow-[0_20px_60px_0_rgba(0,0,0,0.25)] rounded-3xl",style:{maxHeight:"min(80vh, calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 40px))",touchAction:"pan-y"},children:[n.jsx("div",{className:"absolute inset-0 -z-10 rounded-3xl bg-gradient-to-br from-white/60 via-white/40 to-white/50 dark:from-black/40 dark:via-black/20 dark:to-black/30 border-0 shadow-inner",style:{backdropFilter:"blur(40px)",WebkitBackdropFilter:"blur(40px)"}}),n.jsxs(Ie,{className:"relative z-10",style:{paddingTop:"max(1.5rem, env(safe-area-inset-top))"},children:[n.jsx(Oe,{className:"text-sm font-semibold",children:"Share Table View"}),n.jsx(qe,{className:"text-sm",children:"Create a shareable link for the current table state including filters, sorting, and visible columns."})]}),n.jsx("div",{className:"space-y-4 py-4 relative z-10",style:{WebkitOverflowScrolling:"touch",overscrollBehavior:"contain"},children:s?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ke,{value:s,readOnly:!0,className:"flex-1 bg-white/10 dark:bg-black/10 backdrop-blur-sm border-transparent text-sm","data-testid":"input-share-url"}),n.jsx(I,{onClick:w,size:"sm",variant:"outline",className:"shrink-0 bg-transparent border-transparent hover:bg-blue-500/10 backdrop-blur-sm","data-testid":"button-copy-share-link",title:"Copy to clipboard",children:l?n.jsx(Er,{className:"h-4 w-4 text-green-500"}):n.jsx(wu,{className:"h-4 w-4"})}),n.jsx(I,{onClick:y,size:"sm",variant:u?"default":"outline",className:"shrink-0 bg-transparent border-transparent hover:bg-blue-500/10 backdrop-blur-sm",disabled:f||u,"data-testid":"button-save-share-link",title:u?"Link saved":"Save link",children:u?n.jsx(Er,{className:"h-4 w-4 text-green-500"}):n.jsx(bu,{className:"h-4 w-4"})})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Anyone with this link can view your table with the current filters and settings."})]}):n.jsx(I,{onClick:v,disabled:d,className:"w-full bg-transparent text-blue-500 hover:bg-blue-500/10 border-transparent backdrop-blur-sm text-sm","data-testid":"button-generate-share-link",children:d?"Generating...":"Generate Share Link"})}),n.jsx(He,{className:"relative z-10 sm:justify-center",style:{paddingBottom:"max(1rem, env(safe-area-inset-bottom))"},children:n.jsx(I,{variant:"outline",onClick:()=>j(!1),className:"bg-transparent border-transparent text-red-500 hover:bg-red-500/10 backdrop-blur-sm text-sm w-full sm:w-auto","data-testid":"button-cancel-share",children:"Cancel"})})]})})}var gh="AlertDialog",[ON,hC]=Jt(gh,[wd]),ir=wd(),bh=e=>{const{__scopeAlertDialog:t,...r}=e,s=ir(t);return n.jsx(od,{...s,...r,modal:!0})};bh.displayName=gh;var MN="AlertDialogTrigger",LN=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=ir(r);return n.jsx(id,{...a,...s,ref:t})});LN.displayName=MN;var _N="AlertDialogPortal",xh=e=>{const{__scopeAlertDialog:t,...r}=e,s=ir(t);return n.jsx(ld,{...s,...r})};xh.displayName=_N;var FN="AlertDialogOverlay",vh=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=ir(r);return n.jsx(Yo,{...a,...s,ref:t})});vh.displayName=FN;var ln="AlertDialogContent",[zN,$N]=ON(ln),BN=Jc("AlertDialogContent"),yh=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:s,...a}=e,o=ir(r),i=h.useRef(null),l=ct(t,i),c=h.useRef(null);return n.jsx(fg,{contentName:ln,titleName:wh,docsSlug:"alert-dialog",children:n.jsx(zN,{scope:r,cancelRef:c,children:n.jsxs(Xo,{role:"alertdialog",...o,...a,ref:l,onOpenAutoFocus:xe(a.onOpenAutoFocus,d=>{var p;d.preventDefault(),(p=c.current)==null||p.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[n.jsx(BN,{children:s}),n.jsx(GN,{contentRef:i})]})})})});yh.displayName=ln;var wh="AlertDialogTitle",jh=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=ir(r);return n.jsx(Jo,{...a,...s,ref:t})});jh.displayName=wh;var kh="AlertDialogDescription",Nh=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=ir(r);return n.jsx(Zo,{...a,...s,ref:t})});Nh.displayName=kh;var UN="AlertDialogAction",Ch=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=ir(r);return n.jsx(ei,{...a,...s,ref:t})});Ch.displayName=UN;var Sh="AlertDialogCancel",Eh=h.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,{cancelRef:a}=$N(Sh,r),o=ir(r),i=ct(t,a);return n.jsx(ei,{...o,...s,ref:i})});Eh.displayName=Sh;var GN=({contentRef:e})=>{const t=`\`${ln}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ln}\` by passing a \`${kh}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ln}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return h.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},VN=bh,qN=xh,Rh=vh,Dh=yh,Ph=Ch,Ah=Eh,Th=jh,Ih=Nh;const WN=VN,HN=qN,Oh=h.forwardRef(({className:e,...t},r)=>n.jsx(Rh,{className:J("fixed inset-0 z-50 bg-black/60 dark:bg-black/85 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));Oh.displayName=Rh.displayName;const Mh=h.forwardRef(({className:e,...t},r)=>n.jsxs(HN,{children:[n.jsx(Oh,{}),n.jsx(Dh,{ref:r,className:J("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Mh.displayName=Dh.displayName;const Lh=({className:e,...t})=>n.jsx("div",{className:J("flex flex-col space-y-2 text-center sm:text-left",e),...t});Lh.displayName="AlertDialogHeader";const _h=({className:e,...t})=>n.jsx("div",{className:J("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});_h.displayName="AlertDialogFooter";const Fh=h.forwardRef(({className:e,...t},r)=>n.jsx(Th,{ref:r,className:J("text-lg font-semibold",e),...t}));Fh.displayName=Th.displayName;const zh=h.forwardRef(({className:e,...t},r)=>n.jsx(Ih,{ref:r,className:J("text-sm text-muted-foreground",e),...t}));zh.displayName=Ih.displayName;const $h=h.forwardRef(({className:e,...t},r)=>n.jsx(Ph,{ref:r,className:J(Ui(),e),...t}));$h.displayName=Ph.displayName;const Bh=h.forwardRef(({className:e,...t},r)=>n.jsx(Ah,{ref:r,className:J(Ui({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Bh.displayName=Ah.displayName;function KN({open:e,onOpenChange:t}){const[r,s]=h.useState(!1),[a,o]=h.useState(!1),[i,l]=h.useState(null),[c,d]=h.useState(""),{toast:p}=Dt(),{data:u=[],isLoading:m}=qt({queryKey:["/api/saved-share-links"],enabled:e}),f=Ce({mutationFn:async k=>{const S=await ze("DELETE",`/api/saved-share-links/${k}`);if(!S.ok)throw new Error("Failed to delete saved link");return S.json()},onSuccess:()=>{kr.invalidateQueries({queryKey:["/api/saved-share-links"]}),s(!1),l(null),p({title:"Link deleted",description:"The saved link has been removed."})},onError:()=>{p({title:"Error",description:"Failed to delete saved link. Please try again.",variant:"destructive"})}}),b=Ce({mutationFn:async({id:k,remark:S})=>{const A=await ze("PATCH",`/api/saved-share-links/${k}/remark`,{remark:S});if(!A.ok)throw new Error("Failed to update remark");return A.json()},onSuccess:()=>{kr.invalidateQueries({queryKey:["/api/saved-share-links"]}),o(!1),l(null),d(""),p({title:"Remark updated",description:"The link remark has been updated."})},onError:()=>{p({title:"Error",description:"Failed to update remark. Please try again.",variant:"destructive"})}}),x=k=>{l(k),s(!0)},g=k=>{l(k),d(k.remark),o(!0)},v=()=>{i&&f.mutate(i.id)},y=()=>{i&&b.mutate({id:i.id,remark:c})},w=async k=>{try{await navigator.clipboard.writeText(k),p({title:"Copied!",description:"Link copied to clipboard."})}catch{p({title:"Error",description:"Failed to copy to clipboard.",variant:"destructive"})}},j=k=>(typeof k=="string"?new Date(k):k).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return n.jsxs(n.Fragment,{children:[n.jsx(Fe,{open:e,onOpenChange:t,children:n.jsxs(Te,{className:"sm:max-w-[600px] animate-in zoom-in-95 duration-300 data-[state=closed]:animate-out data-[state=closed]:zoom-out-90 bg-white/70 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-200/60 dark:border-white/10 shadow-[0_20px_60px_0_rgba(0,0,0,0.25)] rounded-3xl",children:[n.jsxs("div",{className:"absolute inset-0 -z-10 rounded-3xl bg-gradient-to-br from-white/70 via-white/50 to-white/60 dark:from-black/50 dark:via-black/30 dark:to-black/40 border-0 shadow-[inset_0_1px_1px_rgba(255,255,255,0.3),inset_0_-1px_1px_rgba(0,0,0,0.1)]",style:{backdropFilter:"blur(40px) saturate(180%)",WebkitBackdropFilter:"blur(40px) saturate(180%)"},children:[n.jsx("div",{className:"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/40 dark:via-white/20 to-transparent"}),n.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-tr from-blue-500/5 via-transparent to-purple-500/5 dark:from-blue-400/10 dark:via-transparent dark:to-purple-400/10"})]}),n.jsxs(Ie,{children:[n.jsx(Oe,{children:"Saved Share Links"}),n.jsx(qe,{children:"Manage your saved share links. Add remarks to organize them better."})]}),n.jsx("div",{className:"max-h-[400px] overflow-y-auto pr-2",children:m?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("p",{className:"text-muted-foreground",children:"Loading saved links..."})}):u.length===0?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("p",{className:"text-muted-foreground",children:"No saved links yet"})}):n.jsx("div",{className:"space-y-3",children:u.map(k=>n.jsxs("div",{className:"p-4 rounded-2xl border border-white/20 dark:border-white/10 bg-white/20 dark:bg-black/20 backdrop-blur-xl hover:bg-white/30 dark:hover:bg-black/30 transition-all duration-300 hover:scale-[1.02] animate-in zoom-in-95","data-testid":`saved-link-${k.id}`,children:[n.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium truncate",children:k.remark||"Untitled Link"}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Created: ",j(k.createdAt)]})]}),n.jsxs(hh,{children:[n.jsx(fh,{asChild:!0,children:n.jsx(I,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 shrink-0 transition-all duration-300 hover:scale-110 active:scale-95","data-testid":`button-actions-${k.id}`,title:"Actions",children:n.jsx(fb,{className:"h-4 w-4"})})}),n.jsxs(el,{align:"end",className:"w-44",children:[n.jsxs(Ct,{onClick:()=>w(k.url),className:"cursor-pointer transition-all duration-200 hover:scale-[1.02]","data-testid":`menu-copy-${k.id}`,children:[n.jsx(wu,{className:"h-4 w-4 mr-2"}),"Copy Link"]}),n.jsxs(Ct,{onClick:()=>window.open(k.url,"_blank"),className:"cursor-pointer transition-all duration-200 hover:scale-[1.02]","data-testid":`menu-open-${k.id}`,children:[n.jsx(sr,{className:"h-4 w-4 mr-2"}),"Open Link"]}),n.jsxs(Ct,{onClick:()=>g(k),className:"cursor-pointer transition-all duration-200 hover:scale-[1.02]","data-testid":`menu-edit-${k.id}`,children:[n.jsx(ma,{className:"h-4 w-4 mr-2"}),"Edit Remark"]}),n.jsxs(Ct,{onClick:()=>x(k),className:"cursor-pointer text-destructive focus:text-destructive transition-all duration-200 hover:scale-[1.02]","data-testid":`menu-delete-${k.id}`,children:[n.jsx(nn,{className:"h-4 w-4 mr-2"}),"Delete Link"]})]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx(ke,{value:k.url,readOnly:!0,className:"flex-1 h-8 text-xs","data-testid":`input-url-${k.id}`})})]},k.id))})})]})}),n.jsx(WN,{open:r,onOpenChange:s,children:n.jsxs(Mh,{className:"bg-white/70 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-200/60 dark:border-white/10 shadow-[0_20px_60px_0_rgba(0,0,0,0.25)] rounded-3xl",children:[n.jsxs("div",{className:"absolute inset-0 -z-10 rounded-3xl bg-gradient-to-br from-white/70 via-white/50 to-white/60 dark:from-black/50 dark:via-black/30 dark:to-black/40 border-0 shadow-[inset_0_1px_1px_rgba(255,255,255,0.3),inset_0_-1px_1px_rgba(0,0,0,0.1)]",style:{backdropFilter:"blur(40px) saturate(180%)",WebkitBackdropFilter:"blur(40px) saturate(180%)"},children:[n.jsx("div",{className:"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/40 dark:via-white/20 to-transparent"}),n.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-tr from-red-500/5 via-transparent to-orange-500/5 dark:from-red-400/10 dark:via-transparent dark:to-orange-400/10"})]}),n.jsxs(Lh,{children:[n.jsx(Fh,{children:"Delete Saved Link"}),n.jsx(zh,{children:"Are you sure you want to delete this saved link? This action cannot be undone."})]}),n.jsxs(_h,{children:[n.jsx(Bh,{children:"Cancel"}),n.jsx($h,{onClick:v,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:f.isPending,children:f.isPending?"Deleting...":"Delete"})]})]})}),n.jsx(Fe,{open:a,onOpenChange:o,children:n.jsxs(Te,{className:"sm:max-w-[425px] bg-white/70 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-200/60 dark:border-white/10 shadow-[0_20px_60px_0_rgba(0,0,0,0.25)] rounded-3xl",children:[n.jsxs("div",{className:"absolute inset-0 -z-10 rounded-3xl bg-gradient-to-br from-white/70 via-white/50 to-white/60 dark:from-black/50 dark:via-black/30 dark:to-black/40 border-0 shadow-[inset_0_1px_1px_rgba(255,255,255,0.3),inset_0_-1px_1px_rgba(0,0,0,0.1)]",style:{backdropFilter:"blur(40px) saturate(180%)",WebkitBackdropFilter:"blur(40px) saturate(180%)"},children:[n.jsx("div",{className:"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/40 dark:via-white/20 to-transparent"}),n.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-tr from-green-500/5 via-transparent to-blue-500/5 dark:from-green-400/10 dark:via-transparent dark:to-blue-400/10"})]}),n.jsxs(Ie,{children:[n.jsx(Oe,{children:"Edit Link Remark"}),n.jsx(qe,{children:"Add a note to help you remember what this link is for."})]}),n.jsxs("div",{className:"py-4",children:[n.jsx(ue,{htmlFor:"remark",children:"Remark"}),n.jsx(ke,{id:"remark",value:c,onChange:k=>d(k.target.value),placeholder:"e.g., Weekly sales report - Jan 2024",className:"mt-2","data-testid":"input-remark"})]}),n.jsxs(He,{children:[n.jsx(I,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),n.jsx(I,{onClick:y,disabled:b.isPending,"data-testid":"button-save-remark",children:b.isPending?"Saving...":"Save"})]})]})})]})}const QN=[{id:"welcome",title:" Welcome to Route Manager",description:"This interactive guide will show you how to manage your delivery routes efficiently. Navigate using Next/Previous buttons, or skip anytime. You can restart this tutorial from the help button in the corner.",position:"center",mode:"both"},{id:"theme",title:" Theme Toggle",description:"Switch between light and dark modes for comfortable viewing. The dark mode features a premium deep black design with optimized contrast.",targetSelector:'[data-testid="button-toggle-theme"]',position:"bottom",mode:"both"},{id:"view-search",title:" Smart Search & Filtering",description:"Search across all locations and use filters to find specific routes, deliveries, or destinations instantly. Combine filters for precise results.",targetSelector:'[data-testid="search-input"]',position:"top",mode:"view"},{id:"view-customize",title:" Customize Table View",description:"Click to show/hide columns and drag to reorder them. Your custom layout is automatically saved when you exit edit mode and persists across sessions.",targetSelector:'[data-testid="button-show"]',position:"top",mode:"view"},{id:"view-share",title:" Share Table State",description:"Generate a shareable URL that includes your current filters, search terms, and column settings. Perfect for team collaboration.",targetSelector:'[data-testid="button-share-table"]',position:"bottom",mode:"view"},{id:"view-links",title:" Saved Links",description:"Access your previously saved share links from the navigation bar. View, manage, and quickly access all your saved table states.",targetSelector:'[data-testid="button-saved-links"]',position:"bottom",mode:"view"},{id:"view-map",title:" View Map",description:"Click on any row's map button to see the location on an interactive map with route visualization and fullscreen support.",targetSelector:".table-container",position:"top",mode:"view"},{id:"view-edit-mode",title:" Switch to Edit Mode",description:"Enter edit mode to add locations, calculate toll prices, modify data, and manage your routes. All changes can be saved.",targetSelector:'[data-testid="button-edit-mode"]',position:"bottom",mode:"view"},{id:"edit-add-row",title:" Add New Location",description:"Add new route stops by clicking here. Fill in location details, coordinates, delivery info, and upload images if needed.",targetSelector:'[data-testid="button-add-row"]',position:"bottom",mode:"edit"},{id:"edit-add-column",title:" Add Custom Column",description:"Create custom columns to track additional data points specific to your operations and workflow needs.",targetSelector:'[data-testid="button-add-column"]',position:"bottom",mode:"edit"},{id:"edit-tolls",title:" Auto-Calculate Tolls",description:"Use Google Maps Routes API to automatically calculate toll prices and distances for lorry vehicles. Supports class 1 toll pricing with traffic-aware routing.",targetSelector:'[data-testid="button-calculate-tolls"]',position:"bottom",mode:"edit"},{id:"edit-optimize",title:" Route Optimization",description:"Use AI algorithms to optimize your delivery route for minimum distance, time, and fuel consumption. Choose from multiple optimization strategies.",targetSelector:'[data-testid="button-optimize-route"]',position:"bottom",mode:"edit"},{id:"edit-save",title:" Save All Changes",description:"Save your modifications to persist all edits. Changes include new rows, updated data, column modifications, and reordering.",targetSelector:'[data-testid="button-save-data"]',position:"bottom",mode:"edit"},{id:"edit-exit",title:" Return to View Mode",description:"Exit edit mode to return to the read-only view. Your column layout preferences are automatically saved when you exit. Remember to save data changes before exiting to avoid data loss.",targetSelector:'[data-testid="button-edit-mode"]',position:"bottom",mode:"edit"},{id:"complete",title:" Tutorial Complete!",description:"You're now ready to manage routes like a pro! Access this guide anytime via the help button. Happy routing!",position:"center",mode:"both"}];function YN({editMode:e=!1,onClose:t}){const[r,s]=h.useState(!0),[a,o]=h.useState(0);h.useState(!0);const i=QN.filter(y=>y.mode==="both"||y.mode===(e?"edit":"view"));h.useEffect(()=>{s(!0),o(0)},[]),h.useEffect(()=>{r&&a>0&&o(0)},[e]);const l=()=>{a<i.length-1?o(a+1):d()},c=()=>{a>0&&o(a-1)},d=()=>{localStorage.setItem("tutorial_completed","true"),s(!1),o(0),t==null||t()},p=()=>{localStorage.setItem("tutorial_completed","true"),s(!1),o(0),t==null||t()},u=i[a];if(h.useEffect(()=>{if(!r||!u.targetSelector)return;const y=document.querySelector(u.targetSelector);if(y)y.scrollIntoView({behavior:"smooth",block:"center"});else{const w=setTimeout(()=>{a<i.length-1&&o(a+1)},1e3);return()=>clearTimeout(w)}},[a,r,u.targetSelector]),!r)return null;if(u.position==="center")return n.jsx(Fe,{open:!0,onOpenChange:()=>{},children:n.jsxs(Te,{className:"max-w-lg bg-gradient-to-br from-background/95 via-background/98 to-background dark:from-black/95 dark:via-black/98 dark:to-black border-2 border-blue-500/30 dark:border-blue-400/30","aria-describedby":"tutorial-description",children:[n.jsxs(Ie,{children:[n.jsx(Oe,{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent",children:u.title}),n.jsx(qe,{id:"tutorial-description",className:"text-base pt-3 leading-relaxed",children:u.description})]}),n.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-border/50",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"text-sm font-medium text-muted-foreground",children:["Step ",a+1," of ",i.length]}),n.jsx("div",{className:"flex gap-1",children:Array.from({length:i.length}).map((y,w)=>n.jsx("div",{className:`h-1.5 rounded-full transition-all ${w===a?"w-6 bg-gradient-to-r from-blue-600 to-purple-600":"w-1.5 bg-muted"}`},w))})]}),n.jsxs("div",{className:"flex gap-2",children:[a>0&&n.jsxs(I,{variant:"outline",size:"sm",onClick:c,"data-testid":"button-tutorial-previous",className:"gap-1",children:[n.jsx(Il,{className:"w-4 h-4"}),"Previous"]}),n.jsx(I,{variant:"outline",size:"sm",onClick:p,"data-testid":"button-tutorial-skip",className:"text-muted-foreground hover:text-foreground",children:"Skip"}),n.jsx(I,{size:"sm",onClick:l,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white gap-1","data-testid":"button-tutorial-next",children:a===i.length-1?n.jsxs(n.Fragment,{children:["Finish",n.jsx(Co,{className:"w-4 h-4"})]}):n.jsxs(n.Fragment,{children:["Next",n.jsx(zs,{className:"w-4 h-4"})]})})]})]})]})});const m=u.targetSelector?document.querySelector(u.targetSelector):null,f=m==null?void 0:m.getBoundingClientRect();if(!f)return null;const b={position:"fixed",zIndex:60},x=window.innerHeight-f.bottom,g=f.top,v=320;switch(u.position){case"bottom":x<250&&g>250?b.bottom=`${window.innerHeight-f.top+12}px`:b.top=`${f.bottom+12}px`;let y=f.left+f.width/2-v/2;y+v>window.innerWidth-20&&(y=window.innerWidth-v-20),y<20&&(y=20),b.left=`${y}px`,b.transform="none";break;case"top":b.bottom=`${window.innerHeight-f.top+12}px`;let j=f.left+f.width/2-v/2;j+v>window.innerWidth-20&&(j=window.innerWidth-v-20),j<20&&(j=20),b.left=`${j}px`,b.transform="none";break;case"left":b.top=`${f.top+f.height/2}px`,b.right=`${window.innerWidth-f.left+12}px`,b.transform="translateY(-50%)";break;case"right":b.top=`${f.top+f.height/2}px`,b.left=`${f.right+12}px`,b.transform="translateY(-50%)";break}return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed z-[9999] pointer-events-none rounded-lg ring-4 ring-blue-500/60 dark:ring-blue-400/60 animate-pulse",style:{top:f.top-6,left:f.left-6,width:f.width+12,height:f.height+12,boxShadow:"0 0 20px rgba(59, 130, 246, 0.5)"}}),n.jsxs("div",{style:b,className:"fixed z-[10000] bg-gradient-to-br from-background/95 via-background/98 to-background dark:from-black/95 dark:via-black/98 dark:to-black border-2 border-blue-500/30 dark:border-blue-400/30 rounded-xl p-4 shadow-2xl w-[320px] backdrop-blur-xl animate-in fade-in zoom-in-95 duration-300",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsx("h3",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent pr-2",children:u.title}),n.jsx(I,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 hover:bg-destructive/10 hover:text-destructive",onClick:p,"data-testid":"button-tutorial-close",children:n.jsx(vt,{className:"w-4 h-4"})})]}),n.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed mb-4",children:u.description}),n.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-border/50",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"text-xs font-medium text-muted-foreground",children:[a+1,"/",i.length]}),n.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(i.length,8)}).map((y,w)=>n.jsx("div",{className:`h-1 rounded-full transition-all ${w===a?"w-4 bg-gradient-to-r from-blue-600 to-purple-600":"w-1 bg-muted"}`},w))})]}),n.jsxs("div",{className:"flex gap-2",children:[a>0&&n.jsx(I,{variant:"outline",size:"sm",onClick:c,"data-testid":"button-tutorial-previous",className:"h-8 px-3",children:n.jsx(Il,{className:"w-4 h-4"})}),n.jsxs(I,{size:"sm",onClick:l,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white h-8 px-3 gap-1","data-testid":"button-tutorial-next",children:[a===i.length-1?"Finish":"Next",a!==i.length-1&&n.jsx(zs,{className:"w-4 h-4"})]})]})]})]})]})}function Ca({editMode:e=!1}){new Date().getFullYear();const[t,r]=h.useState(!1),[s,a]=h.useState(!1),[o,i]=h.useState(!1),[l,c]=h.useState(!1),[d,p]=h.useState("App v1.0.0"),[u,m]=h.useState(""),{toast:f}=Dt(),{data:b}=qt({queryKey:["/api/global-settings","footerCompanyName"],queryFn:async()=>{const j=await fetch("/api/global-settings/footerCompanyName");if(!j.ok&&j.status!==404)throw new Error("Failed to fetch company name");return j.json()}}),{data:x}=qt({queryKey:["/api/global-settings","footerCompanyUrl"],queryFn:async()=>{const j=await fetch("/api/global-settings/footerCompanyUrl");if(!j.ok&&j.status!==404)throw new Error("Failed to fetch company URL");return j.json()}}),g=Ce({mutationFn:async j=>await(await ze("POST","/api/global-settings",{key:"footerCompanyName",value:j})).json()}),v=Ce({mutationFn:async j=>await(await ze("POST","/api/global-settings",{key:"footerCompanyUrl",value:j})).json()});h.useEffect(()=>{b!=null&&b.value&&p(b.value)},[b]),h.useEffect(()=>{x!=null&&x.value&&m(x.value)},[x]),h.useEffect(()=>{const j=setTimeout(()=>r(!0),100),k=setTimeout(()=>a(!0),300);return()=>{clearTimeout(j),clearTimeout(k)}},[]);const y=async()=>{try{await g.mutateAsync(d),await v.mutateAsync(u),kr.invalidateQueries({queryKey:["/api/global-settings","footerCompanyName"]}),kr.invalidateQueries({queryKey:["/api/global-settings","footerCompanyUrl"]}),i(!1),f({title:"Success",description:"Footer updated successfully!"})}catch(j){f({title:"Error",description:j instanceof Error?j.message:"Failed to update footer",variant:"destructive"})}},w=()=>{u&&(window.open(u,"_blank","noopener,noreferrer"),c(!1))};return n.jsxs(n.Fragment,{children:[n.jsx("footer",{className:`fixed bottom-0 left-0 right-0 bg-white/30 dark:bg-black/30 backdrop-blur-2xl border-t border-white/20 dark:border-white/10 px-4 py-3 text-sm transition-all duration-500 ease-out shadow-[0_8px_32px_0_rgba(0,0,0,0.12)] ${t?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:n.jsx("div",{className:"container mx-auto",children:n.jsxs("div",{className:`flex items-center justify-center gap-2 transition-all duration-700 ease-out text-[11px] ${s?"scale-100 opacity-100":"scale-95 opacity-0"}`,children:[n.jsx("div",{className:"text-gray-500 dark:text-gray-400 italic",children:"Delivering Convenience"}),n.jsx("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full"}),n.jsx("div",{className:"text-gray-500 dark:text-gray-400 italic",children:"One Route at a Time"})]})})}),n.jsx(Fe,{open:l,onOpenChange:c,children:n.jsxs(Te,{className:"sm:max-w-md",children:[n.jsx(Ie,{children:n.jsxs(Oe,{className:"flex items-center gap-2",children:[n.jsx(Ss,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Visit Website"]})}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"You are about to visit:"}),n.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Ss,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 break-all",children:[n.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Website URL:"}),n.jsx("div",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:u})]})]})}),n.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"This will open in a new browser tab."})]}),n.jsxs(He,{className:"sm:justify-between",children:[n.jsx(I,{variant:"outline",onClick:()=>c(!1),"data-testid":"button-cancel-navigate",children:"Cancel"}),n.jsxs(I,{onClick:w,className:"bg-blue-600 hover:bg-blue-700","data-testid":"button-confirm-navigate",children:[n.jsx(Ss,{className:"w-4 h-4 mr-2"}),"Visit Website"]})]})]})}),n.jsx(Fe,{open:o,onOpenChange:i,children:n.jsxs(Te,{children:[n.jsx(Ie,{children:n.jsx(Oe,{children:"Edit Footer"})}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"company-name",children:"Company Name"}),n.jsx(ke,{id:"company-name",value:d,onChange:j=>p(j.target.value),placeholder:"Enter company name","data-testid":"input-company-name"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"company-url",className:u?"text-blue-600 dark:text-blue-400":"",children:"Company Website URL (optional)"}),n.jsx(ke,{id:"company-url",value:u,onChange:j=>m(j.target.value),placeholder:"https://example.com",className:u?"border-blue-500 dark:border-blue-400 focus:ring-blue-500":"","data-testid":"input-company-url"})]}),n.jsxs("div",{className:"mt-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[n.jsx("h4",{className:"text-sm font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Preview Changes"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[n.jsx(Er,{className:"w-4 h-4 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx($b,{className:"w-3.5 h-3.5 text-slate-500"}),n.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Company Name:"})]}),n.jsx("div",{className:"ml-5 font-semibold text-slate-800 dark:text-slate-200",children:d||n.jsx("span",{className:"text-slate-400 italic",children:"Not set"})})]})]}),n.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[n.jsx(Er,{className:`w-4 h-4 mt-0.5 flex-shrink-0 ${u?"text-blue-600 dark:text-blue-400":"text-slate-400"}`}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ss,{className:`w-3.5 h-3.5 ${u?"text-blue-600 dark:text-blue-400":"text-slate-500"}`}),n.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Website URL:"})]}),n.jsx("div",{className:"ml-5",children:u?n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-blue-600 dark:text-blue-400 break-all",children:u}),n.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:" Company name will be clickable"})]}):n.jsx("span",{className:"text-slate-400 italic",children:"Not set - name will not be a link"})})]})]})]})]})]}),n.jsxs(He,{children:[n.jsx(I,{variant:"outline",onClick:()=>i(!1),"data-testid":"button-cancel-footer",children:"Cancel"}),n.jsx(I,{onClick:y,disabled:g.isPending||v.isPending,"data-testid":"button-save-footer",children:g.isPending||v.isPending?"Saving...":"Save"})]})]})})]})}function XN(e){return Object.prototype.toString.call(e)==="[object Object]"}function Dc(e){return XN(e)||Array.isArray(e)}function JN(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function tl(e,t){const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;const a=JSON.stringify(Object.keys(e.breakpoints||{})),o=JSON.stringify(Object.keys(t.breakpoints||{}));return a!==o?!1:r.every(i=>{const l=e[i],c=t[i];return typeof l=="function"?`${l}`==`${c}`:!Dc(l)||!Dc(c)?l===c:tl(l,c)})}function Pc(e){return e.concat().sort((t,r)=>t.name>r.name?1:-1).map(t=>t.options)}function ZN(e,t){if(e.length!==t.length)return!1;const r=Pc(e),s=Pc(t);return r.every((a,o)=>{const i=s[o];return tl(a,i)})}function rl(e){return typeof e=="number"}function Ho(e){return typeof e=="string"}function Sa(e){return typeof e=="boolean"}function Ac(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ke(e){return Math.abs(e)}function nl(e){return Math.sign(e)}function ts(e,t){return Ke(e-t)}function e2(e,t){if(e===0||t===0||Ke(e)<=Ke(t))return 0;const r=ts(Ke(e),Ke(t));return Ke(r/e)}function t2(e){return Math.round(e*100)/100}function ds(e){return us(e).map(Number)}function Vt(e){return e[ws(e)]}function ws(e){return Math.max(0,e.length-1)}function sl(e,t){return t===ws(e)}function Tc(e,t=0){return Array.from(Array(e),(r,s)=>t+s)}function us(e){return Object.keys(e)}function Uh(e,t){return[e,t].reduce((r,s)=>(us(s).forEach(a=>{const o=r[a],i=s[a],l=Ac(o)&&Ac(i);r[a]=l?Uh(o,i):i}),r),{})}function Ko(e,t){return typeof t.MouseEvent<"u"&&e instanceof t.MouseEvent}function r2(e,t){const r={start:s,center:a,end:o};function s(){return 0}function a(c){return o(c)/2}function o(c){return t-c}function i(c,d){return Ho(e)?r[e](c):e(t,c,d)}return{measure:i}}function ms(){let e=[];function t(a,o,i,l={passive:!0}){let c;if("addEventListener"in a)a.addEventListener(o,i,l),c=()=>a.removeEventListener(o,i,l);else{const d=a;d.addListener(i),c=()=>d.removeListener(i)}return e.push(c),s}function r(){e=e.filter(a=>a())}const s={add:t,clear:r};return s}function n2(e,t,r,s){const a=ms(),o=1e3/60;let i=null,l=0,c=0;function d(){a.add(e,"visibilitychange",()=>{e.hidden&&b()})}function p(){f(),a.clear()}function u(g){if(!c)return;i||(i=g,r(),r());const v=g-i;for(i=g,l+=v;l>=o;)r(),l-=o;const y=l/o;s(y),c&&(c=t.requestAnimationFrame(u))}function m(){c||(c=t.requestAnimationFrame(u))}function f(){t.cancelAnimationFrame(c),i=null,l=0,c=0}function b(){i=null,l=0}return{init:d,destroy:p,start:m,stop:f,update:r,render:s}}function s2(e,t){const r=t==="rtl",s=e==="y",a=s?"y":"x",o=s?"x":"y",i=!s&&r?-1:1,l=p(),c=u();function d(b){const{height:x,width:g}=b;return s?x:g}function p(){return s?"top":r?"right":"left"}function u(){return s?"bottom":r?"left":"right"}function m(b){return b*i}return{scroll:a,cross:o,startEdge:l,endEdge:c,measureSize:d,direction:m}}function Xr(e=0,t=0){const r=Ke(e-t);function s(d){return d<e}function a(d){return d>t}function o(d){return s(d)||a(d)}function i(d){return o(d)?s(d)?e:t:d}function l(d){return r?d-r*Math.ceil((d-t)/r):d}return{length:r,max:t,min:e,constrain:i,reachedAny:o,reachedMax:a,reachedMin:s,removeOffset:l}}function Gh(e,t,r){const{constrain:s}=Xr(0,e),a=e+1;let o=i(t);function i(m){return r?Ke((a+m)%a):s(m)}function l(){return o}function c(m){return o=i(m),u}function d(m){return p().set(l()+m)}function p(){return Gh(e,l(),r)}const u={get:l,set:c,add:d,clone:p};return u}function a2(e,t,r,s,a,o,i,l,c,d,p,u,m,f,b,x,g,v,y){const{cross:w,direction:j}=e,k=["INPUT","SELECT","TEXTAREA"],S={passive:!1},A=ms(),O=ms(),M=Xr(50,225).constrain(f.measure(20)),B={mouse:300,touch:400},U={mouse:500,touch:600},_=b?43:25;let G=!1,L=0,Q=0,F=!1,D=!1,V=!1,z=!1;function R(X){if(!y)return;function me(_e){(Sa(y)||y(X,_e))&&rt(_e)}const Ne=t;A.add(Ne,"dragstart",_e=>_e.preventDefault(),S).add(Ne,"touchmove",()=>{},S).add(Ne,"touchend",()=>{}).add(Ne,"touchstart",me).add(Ne,"mousedown",me).add(Ne,"touchcancel",Ge).add(Ne,"contextmenu",Ge).add(Ne,"click",Qe,!0)}function C(){A.clear(),O.clear()}function ee(){const X=z?r:t;O.add(X,"touchmove",Re,S).add(X,"touchend",Ge).add(X,"mousemove",Re,S).add(X,"mouseup",Ge)}function he(X){const me=X.nodeName||"";return k.includes(me)}function ae(){return(b?U:B)[z?"mouse":"touch"]}function Me(X,me){const Ne=u.add(nl(X)*-1),_e=p.byDistance(X,!b).distance;return b||Ke(X)<M?_e:g&&me?_e*.5:p.byIndex(Ne.get(),0).distance}function rt(X){const me=Ko(X,s);z=me,V=b&&me&&!X.buttons&&G,G=ts(a.get(),i.get())>=2,!(me&&X.button!==0)&&(he(X.target)||(F=!0,o.pointerDown(X),d.useFriction(0).useDuration(0),a.set(i),ee(),L=o.readPoint(X),Q=o.readPoint(X,w),m.emit("pointerDown")))}function Re(X){if(!Ko(X,s)&&X.touches.length>=2)return Ge(X);const Ne=o.readPoint(X),_e=o.readPoint(X,w),We=ts(Ne,L),at=ts(_e,Q);if(!D&&!z&&(!X.cancelable||(D=We>at,!D)))return Ge(X);const Pt=o.pointerMove(X);We>x&&(V=!0),d.useFriction(.3).useDuration(.75),l.start(),a.add(j(Pt)),X.preventDefault()}function Ge(X){const Ne=p.byDistance(0,!1).index!==u.get(),_e=o.pointerUp(X)*ae(),We=Me(j(_e),Ne),at=e2(_e,We),Pt=_-10*at,ut=v+at/50;D=!1,F=!1,O.clear(),d.useDuration(Pt).useFriction(ut),c.distance(We,!b),z=!1,m.emit("pointerUp")}function Qe(X){V&&(X.stopPropagation(),X.preventDefault(),V=!1)}function Le(){return F}return{init:R,destroy:C,pointerDown:Le}}function o2(e,t){let s,a;function o(u){return u.timeStamp}function i(u,m){const b=`client${(m||e.scroll)==="x"?"X":"Y"}`;return(Ko(u,t)?u:u.touches[0])[b]}function l(u){return s=u,a=u,i(u)}function c(u){const m=i(u)-i(a),f=o(u)-o(s)>170;return a=u,f&&(s=u),m}function d(u){if(!s||!a)return 0;const m=i(a)-i(s),f=o(u)-o(s),b=o(u)-o(a)>170,x=m/f;return f&&!b&&Ke(x)>.1?x:0}return{pointerDown:l,pointerMove:c,pointerUp:d,readPoint:i}}function i2(){function e(r){const{offsetTop:s,offsetLeft:a,offsetWidth:o,offsetHeight:i}=r;return{top:s,right:a+o,bottom:s+i,left:a,width:o,height:i}}return{measure:e}}function l2(e){function t(s){return e*(s/100)}return{measure:t}}function c2(e,t,r,s,a,o,i){const l=[e].concat(s);let c,d,p=[],u=!1;function m(g){return a.measureSize(i.measure(g))}function f(g){if(!o)return;d=m(e),p=s.map(m);function v(y){for(const w of y){if(u)return;const j=w.target===e,k=s.indexOf(w.target),S=j?d:p[k],A=m(j?e:s[k]);if(Ke(A-S)>=.5){g.reInit(),t.emit("resize");break}}}c=new ResizeObserver(y=>{(Sa(o)||o(g,y))&&v(y)}),r.requestAnimationFrame(()=>{l.forEach(y=>c.observe(y))})}function b(){u=!0,c&&c.disconnect()}return{init:f,destroy:b}}function d2(e,t,r,s,a,o){let i=0,l=0,c=a,d=o,p=e.get(),u=0;function m(){const S=s.get()-e.get(),A=!c;let O=0;return A?(i=0,r.set(s),e.set(s),O=S):(r.set(e),i+=S/c,i*=d,p+=i,e.add(i),O=p-u),l=nl(O),u=p,k}function f(){const S=s.get()-t.get();return Ke(S)<.001}function b(){return c}function x(){return l}function g(){return i}function v(){return w(a)}function y(){return j(o)}function w(S){return c=S,k}function j(S){return d=S,k}const k={direction:x,duration:b,velocity:g,seek:m,settled:f,useBaseFriction:y,useBaseDuration:v,useFriction:j,useDuration:w};return k}function u2(e,t,r,s,a){const o=a.measure(10),i=a.measure(50),l=Xr(.1,.99);let c=!1;function d(){return!(c||!e.reachedAny(r.get())||!e.reachedAny(t.get()))}function p(f){if(!d())return;const b=e.reachedMin(t.get())?"min":"max",x=Ke(e[b]-t.get()),g=r.get()-t.get(),v=l.constrain(x/i);r.subtract(g*v),!f&&Ke(g)<o&&(r.set(e.constrain(r.get())),s.useDuration(25).useBaseFriction())}function u(f){c=!f}return{shouldConstrain:d,constrain:p,toggleActive:u}}function m2(e,t,r,s,a){const o=Xr(-t+e,0),i=u(),l=p(),c=m();function d(b,x){return ts(b,x)<=1}function p(){const b=i[0],x=Vt(i),g=i.lastIndexOf(b),v=i.indexOf(x)+1;return Xr(g,v)}function u(){return r.map((b,x)=>{const{min:g,max:v}=o,y=o.constrain(b),w=!x,j=sl(r,x);return w?v:j||d(g,y)?g:d(v,y)?v:y}).map(b=>parseFloat(b.toFixed(3)))}function m(){if(t<=e+a)return[o.max];if(s==="keepSnaps")return i;const{min:b,max:x}=l;return i.slice(b,x)}return{snapsContained:c,scrollContainLimit:l}}function p2(e,t,r){const s=t[0],a=r?s-e:Vt(t);return{limit:Xr(a,s)}}function h2(e,t,r,s){const o=t.min+.1,i=t.max+.1,{reachedMin:l,reachedMax:c}=Xr(o,i);function d(m){return m===1?c(r.get()):m===-1?l(r.get()):!1}function p(m){if(!d(m))return;const f=e*(m*-1);s.forEach(b=>b.add(f))}return{loop:p}}function f2(e){const{max:t,length:r}=e;function s(o){const i=o-t;return r?i/-r:0}return{get:s}}function g2(e,t,r,s,a){const{startEdge:o,endEdge:i}=e,{groupSlides:l}=a,c=u().map(t.measure),d=m(),p=f();function u(){return l(s).map(x=>Vt(x)[i]-x[0][o]).map(Ke)}function m(){return s.map(x=>r[o]-x[o]).map(x=>-Ke(x))}function f(){return l(d).map(x=>x[0]).map((x,g)=>x+c[g])}return{snaps:d,snapsAligned:p}}function b2(e,t,r,s,a,o){const{groupSlides:i}=a,{min:l,max:c}=s,d=p();function p(){const m=i(o),f=!e||t==="keepSnaps";return r.length===1?[o]:f?m:m.slice(l,c).map((b,x,g)=>{const v=!x,y=sl(g,x);if(v){const w=Vt(g[0])+1;return Tc(w)}if(y){const w=ws(o)-Vt(g)[0]+1;return Tc(w,Vt(g)[0])}return b})}return{slideRegistry:d}}function x2(e,t,r,s,a){const{reachedAny:o,removeOffset:i,constrain:l}=s;function c(b){return b.concat().sort((x,g)=>Ke(x)-Ke(g))[0]}function d(b){const x=e?i(b):l(b),g=t.map((y,w)=>({diff:p(y-x,0),index:w})).sort((y,w)=>Ke(y.diff)-Ke(w.diff)),{index:v}=g[0];return{index:v,distance:x}}function p(b,x){const g=[b,b+r,b-r];if(!e)return b;if(!x)return c(g);const v=g.filter(y=>nl(y)===x);return v.length?c(v):Vt(g)-r}function u(b,x){const g=t[b]-a.get(),v=p(g,x);return{index:b,distance:v}}function m(b,x){const g=a.get()+b,{index:v,distance:y}=d(g),w=!e&&o(g);if(!x||w)return{index:v,distance:b};const j=t[v]-y,k=b+p(j,0);return{index:v,distance:k}}return{byDistance:m,byIndex:u,shortcut:p}}function v2(e,t,r,s,a,o,i){function l(u){const m=u.distance,f=u.index!==t.get();o.add(m),m&&(s.duration()?e.start():(e.update(),e.render(1),e.update())),f&&(r.set(t.get()),t.set(u.index),i.emit("select"))}function c(u,m){const f=a.byDistance(u,m);l(f)}function d(u,m){const f=t.clone().set(u),b=a.byIndex(f.get(),m);l(b)}return{distance:c,index:d}}function y2(e,t,r,s,a,o,i,l){const c={passive:!0,capture:!0};let d=0;function p(f){if(!l)return;function b(x){if(new Date().getTime()-d>10)return;i.emit("slideFocusStart"),e.scrollLeft=0;const y=r.findIndex(w=>w.includes(x));rl(y)&&(a.useDuration(0),s.index(y,0),i.emit("slideFocus"))}o.add(document,"keydown",u,!1),t.forEach((x,g)=>{o.add(x,"focus",v=>{(Sa(l)||l(f,v))&&b(g)},c)})}function u(f){f.code==="Tab"&&(d=new Date().getTime())}return{init:p}}function Xn(e){let t=e;function r(){return t}function s(c){t=i(c)}function a(c){t+=i(c)}function o(c){t-=i(c)}function i(c){return rl(c)?c:c.get()}return{get:r,set:s,add:a,subtract:o}}function Vh(e,t){const r=e.scroll==="x"?i:l,s=t.style;let a=null,o=!1;function i(m){return`translate3d(${m}px,0px,0px)`}function l(m){return`translate3d(0px,${m}px,0px)`}function c(m){if(o)return;const f=t2(e.direction(m));f!==a&&(s.transform=r(f),a=f)}function d(m){o=!m}function p(){o||(s.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:p,to:c,toggleActive:d}}function w2(e,t,r,s,a,o,i,l,c){const p=ds(a),u=ds(a).reverse(),m=v().concat(y());function f(A,O){return A.reduce((M,B)=>M-a[B],O)}function b(A,O){return A.reduce((M,B)=>f(M,O)>0?M.concat([B]):M,[])}function x(A){return o.map((O,M)=>({start:O-s[M]+.5+A,end:O+t-.5+A}))}function g(A,O,M){const B=x(O);return A.map(U=>{const _=M?0:-r,G=M?r:0,L=M?"end":"start",Q=B[U][L];return{index:U,loopPoint:Q,slideLocation:Xn(-1),translate:Vh(e,c[U]),target:()=>l.get()>Q?_:G}})}function v(){const A=i[0],O=b(u,A);return g(O,r,!1)}function y(){const A=t-i[0]-1,O=b(p,A);return g(O,-r,!0)}function w(){return m.every(({index:A})=>{const O=p.filter(M=>M!==A);return f(O,t)<=.1})}function j(){m.forEach(A=>{const{target:O,translate:M,slideLocation:B}=A,U=O();U!==B.get()&&(M.to(U),B.set(U))})}function k(){m.forEach(A=>A.translate.clear())}return{canLoop:w,clear:k,loop:j,loopPoints:m}}function j2(e,t,r){let s,a=!1;function o(c){if(!r)return;function d(p){for(const u of p)if(u.type==="childList"){c.reInit(),t.emit("slidesChanged");break}}s=new MutationObserver(p=>{a||(Sa(r)||r(c,p))&&d(p)}),s.observe(e,{childList:!0})}function i(){s&&s.disconnect(),a=!0}return{init:o,destroy:i}}function k2(e,t,r,s){const a={};let o=null,i=null,l,c=!1;function d(){l=new IntersectionObserver(b=>{c||(b.forEach(x=>{const g=t.indexOf(x.target);a[g]=x}),o=null,i=null,r.emit("slidesInView"))},{root:e.parentElement,threshold:s}),t.forEach(b=>l.observe(b))}function p(){l&&l.disconnect(),c=!0}function u(b){return us(a).reduce((x,g)=>{const v=parseInt(g),{isIntersecting:y}=a[v];return(b&&y||!b&&!y)&&x.push(v),x},[])}function m(b=!0){if(b&&o)return o;if(!b&&i)return i;const x=u(b);return b&&(o=x),b||(i=x),x}return{init:d,destroy:p,get:m}}function N2(e,t,r,s,a,o){const{measureSize:i,startEdge:l,endEdge:c}=e,d=r[0]&&a,p=b(),u=x(),m=r.map(i),f=g();function b(){if(!d)return 0;const y=r[0];return Ke(t[l]-y[l])}function x(){if(!d)return 0;const y=o.getComputedStyle(Vt(s));return parseFloat(y.getPropertyValue(`margin-${c}`))}function g(){return r.map((y,w,j)=>{const k=!w,S=sl(j,w);return k?m[w]+p:S?m[w]+u:j[w+1][l]-y[l]}).map(Ke)}return{slideSizes:m,slideSizesWithGaps:f,startGap:p,endGap:u}}function C2(e,t,r,s,a,o,i,l,c){const{startEdge:d,endEdge:p,direction:u}=e,m=rl(r);function f(v,y){return ds(v).filter(w=>w%y===0).map(w=>v.slice(w,w+y))}function b(v){return v.length?ds(v).reduce((y,w,j)=>{const k=Vt(y)||0,S=k===0,A=w===ws(v),O=a[d]-o[k][d],M=a[d]-o[w][p],B=!s&&S?u(i):0,U=!s&&A?u(l):0,_=Ke(M-U-(O+B));return j&&_>t+c&&y.push(w),A&&y.push(v.length),y},[]).map((y,w,j)=>{const k=Math.max(j[w-1]||0);return v.slice(k,y)}):[]}function x(v){return m?f(v,r):b(v)}return{groupSlides:x}}function S2(e,t,r,s,a,o,i){const{align:l,axis:c,direction:d,startIndex:p,loop:u,duration:m,dragFree:f,dragThreshold:b,inViewThreshold:x,slidesToScroll:g,skipSnaps:v,containScroll:y,watchResize:w,watchSlides:j,watchDrag:k,watchFocus:S}=o,A=2,O=i2(),M=O.measure(t),B=r.map(O.measure),U=s2(c,d),_=U.measureSize(M),G=l2(_),L=r2(l,_),Q=!u&&!!y,F=u||!!y,{slideSizes:D,slideSizesWithGaps:V,startGap:z,endGap:R}=N2(U,M,B,r,F,a),C=C2(U,_,g,u,M,B,z,R,A),{snaps:ee,snapsAligned:he}=g2(U,L,M,B,C),ae=-Vt(ee)+Vt(V),{snapsContained:Me,scrollContainLimit:rt}=m2(_,ae,he,y,A),Re=Q?Me:he,{limit:Ge}=p2(ae,Re,u),Qe=Gh(ws(Re),p,u),Le=Qe.clone(),Se=ds(r),X=({dragHandler:E,scrollBody:q,scrollBounds:W,options:{loop:re}})=>{re||W.constrain(E.pointerDown()),q.seek()},me=({scrollBody:E,translate:q,location:W,offsetLocation:re,previousLocation:te,scrollLooper:ne,slideLooper:Be,dragHandler:se,animation:Je,eventHandler:zt,scrollBounds:Ee,options:{loop:Ar}},Tr)=>{const tt=E.settled(),Ze=!Ee.shouldConstrain(),Jr=Ar?tt:tt&&Ze,jt=Jr&&!se.pointerDown();jt&&Je.stop();const $n=W.get()*Tr+te.get()*(1-Tr);re.set($n),Ar&&(ne.loop(E.direction()),Be.loop()),q.to(re.get()),jt&&zt.emit("settle"),Jr||zt.emit("scroll")},Ne=n2(s,a,()=>X(P),E=>me(P,E)),_e=.68,We=Re[Qe.get()],at=Xn(We),Pt=Xn(We),ut=Xn(We),nt=Xn(We),K=d2(at,ut,Pt,nt,m,_e),ie=x2(u,Re,ae,Ge,nt),fe=v2(Ne,Qe,Le,K,ie,nt,i),we=f2(Ge),pt=ms(),ot=k2(t,r,i,x),{slideRegistry:er}=b2(Q,y,Re,rt,C,Se),lr=y2(e,r,er,fe,K,pt,i,S),P={ownerDocument:s,ownerWindow:a,eventHandler:i,containerRect:M,slideRects:B,animation:Ne,axis:U,dragHandler:a2(U,e,s,a,nt,o2(U,a),at,Ne,fe,K,ie,Qe,i,G,f,b,v,_e,k),eventStore:pt,percentOfView:G,index:Qe,indexPrevious:Le,limit:Ge,location:at,offsetLocation:ut,previousLocation:Pt,options:o,resizeHandler:c2(t,i,a,r,U,w,O),scrollBody:K,scrollBounds:u2(Ge,ut,nt,K,G),scrollLooper:h2(ae,Ge,ut,[at,ut,Pt,nt]),scrollProgress:we,scrollSnapList:Re.map(we.get),scrollSnaps:Re,scrollTarget:ie,scrollTo:fe,slideLooper:w2(U,_,ae,D,V,ee,Re,ut,r),slideFocus:lr,slidesHandler:j2(t,i,j),slidesInView:ot,slideIndexes:Se,slideRegistry:er,slidesToScroll:C,target:nt,translate:Vh(U,t)};return P}function E2(){let e={},t;function r(d){t=d}function s(d){return e[d]||[]}function a(d){return s(d).forEach(p=>p(t,d)),c}function o(d,p){return e[d]=s(d).concat([p]),c}function i(d,p){return e[d]=s(d).filter(u=>u!==p),c}function l(){e={}}const c={init:r,emit:a,off:i,on:o,clear:l};return c}const R2={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function D2(e){function t(o,i){return Uh(o,i||{})}function r(o){const i=o.breakpoints||{},l=us(i).filter(c=>e.matchMedia(c).matches).map(c=>i[c]).reduce((c,d)=>t(c,d),{});return t(o,l)}function s(o){return o.map(i=>us(i.breakpoints||{})).reduce((i,l)=>i.concat(l),[]).map(e.matchMedia)}return{mergeOptions:t,optionsAtMedia:r,optionsMediaQueries:s}}function P2(e){let t=[];function r(o,i){return t=i.filter(({options:l})=>e.optionsAtMedia(l).active!==!1),t.forEach(l=>l.init(o,e)),i.reduce((l,c)=>Object.assign(l,{[c.name]:c}),{})}function s(){t=t.filter(o=>o.destroy())}return{init:r,destroy:s}}function ea(e,t,r){const s=e.ownerDocument,a=s.defaultView,o=D2(a),i=P2(o),l=ms(),c=E2(),{mergeOptions:d,optionsAtMedia:p,optionsMediaQueries:u}=o,{on:m,off:f,emit:b}=c,x=U;let g=!1,v,y=d(R2,ea.globalOptions),w=d(y),j=[],k,S,A;function O(){const{container:Se,slides:X}=w;S=(Ho(Se)?e.querySelector(Se):Se)||e.children[0];const Ne=Ho(X)?S.querySelectorAll(X):X;A=[].slice.call(Ne||S.children)}function M(Se){const X=S2(e,S,A,s,a,Se,c);if(Se.loop&&!X.slideLooper.canLoop()){const me=Object.assign({},Se,{loop:!1});return M(me)}return X}function B(Se,X){g||(y=d(y,Se),w=p(y),j=X||j,O(),v=M(w),u([y,...j.map(({options:me})=>me)]).forEach(me=>l.add(me,"change",U)),w.active&&(v.translate.to(v.location.get()),v.animation.init(),v.slidesInView.init(),v.slideFocus.init(Le),v.eventHandler.init(Le),v.resizeHandler.init(Le),v.slidesHandler.init(Le),v.options.loop&&v.slideLooper.loop(),S.offsetParent&&A.length&&v.dragHandler.init(Le),k=i.init(Le,j)))}function U(Se,X){const me=C();_(),B(d({startIndex:me},Se),X),c.emit("reInit")}function _(){v.dragHandler.destroy(),v.eventStore.clear(),v.translate.clear(),v.slideLooper.clear(),v.resizeHandler.destroy(),v.slidesHandler.destroy(),v.slidesInView.destroy(),v.animation.destroy(),i.destroy(),l.clear()}function G(){g||(g=!0,l.clear(),_(),c.emit("destroy"),c.clear())}function L(Se,X,me){!w.active||g||(v.scrollBody.useBaseFriction().useDuration(X===!0?0:w.duration),v.scrollTo.index(Se,me||0))}function Q(Se){const X=v.index.add(1).get();L(X,Se,-1)}function F(Se){const X=v.index.add(-1).get();L(X,Se,1)}function D(){return v.index.add(1).get()!==C()}function V(){return v.index.add(-1).get()!==C()}function z(){return v.scrollSnapList}function R(){return v.scrollProgress.get(v.offsetLocation.get())}function C(){return v.index.get()}function ee(){return v.indexPrevious.get()}function he(){return v.slidesInView.get()}function ae(){return v.slidesInView.get(!1)}function Me(){return k}function rt(){return v}function Re(){return e}function Ge(){return S}function Qe(){return A}const Le={canScrollNext:D,canScrollPrev:V,containerNode:Ge,internalEngine:rt,destroy:G,off:f,on:m,emit:b,plugins:Me,previousScrollSnap:ee,reInit:x,rootNode:Re,scrollNext:Q,scrollPrev:F,scrollProgress:R,scrollSnapList:z,scrollTo:L,selectedScrollSnap:C,slideNodes:Qe,slidesInView:he,slidesNotInView:ae};return B(t,r),setTimeout(()=>c.emit("init"),0),Le}ea.globalOptions=void 0;function al(e={},t=[]){const r=h.useRef(e),s=h.useRef(t),[a,o]=h.useState(),[i,l]=h.useState(),c=h.useCallback(()=>{a&&a.reInit(r.current,s.current)},[a]);return h.useEffect(()=>{tl(r.current,e)||(r.current=e,c())},[e,c]),h.useEffect(()=>{ZN(s.current,t)||(s.current=t,c())},[t,c]),h.useEffect(()=>{if(JN()&&i){ea.globalOptions=al.globalOptions;const d=ea(i,r.current,s.current);return o(d),()=>d.destroy()}else o(void 0)},[i,o]),[l,a]}al.globalOptions=void 0;const qh=h.createContext(null);function Ea(){const e=h.useContext(qh);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}const Wh=h.forwardRef(({orientation:e="horizontal",opts:t,setApi:r,plugins:s,className:a,children:o,...i},l)=>{const[c,d]=al({...t,axis:e==="horizontal"?"x":"y"},s),[p,u]=h.useState(!1),[m,f]=h.useState(!1),b=h.useCallback(y=>{y&&(u(y.canScrollPrev()),f(y.canScrollNext()))},[]),x=h.useCallback(()=>{d==null||d.scrollPrev()},[d]),g=h.useCallback(()=>{d==null||d.scrollNext()},[d]),v=h.useCallback(y=>{y.key==="ArrowLeft"?(y.preventDefault(),x()):y.key==="ArrowRight"&&(y.preventDefault(),g())},[x,g]);return h.useEffect(()=>{!d||!r||r(d)},[d,r]),h.useEffect(()=>{if(d)return b(d),d.on("reInit",b),d.on("select",b),()=>{d==null||d.off("select",b)}},[d,b]),n.jsx(qh.Provider,{value:{carouselRef:c,api:d,opts:t,orientation:e||((t==null?void 0:t.axis)==="y"?"vertical":"horizontal"),scrollPrev:x,scrollNext:g,canScrollPrev:p,canScrollNext:m},children:n.jsx("div",{ref:l,onKeyDownCapture:v,className:J("relative",a),role:"region","aria-roledescription":"carousel",...i,children:o})})});Wh.displayName="Carousel";const Hh=h.forwardRef(({className:e,...t},r)=>{const{carouselRef:s,orientation:a}=Ea();return n.jsx("div",{ref:s,className:"overflow-hidden",children:n.jsx("div",{ref:r,className:J("flex",a==="horizontal"?"-ml-4":"-mt-4 flex-col",e),...t})})});Hh.displayName="CarouselContent";const Kh=h.forwardRef(({className:e,...t},r)=>{const{orientation:s}=Ea();return n.jsx("div",{ref:r,role:"group","aria-roledescription":"slide",className:J("min-w-0 shrink-0 grow-0 basis-full",s==="horizontal"?"pl-4":"pt-4",e),...t})});Kh.displayName="CarouselItem";const Qh=h.forwardRef(({className:e,variant:t="outline",size:r="icon",...s},a)=>{const{orientation:o,scrollPrev:i,canScrollPrev:l}=Ea();return n.jsxs(I,{ref:a,variant:t,size:r,className:J("absolute  h-8 w-8 rounded-full",o==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!l,onClick:i,...s,children:[n.jsx(sb,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Previous slide"})]})});Qh.displayName="CarouselPrevious";const Yh=h.forwardRef(({className:e,variant:t="outline",size:r="icon",...s},a)=>{const{orientation:o,scrollNext:i,canScrollNext:l}=Ea();return n.jsxs(I,{ref:a,variant:t,size:r,className:J("absolute h-8 w-8 rounded-full",o==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!l,onClick:i,...s,children:[n.jsx(ab,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Next slide"})]})});Yh.displayName="CarouselNext";const Ic=["TnG KL Central","TnG Petaling Jaya","TnG Shah Alam","TnG Subang Jaya","TnG Damansara","TnG Mont Kiara","TnG KLCC","TnG Bukit Bintang","TnG Cheras","TnG Ampang","TnG Kepong","TnG Wangsa Maju","TnG Setapak","TnG Sentul","TnG Brickfields"];function A2(){const e=Math.floor(Math.random()*Ic.length);return Ic[e]}function T2(){return(Math.random()*45+5).toFixed(2)}function Oc(){return{tngSite:A2(),tngRoute:T2()}}function Pn(e,t,r,s){const o=(r-e)*(Math.PI/180),i=(s-t)*(Math.PI/180),l=Math.sin(o/2)*Math.sin(o/2)+Math.cos(e*(Math.PI/180))*Math.cos(r*(Math.PI/180))*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}function I2(){const[e,t]=h.useState(!1),[r,s]=h.useState(null),[a,o]=h.useState(""),[i,l]=h.useState([]),[c,d]=h.useState([]),[p,u]=h.useState(!1),[m,f]=h.useState([]),[b,x]=h.useState([]),[g,v]=h.useState(!1),[y,w]=h.useState(!1),[j,k]=h.useState(null),[S,A]=h.useState(!1),[O,M]=h.useState("end"),[B,U]=h.useState(1),[_,G]=h.useState(!1),[L,Q]=h.useState(!1),[F,D]=h.useState(`- Interactive table with Drag & Drop , Calculations , and Image Gallery

- This Routes for Driver Vending Mechine , FamilyMart only`),[V,z]=h.useState("Content"),[R,C]=h.useState(!0),[ee,he]=h.useState(!1),[ae,Me]=h.useState(!1),[rt,Re]=h.useState(!1),[Ge,Qe]=h.useState(!1),[Le,Se]=h.useState(0),[X,me]=h.useState(!1),[Ne,_e]=h.useState(null),[We,at]=h.useState(""),[Pt,ut]=h.useState(""),[nt,K]=h.useState([]),[ie,fe]=h.useState(!0),[we,pt]=h.useState(),[ot,er]=h.useState(0),[lr,P]=h.useState(null),[E,q]=h.useState(!1),[W,re]=h.useState(null),[te,ne]=h.useState(!1),[Be,se]=h.useState(new Date),Je=h.useRef(null),zt=h.useRef(null),{toast:Ee}=Dt(),{theme:Ar,toggleTheme:Tr}=qu(),{rows:tt,columns:Ze,isLoading:Jr,createRow:jt,updateRow:$n,deleteRow:pf,reorderRows:hf,reorderColumns:ff,addImageToRow:dl,updateImageInRow:gf,deleteImageFromRow:bf,createColumn:xf,deleteColumn:vf}=vi(),{data:Ir=[],isLoading:ul}=qt({queryKey:["/api/pages"]});h.useEffect(()=>{(async()=>{!ul&&Ir.length===0&&await Bn.mutateAsync({title:V,description:F,sortOrder:0})})()},[Ir.length,ul]);const Bn=Ce({mutationFn:async T=>await(await ze("POST","/api/pages",T)).json(),onSuccess:()=>{kr.invalidateQueries({queryKey:["/api/pages"]}),Ee({title:"Success",description:"Page created successfully!"})},onError:T=>{Ee({title:"Error",description:T instanceof Error?T.message:"Failed to create page",variant:"destructive"})}}),js=Ce({mutationFn:async({id:T,updates:$})=>await(await ze("PATCH",`/api/pages/${T}`,$)).json(),onSuccess:()=>{kr.invalidateQueries({queryKey:["/api/pages"]}),Ee({title:"Success",description:"Page updated successfully!"})},onError:T=>{Ee({title:"Error",description:T instanceof Error?T.message:"Failed to update page",variant:"destructive"})}}),Un=Ce({mutationFn:async T=>{await ze("DELETE",`/api/pages/${T}`)},onSuccess:()=>{kr.invalidateQueries({queryKey:["/api/pages"]}),Ee({title:"Success",description:"Page deleted successfully!"})},onError:T=>{Ee({title:"Error",description:T instanceof Error?T.message:"Failed to delete page",variant:"destructive"})}});h.useEffect(()=>{(async()=>{if(Ze.length===0)return;try{const ce=Ga(),Ve=await fetch(`/api/layout?userId=${encodeURIComponent(ce)}`);if(Ve.ok){const Ye=await Ve.json(),et=Object.keys(Ye.columnVisibility).filter(Ht=>Ye.columnVisibility[Ht]&&Ze.some(Zr=>Zr.id===Ht)),Gn=Ye.columnOrder.filter(Ht=>Ze.some(Zr=>Zr.id===Ht)),tr=Ze.find(Ht=>Ht.dataKey==="kilometer");tr&&!et.includes(tr.id)&&et.push(tr.id),et.length>0&&f(et),Gn.length>0&&x(Gn);return}else Ve.status===404&&localStorage.removeItem("tableColumnPreferences")}catch{}const $=["No","Code","Location","Delivery"],de=Ze.filter(ce=>$.includes(ce.name)).map(ce=>ce.id),Ae=Ze.filter(ce=>ce.dataKey==="latitude"||ce.dataKey==="longitude").map(ce=>ce.id);f(de.length>0?de:Ze.map(ce=>ce.id).filter(ce=>!Ae.includes(ce))),x(Ze.map(ce=>ce.id))})()},[Ze]);const ml=(T,$)=>{const de={visibleColumns:T,columnOrder:$};localStorage.setItem("tableColumnPreferences",JSON.stringify(de))},yf=T=>T.trim()?T.split(`
`).map($=>$.trim()).filter($=>$.length>0).map($=>{if($.includes(":")){const[de,...Ae]=$.split(":");return{term:de.trim(),definition:Ae.join(":").trim()}}return{term:"",definition:$}}):[],wf=T=>T.filter($=>$.term.trim()||$.definition.trim()).map($=>$.term.trim()?`${$.term.trim()} : ${$.definition.trim()}`:$.definition.trim()).join(`
`),jf=()=>{_e(null),at(""),ut(""),K([]),me(!0)},kf=T=>{_e(T),at(T.title||""),ut(T.description||""),K(yf(T.description||"")),me(!0)},Nf=async()=>{if(!We.trim()){Ee({title:"Error",description:"Page title is required",variant:"destructive"});return}const T=wf(nt);try{Ne?await js.mutateAsync({id:Ne.id,updates:{title:We.trim(),description:T}}):await Bn.mutateAsync({title:We.trim(),description:T,sortOrder:Ir.length}),me(!1),_e(null),at(""),ut("")}catch($){console.error("Error saving page:",$)}},Cf=T=>{if(Ir.length<=1){Ee({title:"Error",description:"Cannot delete the last page",variant:"destructive"});return}re(T),q(!0)},Sf=async()=>{if(!W)return;const T=Ir.findIndex($=>$.id===W.id);try{await Un.mutateAsync(W.id),T!==-1&&Le>=T&&Le>0&&Se($=>Math.max(0,$-1)),q(!1),re(null)}catch($){console.error("Error deleting page:",$)}},Ef=()=>{q(!1),re(null)},At=h.useMemo(()=>[...Ir].sort((T,$)=>T.sortOrder-$.sortOrder),[Ir]);h.useEffect(()=>{At.length>0&&Le>=At.length&&Se(Math.max(0,At.length-1))},[At.length,Le]),At[Le];const Rf=h.useMemo(()=>{if(b.length===0||m.length===0)return Ze;let T=b.map($=>Ze.find(de=>de.id===$)).filter($=>$!==void 0).filter($=>m.includes($.id));return e||(T=T.filter($=>$.dataKey!=="latitude"&&$.dataKey!=="longitude"&&$.dataKey!=="tollPrice")),T},[Ze,b,m,e]),Df=Array.from(new Set(tt.map(T=>T.route).filter(Boolean))).filter(T=>T!=="Warehouse").sort(),Pf=Array.from(new Set(tt.map(T=>T.delivery).filter(Boolean))).filter(T=>T!=="Available").sort(),cr=(()=>{const T=i.length>0,$=tt.find(Ae=>Ae.location==="QL Kitchen"),de=tt.filter(Ae=>{const ce=a===""||Object.values(Ae).some(et=>String(et).toLowerCase().includes(a.toLowerCase())),Ve=i.length===0||i.includes(Ae.route),Ye=c.length===0||!c.includes(Ae.delivery);return ce&&Ve&&Ye});if(T&&$){const Ae=de.filter(Ve=>Ve.location!=="QL Kitchen");return a===""||Object.values($).some(Ve=>String(Ve).toLowerCase().includes(a.toLowerCase()))?[$,...Ae]:Ae}return de})(),Af=h.useMemo(()=>{const T=tt.find(ce=>ce.location==="QL Kitchen");if(!T)return cr.map(ce=>({...ce,kilometer:"",segmentDistance:0}));if(!T.latitude||!T.longitude)return cr.map(ce=>({...ce,kilometer:"",segmentDistance:0}));const $=parseFloat(T.latitude),de=parseFloat(T.longitude);if(!Number.isFinite($)||!Number.isFinite(de))return cr.map(ce=>({...ce,kilometer:"",segmentDistance:0}));if(a!==""||i.length>0||c.length>0){let ce=0,Ve=$,Ye=de;return cr.map((et,Gn)=>{if(et.location==="QL Kitchen")return ce=0,Ve=$,Ye=de,{...et,kilometer:0,segmentDistance:0};if(!et.latitude||!et.longitude)return{...et,kilometer:"",segmentDistance:0};const tr=parseFloat(et.latitude),Ht=parseFloat(et.longitude);if(!Number.isFinite(tr)||!Number.isFinite(Ht))return{...et,kilometer:"",segmentDistance:0};const Zr=Pn(Ve,Ye,tr,Ht);return ce+=Zr,Ve=tr,Ye=Ht,{...et,kilometer:ce,segmentDistance:Zr}})}else return cr.map(ce=>{if(ce.location==="QL Kitchen")return{...ce,kilometer:0,segmentDistance:0};if(!ce.latitude||!ce.longitude)return{...ce,kilometer:"",segmentDistance:0};const Ve=parseFloat(ce.latitude),Ye=parseFloat(ce.longitude);if(!Number.isFinite(Ve)||!Number.isFinite(Ye))return{...ce,kilometer:"",segmentDistance:0};const et=Pn($,de,Ve,Ye);return{...ce,kilometer:et,segmentDistance:et}})},[tt,cr,a,i,c]),Tf=async()=>{o(""),l([]),d([]);const T=tt.map($=>$.location!=="QL Kitchen"&&$.no!==$.sortOrder?$n.mutateAsync({id:$.id,updates:{no:$.sortOrder}}):Promise.resolve());await Promise.all(T)},If=()=>{Me(!0)},Of=()=>{Me(!1),Ee({title:"Data Saved",description:"Table data has been saved successfully."})},Mf=()=>{if(!e){Ee({title:"Access Denied",description:"Please enable Edit mode to add new rows.",variant:"destructive"});return}A(!0)},Lf=async()=>{try{const{tngSite:T,tngRoute:$}=Oc(),de={no:0,route:"New Route",location:"New Location",delivery:"Pending",tngSite:T,tngRoute:$,images:[]};O==="end"?(await jt.mutateAsync(de),Ee({title:"Row Added",description:"New row has been added to the end of the table."})):(await jt.mutateAsync(de),Ee({title:"Row Added",description:`New row has been added at position ${B}.`})),A(!1)}catch{Ee({title:"Error",description:"Failed to add new row.",variant:"destructive"})}},_f=async(T,$)=>{f(T),x($),ml(T,$);try{const de=$.filter(Ve=>Ze.some(Ye=>Ye.id===Ve)),Ae=Ze.reduce((Ve,Ye)=>(Ve[Ye.id]=T.includes(Ye.id),Ve),{}),ce=Ga();await fetch("/api/layout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:ce,columnOrder:de,columnVisibility:Ae})})}catch(de){console.error("Failed to save layout to database:",de)}Ee({title:"Columns Updated",description:"Your column preferences have been saved."})},Ff=()=>{e?G(!0):g?(t(!0),Ee({title:"Edit Mode Enabled",description:"You can now edit and modify table data."})):(k("edit"),w(!0))},zf=async()=>{Q(!0),G(!1),u(!1),A(!1),s(null),k(null);try{const $={userId:Ga(),columnVisibility:Object.fromEntries(Ze.map(de=>[de.id,m.includes(de.id)])),columnOrder:b};await ze("POST","/api/layout",$)}catch(T){console.error("Failed to auto-save layout:",T)}await new Promise(T=>setTimeout(T,300)),t(!1),v(!1),Q(!1),Ee({title:"Edit Mode Disabled",description:"Layout auto-saved. Edit mode has been turned off and password cleared."})},$f=()=>{G(!1)};h.useEffect(()=>{!e&&g&&v(!1)},[e,g]),h.useEffect(()=>{localStorage.getItem("hasSlideCarousel")==="true"&&fe(!1)},[]),h.useEffect(()=>{const T=setInterval(()=>{se(new Date)},1e3);return()=>clearInterval(T)},[]);const Bf=T=>{const $={weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};return T.toLocaleString("en-US",$)};h.useEffect(()=>{we&&(we.scrollTo(0,!1),er(0))},[we]),h.useEffect(()=>{if(!we)return;const T=()=>{const $=we.selectedScrollSnap(),de=ot;zt.current&&clearTimeout(zt.current),P(de),er($),Pa(),zt.current=setTimeout(()=>{P(null),zt.current=null},400)};return er(we.selectedScrollSnap()),we.on("select",T),()=>{we.off("select",T),zt.current&&clearTimeout(zt.current)}},[we,ot]);const Pa=()=>{fe(!1),localStorage.setItem("hasSlideCarousel","true")},Uf=()=>{v(!0),j==="edit"&&(t(!0),Ee({title:"Edit Mode Enabled",description:"You can now edit and modify table data."})),k(null)},Gf=async()=>{if(!e){Ee({title:"Access Denied",description:"Please enable Edit mode to generate TnG values.",variant:"destructive"});return}try{const T=cr.filter($=>!$.tngSite||$.tngSite===""||$.tngSite==="Site"||!$.tngRoute||$.tngRoute===""||$.tngRoute==="Route");if(T.length===0){Ee({title:"No Rows to Update",description:"All rows already have TnG values assigned."});return}for(const $ of T){const{tngSite:de,tngRoute:Ae}=Oc();await $n.mutateAsync({id:$.id,updates:{tngSite:de,tngRoute:Ae}})}Ee({title:"TnG Values Generated",description:`Generated TnG values for ${T.length} row${T.length!==1?"s":""}.`})}catch{Ee({title:"Error",description:"Failed to generate TnG values.",variant:"destructive"})}},Vf=async()=>{if(!e){Ee({title:"Access Denied",description:"Please enable Edit mode to calculate tolls.",variant:"destructive"});return}try{if(Ee({title:"Calculating Tolls",description:"Computing toll prices using Google Maps"}),!(await fetch("/api/calculate-tolls",{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw new Error;Ee({title:"Tolls Calculated",description:"Toll prices have been updated."}),window.location.reload()}catch{Ee({title:"Error",description:"Failed to calculate tolls.",variant:"destructive"})}};ye.useState(!0);const[qf,Wf]=ye.useState(!1);return ye.useEffect(()=>{const T=setTimeout(()=>{Wf(!0)},5e3);return()=>clearTimeout(T)},[]),Jr||!qf?n.jsx("div",{className:"min-h-screen relative",children:n.jsx(ja,{message:"Loading table data...",type:"wave"})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-in fade-in duration-500",children:n.jsx(AN,{editMode:e,onEditModeRequest:Ff,onShowCustomization:()=>u(!0),onAddRow:Mf,onSaveData:If,onGenerateTng:Gf,onOptimizeRoute:()=>he(!0),onCalculateTolls:Vf,onSaveLayout:()=>{},onSavedLinks:()=>Qe(!0),onShowTutorial:()=>ne(!0),onAddColumn:async T=>{try{const $=await xf.mutateAsync(T),de=[...m,$.id],Ae=[...b,$.id];f(de),x(Ae),ml(de,Ae),Ee({title:"Success",description:`Column "${T.name}" created successfully!`})}catch($){throw console.error("Failed to create column:",$),$}},isAuthenticated:!0,theme:Ar,onToggleTheme:Tr})}),n.jsx("main",{className:"pt-4 animate-in slide-in-from-bottom-4 fade-in duration-700 delay-150",children:n.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-3xl","data-testid":"table-page",children:[n.jsx("div",{className:"mb-8 relative animate-in fade-in slide-in-from-top-2 duration-600 delay-300",children:At.length>0?n.jsxs(Wh,{className:"w-full pb-16",opts:{loop:At.length>1},setApi:pt,children:[n.jsxs("div",{className:"overflow-hidden rounded-xl border border-blue-200 dark:border-blue-500/30 bg-gradient-to-r from-blue-50/80 to-white/80 dark:from-blue-950/40 dark:to-gray-900/40 backdrop-blur-sm shadow-lg transition-all duration-500",children:[n.jsx(Hh,{children:At.map((T,$)=>{const de=$===ot,Ae=$===lr;return n.jsxs(Kh,{className:de&&lr!==null?"carousel-zoom-in":Ae&&lr!==null?"carousel-zoom-out":"",children:[n.jsxs("div",{className:"flex items-center justify-between px-6 py-3 cursor-pointer hover:bg-blue-100/50 dark:hover:bg-blue-900/30 transition-colors duration-300 text-sm",onClick:()=>C(!R),children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[At.length>1&&ie&&n.jsxs("div",{className:"flex items-center gap-0.5",children:[n.jsx("style",{children:`
                                @keyframes slideLeft {
                                  0%, 100% { opacity: 0.3; transform: translateX(0px); }
                                  50% { opacity: 1; transform: translateX(-4px); }
                                }
                                .arrow-left-1 { animation: slideLeft 1.5s ease-in-out infinite; animation-delay: 0s; }
                                .arrow-left-2 { animation: slideLeft 1.5s ease-in-out infinite; animation-delay: 0.2s; }
                                .arrow-left-3 { animation: slideLeft 1.5s ease-in-out infinite; animation-delay: 0.4s; }
                              `}),n.jsx("svg",{className:"w-4 h-4 text-blue-500 dark:text-blue-400 arrow-left-1",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})}),n.jsx("svg",{className:"w-4 h-4 text-blue-500 dark:text-blue-400 arrow-left-2",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})}),n.jsx("svg",{className:"w-4 h-4 text-blue-500 dark:text-blue-400 arrow-left-3",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),n.jsx("h1",{className:"font-bold text-gray-500 dark:text-blue-300",style:{fontSize:"12px"},"data-testid":`page-title-${T.id}`,children:T.title||"Untitled"}),At.length>1&&ie&&n.jsxs("div",{className:"flex items-center gap-0.5",children:[n.jsx("style",{children:`
                                @keyframes slideRight {
                                  0%, 100% { opacity: 0.3; transform: translateX(0px); }
                                  50% { opacity: 1; transform: translateX(4px); }
                                }
                                .arrow-right-1 { animation: slideRight 1.5s ease-in-out infinite; animation-delay: 0s; }
                                .arrow-right-2 { animation: slideRight 1.5s ease-in-out infinite; animation-delay: 0.2s; }
                                .arrow-right-3 { animation: slideRight 1.5s ease-in-out infinite; animation-delay: 0.4s; }
                              `}),n.jsx("svg",{className:"w-4 h-4 text-blue-500 dark:text-blue-400 arrow-right-1",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),n.jsx("svg",{className:"w-4 h-4 text-blue-500 dark:text-blue-400 arrow-right-2",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),n.jsx("svg",{className:"w-4 h-4 text-blue-500 dark:text-blue-400 arrow-right-3",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]}),e&&n.jsxs("div",{className:"flex items-center gap-2",onClick:ce=>ce.stopPropagation(),children:[n.jsx(I,{size:"sm",variant:"ghost",onClick:()=>kf(T),className:"h-6 w-6 p-0","data-testid":`button-edit-page-${T.id}`,children:n.jsx(Ab,{className:"h-3 w-3 text-blue-500 dark:text-blue-400"})}),At.length>1&&n.jsx(I,{size:"sm",variant:"ghost",onClick:()=>Cf(T),disabled:Un.isPending,className:"h-6 w-6 p-0","data-testid":`button-delete-page-${T.id}`,children:n.jsx(nn,{className:"h-3 w-3 text-red-500 dark:text-red-400"})})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("button",{className:"p-2 rounded-full hover:bg-blue-200/50 dark:hover:bg-blue-800/50 transition-all duration-300 group","data-testid":"button-toggle-header",children:R?n.jsx(xu,{className:"h-4 w-4 text-blue-600 dark:text-blue-400 group-hover:scale-110 transition-transform duration-300"}):n.jsx(ua,{className:"h-4 w-4 text-blue-600 dark:text-blue-400 group-hover:scale-110 transition-transform duration-300"})})})]}),n.jsx("div",{className:`overflow-hidden transition-all duration-500 ease-in-out ${R?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:n.jsxs("div",{className:"px-4 pb-3 border-t border-blue-200/50 dark:border-blue-500/20 pt-3 bg-gradient-to-b from-blue-50/30 to-transparent dark:from-blue-950/20 dark:to-transparent",children:[n.jsx("dl",{className:"space-y-1",style:{fontSize:"10px",lineHeight:"1.4"},"data-testid":`page-description-${T.id}`,children:(T.description||"").split(`
`).map((ce,Ve)=>{const Ye=ce.trim();if(!Ye)return null;if(Ye.includes(":")){const[et,...Gn]=Ye.split(":"),tr=Gn.join(":").trim();return n.jsxs("div",{className:"flex items-start gap-3",style:{lineHeight:"1.4"},children:[n.jsx("dt",{className:"w-18 flex-shrink-0 font-semibold text-blue-600 dark:text-blue-400",style:{margin:0,padding:0},children:et.trim()}),n.jsx("dd",{className:"flex-1 text-gray-700 dark:text-gray-300",style:{margin:0,padding:0},children:tr})]},Ve)}return n.jsx("p",{className:"text-gray-700 dark:text-gray-300",style:{margin:"2px 0",lineHeight:"1.4"},children:Ye},Ve)})}),n.jsx("div",{className:"mt-3 pt-2 border-t border-blue-200/30 dark:border-blue-500/10 flex justify-end",children:n.jsx("div",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-normal",children:Bf(Be)})})]})})]},T.id)})}),e&&n.jsx("div",{className:"px-6 pb-4 border-t border-blue-200/50 dark:border-blue-500/20",children:n.jsxs(I,{onClick:jf,className:"w-full mt-4 bg-blue-500 hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700","data-testid":"button-add-page",children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Add Page"]})})]}),At.length>1&&e&&n.jsxs("div",{className:"flex justify-center gap-4 mt-4",children:[n.jsx(Qh,{className:"relative left-0 top-0 translate-x-0 translate-y-0","data-testid":"button-prev-page",onClick:Pa}),n.jsx(Yh,{className:"relative right-0 top-0 translate-x-0 translate-y-0","data-testid":"button-next-page",onClick:Pa})]})]}):n.jsx("div",{className:"overflow-hidden rounded-xl border border-blue-200 dark:border-blue-500/30 bg-gradient-to-r from-blue-50/80 to-white/80 dark:from-blue-950/40 dark:to-gray-900/40 backdrop-blur-sm shadow-lg transition-all duration-500 px-6 py-4 text-center text-gray-500",children:n.jsx("p",{children:"No pages available"})})}),n.jsx(Fe,{open:X,onOpenChange:me,children:n.jsxs(Te,{"data-testid":"dialog-page-form",children:[n.jsxs(Ie,{children:[n.jsx(Oe,{style:{fontSize:"10px"},children:Ne?"Edit Page":"Add Page"}),n.jsx(qe,{style:{fontSize:"10px"},children:Ne?"Update the page details below.":"Create a new page with a title and description."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"page-title",style:{fontSize:"10px"},children:"Title"}),n.jsx(ke,{id:"page-title",value:We,onChange:T=>at(T.target.value),placeholder:"Enter page title...",style:{fontSize:"10px"},"data-testid":"input-page-title"})]}),n.jsxs("div",{children:[n.jsx(ue,{style:{fontSize:"10px"},children:"Description"}),n.jsxs("div",{className:"space-y-3 border border-gray-200 dark:border-gray-700 rounded-md p-3",children:[nt.length>0?n.jsx("div",{className:"space-y-2",children:nt.map((T,$)=>n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(ke,{value:T.term,onChange:de=>{const Ae=[...nt];Ae[$].term=de.target.value,K(Ae)},className:"w-24",style:{fontSize:"10px"},placeholder:"Term","data-testid":`input-page-item-term-${$}`}),n.jsx(ke,{value:T.definition,onChange:de=>{const Ae=[...nt];Ae[$].definition=de.target.value,K(Ae)},className:"flex-1",style:{fontSize:"10px"},placeholder:"Definition","data-testid":`input-page-item-definition-${$}`}),n.jsx(I,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 bg-transparent border-transparent hover:bg-transparent hover:border-transparent text-red-600 hover:text-red-700",onClick:()=>{const de=nt.filter((Ae,ce)=>ce!==$);K(de)},"data-testid":`button-remove-page-item-${$}`,children:n.jsx(nn,{className:"w-3 h-3"})})]},$))}):n.jsx("p",{className:"text-muted-foreground",style:{fontSize:"10px"},children:'No items yet. Click "Add Item" to start.'}),n.jsxs(I,{variant:"outline",size:"sm",onClick:()=>{K([...nt,{term:"",definition:""}])},className:"bg-transparent border-transparent hover:bg-transparent hover:border-transparent text-blue-600 hover:text-blue-700",style:{fontSize:"10px"},"data-testid":"button-add-page-item",children:[n.jsx(Rr,{className:"w-3 h-3 mr-1"}),"Add Item"]})]})]})]}),n.jsxs(He,{children:[n.jsx(I,{variant:"outline",onClick:()=>me(!1),disabled:Bn.isPending||js.isPending,style:{fontSize:"10px"},"data-testid":"button-cancel-page",children:"Cancel"}),n.jsx(I,{onClick:Nf,disabled:Bn.isPending||js.isPending||!We.trim(),style:{fontSize:"10px"},"data-testid":"button-save-page",children:Bn.isPending||js.isPending?"Saving...":"Save"})]})]})}),n.jsx(Fe,{open:E,onOpenChange:q,children:n.jsxs(Te,{className:"sm:max-w-md animate-in zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 duration-300 bg-gradient-to-br from-red-50 to-white dark:from-red-950/40 dark:to-gray-900 border-red-200 dark:border-red-500/30 shadow-2xl",children:[n.jsxs(Ie,{className:"space-y-3",children:[n.jsx("div",{className:"mx-auto w-12 h-12 bg-red-100 dark:bg-red-900/50 rounded-full flex items-center justify-center animate-in zoom-in-50 duration-500 delay-100",children:n.jsx(nn,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),n.jsx(Oe,{className:"text-center text-red-900 dark:text-red-100",style:{fontSize:"14px"},children:"Delete Page"}),n.jsxs(qe,{className:"text-center text-gray-600 dark:text-gray-400",style:{fontSize:"11px"},children:['Are you sure you want to delete the page "',W==null?void 0:W.title,'"? This action cannot be undone.']})]}),n.jsxs(He,{className:"flex-row justify-center gap-3 sm:justify-center mt-4",children:[n.jsx(I,{variant:"outline",onClick:Ef,disabled:Un.isPending,className:"min-w-[100px] border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-800",style:{fontSize:"11px"},"data-testid":"button-cancel-delete-page",children:"Cancel"}),n.jsx(I,{onClick:Sf,disabled:Un.isPending,className:"min-w-[100px] bg-red-600 hover:bg-red-700 dark:bg-red-500 dark:hover:bg-red-600 text-white shadow-lg",style:{fontSize:"11px"},"data-testid":"button-confirm-delete-page",children:Un.isPending?"Deleting...":"Delete Page"})]})]})}),r&&r!=="access-denied"&&!L&&(()=>{const T=tt.find(de=>de.id===r);return T?T.images&&T.images.length>0?n.jsx(bN,{rowId:r,images:T.images,location:T.location,onClose:()=>s(null),onAddImage:dl,onUpdateImage:gf,onDeleteImage:bf}):n.jsx(gN,{rowId:r,location:T.location,onClose:()=>s(null),onAddImage:dl}):null})(),n.jsx("div",{ref:Je,className:"animate-in fade-in slide-in-from-bottom-3 duration-700 delay-500",children:n.jsx(Hi,{rows:Af,columns:Rf,editMode:e,onUpdateRow:$n,onDeleteRow:pf,onReorderRows:hf,onReorderColumns:ff,onDeleteColumn:vf,onSelectRowForImage:T=>{T==="access-denied"?Ee({title:"Access Denied",description:"Please enable Edit mode to add images.",variant:"destructive"}):s(T)},onShowCustomization:()=>u(!0),onOptimizeRoute:()=>he(!0),onShareTable:()=>Re(!0),onSavedLinks:()=>Qe(!0),isAuthenticated:g,isLoading:L,isFiltered:a!==""||i.length>0||c.length>0,searchTerm:a,onSearchTermChange:o,filterValue:i,onFilterValueChange:l,deliveryFilterValue:c,onDeliveryFilterValueChange:d,routeOptions:Df,deliveryOptions:Pf,onClearAllFilters:Tf,filteredRowsCount:cr.length,totalRowsCount:tt.length})}),n.jsx(kN,{open:p&&!L,onOpenChange:u,columns:Ze,visibleColumns:m,onApplyChanges:_f,editMode:e}),L&&n.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-500/20 via-blue-600/30 to-blue-700/20 dark:from-blue-600/30 dark:via-blue-700/40 dark:to-blue-800/30 backdrop-blur-lg z-50 flex items-center justify-center animate-in fade-in duration-300",children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 -m-8",children:n.jsxs("div",{className:"w-32 h-32 mx-auto",children:[n.jsx("div",{className:"absolute inset-0 bg-blue-500/20 dark:bg-blue-400/20 rounded-full animate-ping",style:{animationDuration:"1.5s"}}),n.jsx("div",{className:"absolute inset-0 bg-blue-500/10 dark:bg-blue-400/10 rounded-full animate-pulse"})]})}),n.jsx("div",{className:"relative bg-white/95 dark:bg-slate-900/95 rounded-2xl p-8 shadow-2xl border-2 border-blue-500/30 dark:border-blue-400/30 backdrop-blur-xl",children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsxs("div",{className:"relative w-16 h-16",children:[n.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-200 dark:border-blue-800"}),n.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-transparent border-t-blue-500 dark:border-t-blue-400 animate-spin"}),n.jsx("div",{className:"absolute inset-2 rounded-full bg-gradient-to-br from-blue-500/20 to-blue-600/20 dark:from-blue-400/20 dark:to-blue-500/20 animate-pulse"})]}),n.jsxs("div",{className:"text-center space-y-1",children:[n.jsx("div",{className:"text-lg font-semibold bg-gradient-to-r from-blue-600 to-blue-700 dark:from-blue-400 dark:to-blue-500 bg-clip-text text-transparent",children:"Exiting Edit Mode"}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Saving changes and clearing authentication..."})]}),n.jsx("div",{className:"w-48 h-1.5 bg-blue-100 dark:bg-blue-900 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 dark:from-blue-400 dark:to-blue-500 rounded-full animate-pulse",style:{width:"100%"}})})]})})]})}),n.jsx(NN,{open:y&&!L,onOpenChange:T=>{w(T),T||k(null)},onSuccess:Uf,title:"Authentication Required",description:"Please enter the password to access edit mode."}),n.jsx(Fe,{open:_&&!L,onOpenChange:G,children:n.jsxs(Te,{className:"sm:max-w-md animate-in zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 duration-300 bg-gradient-to-br from-red-50 to-white dark:from-red-950/40 dark:to-gray-900 border-red-200 dark:border-red-500/30 shadow-2xl",children:[n.jsxs(Ie,{className:"space-y-3",children:[n.jsx("div",{className:"mx-auto w-12 h-12 bg-red-100 dark:bg-red-900/50 rounded-full flex items-center justify-center animate-in zoom-in-50 duration-500 delay-100",children:n.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),n.jsx(Oe,{className:"text-center text-red-900 dark:text-red-100",style:{fontSize:"14px"},children:"Exit Edit Mode"}),n.jsx(qe,{className:"text-center text-gray-600 dark:text-gray-400",style:{fontSize:"11px"},children:"Are you sure you want to exit edit mode? Your authentication will be cleared and you'll need to enter the password again to re-enable edit mode."})]}),n.jsxs(He,{className:"flex-row justify-center gap-3 sm:justify-center mt-4",children:[n.jsx(I,{variant:"outline",onClick:$f,className:"min-w-[100px] border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-800",style:{fontSize:"11px"},"data-testid":"button-cancel-exit",children:"Cancel"}),n.jsx(I,{onClick:zf,className:"min-w-[100px] bg-red-600 hover:bg-red-700 dark:bg-red-500 dark:hover:bg-red-600 text-white shadow-lg",style:{fontSize:"11px"},"data-testid":"button-confirm-exit",children:"Exit Edit Mode"})]})]})}),n.jsx(Fe,{open:ae,onOpenChange:Me,children:n.jsxs(Te,{className:"sm:max-w-md animate-in zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 duration-300 bg-gradient-to-br from-blue-50 to-white dark:from-blue-950/40 dark:to-gray-900 border-blue-200 dark:border-blue-500/30 shadow-2xl",children:[n.jsxs(Ie,{className:"space-y-3",children:[n.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-100 dark:bg-blue-900/50 rounded-full flex items-center justify-center animate-in zoom-in-50 duration-500 delay-100",children:n.jsx("svg",{className:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),n.jsx(Oe,{className:"text-center text-blue-900 dark:text-blue-100",style:{fontSize:"14px"},children:"Confirm Save Changes"}),n.jsx(qe,{className:"text-center text-gray-600 dark:text-gray-400",style:{fontSize:"11px"},children:"Are you sure you want to save all changes made to the table data?"})]}),n.jsxs(He,{className:"flex-row justify-center gap-3 sm:justify-center mt-4",children:[n.jsx(I,{variant:"outline",onClick:()=>Me(!1),className:"min-w-[100px] border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-800",style:{fontSize:"11px"},"data-testid":"button-cancel-save",children:"Cancel"}),n.jsx(I,{onClick:Of,className:"min-w-[100px] bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white shadow-lg",style:{fontSize:"11px"},"data-testid":"button-confirm-save",children:"Save Changes"})]})]})}),n.jsx(Fe,{open:S&&!L,onOpenChange:A,children:n.jsxs(Te,{className:"sm:max-w-md",children:[n.jsxs(Ie,{children:[n.jsx(Oe,{style:{fontSize:"12px"},children:"Select Row Position"}),n.jsx(qe,{style:{fontSize:"10px"},children:"Choose where to insert the new row in the table."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs(on,{value:O,onValueChange:T=>M(T),className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Mt,{value:"end",id:"end"}),n.jsxs(ue,{htmlFor:"end",style:{fontSize:"10px"},children:["Add to end of list (Position ",tt.length+1,")"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Mt,{value:"specific",id:"specific"}),n.jsx(ue,{htmlFor:"specific",style:{fontSize:"10px"},children:"Insert at specific position"})]})]}),O==="specific"&&n.jsxs("div",{className:"ml-6 space-y-2",children:[n.jsxs(ue,{htmlFor:"position",style:{fontSize:"10px"},children:["Position (1 to ",tt.length+1,"):"]}),n.jsx(ke,{id:"position",type:"number",value:B,onChange:T=>U(Math.max(1,Math.min(tt.length+1,parseInt(T.target.value)||1))),min:1,max:tt.length+1,className:"w-20",style:{fontSize:"10px"}})]})]}),n.jsxs(He,{className:"space-x-2",children:[n.jsx(I,{variant:"outline",onClick:()=>A(!1),style:{fontSize:"10px"},children:"Cancel"}),n.jsx(I,{onClick:Lf,style:{fontSize:"10px"},children:"Add Row"})]})]})}),n.jsx(TN,{open:ee,onOpenChange:he,rows:tt}),n.jsx(IN,{open:rt,onOpenChange:Re,tableState:{filters:{searchTerm:a,routeFilters:i,deliveryFilters:c},sorting:null,columnVisibility:Ze.reduce((T,$)=>(T[$.id]=m.includes($.id),T),{}),columnOrder:b}}),n.jsx(KN,{open:Ge,onOpenChange:Qe}),te&&n.jsx(YN,{editMode:e,onClose:()=>ne(!1)})]})}),n.jsx(Ca,{editMode:e})]})}function O2(){const[,e]=Id("/share/:shareId"),t=e==null?void 0:e.shareId,{rows:r,columns:s,isLoading:a}=vi(),{data:o,isLoading:i,error:l}=qt({queryKey:["/api/share-table",t],enabled:!!t}),[c,d]=h.useState(""),[p,u]=h.useState([]),[m,f]=h.useState([]),[b,x]=h.useState(null);h.useEffect(()=>{o!=null&&o.tableState&&(d(o.tableState.filters.searchTerm||""),u(o.tableState.filters.deliveryFilters||[]),f(o.tableState.filters.routeFilters||[]))},[o]);const{filteredRows:g,displayColumns:v,deliveryOptions:y}=h.useMemo(()=>{if(r.length===0||s.length===0)return{filteredRows:r,displayColumns:s,deliveryOptions:[]};const _=Array.from(new Set(r.map(V=>V.delivery).filter(Boolean)));let G=[...r];const L=new Date().getDay(),Q=[1,3,5,0].includes(L),F=[2,4,6].includes(L);G=G.sort((V,z)=>{const R=V.deliveryAlt||"normal",C=z.deliveryAlt||"normal";if(R==="inactive"&&C!=="inactive")return 1;if(R!=="inactive"&&C==="inactive")return-1;if(Q){if((R==="alt1"||R==="normal")&&C==="alt2")return-1;if(R==="alt2"&&(C==="alt1"||C==="normal"))return 1}else if(F){if((R==="alt2"||R==="normal")&&C==="alt1")return-1;if(R==="alt1"&&(C==="alt2"||C==="normal"))return 1}return 0}),m.length>0&&(G=G.filter(V=>m.includes(V.route))),c&&(G=G.filter(V=>Object.values(V).some(z=>String(z).toLowerCase().includes(c.toLowerCase())))),p.length>0&&(G=G.filter(V=>!p.includes(V.delivery)));let D=s;if(o!=null&&o.tableState){const{columnVisibility:V,columnOrder:z}=o.tableState;D=s.filter(C=>V[C.id]!==!1),D=z.map(C=>D.find(ee=>ee.id===C)).filter(C=>C!==void 0)}return D=D.filter(V=>V.dataKey!=="latitude"&&V.dataKey!=="longitude"&&V.dataKey!=="tollPrice"),{filteredRows:G,displayColumns:D,deliveryOptions:_}},[r,s,o,c,p,m]),w=h.useMemo(()=>{const _=r.find(F=>F.location==="QL Kitchen");if(!_||!_.latitude||!_.longitude)return g.map(F=>({...F,kilometer:"",segmentDistance:0}));const G=parseFloat(_.latitude),L=parseFloat(_.longitude);if(!Number.isFinite(G)||!Number.isFinite(L))return g.map(F=>({...F,kilometer:"",segmentDistance:0}));if(c!==""||m.length>0||p.length>0){let F=0,D=G,V=L;return g.map(z=>{if(z.location==="QL Kitchen")return F=0,D=G,V=L,{...z,kilometer:0,segmentDistance:0};if(!z.latitude||!z.longitude)return{...z,kilometer:"",segmentDistance:0};const R=parseFloat(z.latitude),C=parseFloat(z.longitude);if(!Number.isFinite(R)||!Number.isFinite(C))return{...z,kilometer:"",segmentDistance:0};const ee=Pn(D,V,R,C);return F+=ee,D=R,V=C,{...z,kilometer:F,segmentDistance:ee}})}else return g.map(F=>{if(F.location==="QL Kitchen")return{...F,kilometer:0,segmentDistance:0};if(!F.latitude||!F.longitude)return{...F,kilometer:"",segmentDistance:0};const D=parseFloat(F.latitude),V=parseFloat(F.longitude);if(!Number.isFinite(D)||!Number.isFinite(V))return{...F,kilometer:"",segmentDistance:0};const z=Pn(G,L,D,V);return{...F,kilometer:z,segmentDistance:z}})},[r,g,c,m,p]),j=Ce({mutationFn:async _=>(console.log("Read-only mode: Changes not saved",_),_)}),k=Ce({mutationFn:async _=>{console.log("Read-only mode: Delete not allowed",_)}}),S=Ce({mutationFn:async _=>_.map(L=>r.find(Q=>Q.id===L)).filter(L=>L!==void 0)}),A=Ce({mutationFn:async _=>_.map(L=>s.find(Q=>Q.id===L)).filter(L=>L!==void 0)}),O=Ce({mutationFn:async _=>{console.log("Read-only mode: Column delete not allowed",_)}}),M=()=>{d(""),u([])},[B,U]=ye.useState(!1);return ye.useEffect(()=>{const _=setTimeout(()=>{U(!0)},5e3);return()=>clearTimeout(_)},[]),a||i||!B?n.jsx("div",{className:"min-h-screen relative",children:n.jsx(ja,{message:"Loading shared table...",type:"wave"})}):l||!o?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx("div",{className:"flex h-16 w-16 mx-auto items-center justify-center rounded-lg bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400",children:n.jsx(fi,{className:"h-8 w-8"})}),n.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Shared Table Not Found"}),n.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"The shared table you're looking for doesn't exist or has been removed."})]})}):n.jsxs(n.Fragment,{children:[n.jsx("nav",{className:"sticky top-0 z-50 w-full border-b-2 border-blue-500/50 dark:border-blue-400/50 bg-gradient-to-r from-blue-500/10 via-blue-600/10 to-blue-700/10 dark:from-blue-500/20 dark:via-blue-600/20 dark:to-blue-700/20 backdrop-blur supports-[backdrop-filter]:bg-background/60 shadow-lg shadow-blue-500/20",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsxs("div",{className:"flex h-14 items-center justify-between text-[12px]",children:[n.jsx("div",{className:"flex items-center space-x-2",children:n.jsxs("div",{className:"flex items-center space-x-2 hover:opacity-80 transition-opacity",children:[n.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg overflow-hidden",children:n.jsx("img",{src:"/assets/FamilyMart.png",alt:"Logo",className:"h-full w-full object-cover"})}),n.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300",style:{fontSize:"14px"},children:"Shared Table View"})]})}),n.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Interactive View"})]})})}),n.jsx("main",{className:"pt-4",children:n.jsx("div",{className:"container mx-auto px-4 py-8",children:n.jsx(Hi,{rows:w,columns:v,editMode:!1,isSharedView:!0,hideShareButton:!0,onUpdateRow:j,onDeleteRow:k,onReorderRows:S,onReorderColumns:A,onDeleteColumn:O,onSelectRowForImage:x,onShowCustomization:()=>{},onOptimizeRoute:()=>{},isAuthenticated:!1,searchTerm:c,onSearchTermChange:d,filterValue:[],onFilterValueChange:()=>{},deliveryFilterValue:p,onDeliveryFilterValueChange:u,routeOptions:[],deliveryOptions:y,onClearAllFilters:M,filteredRowsCount:w.length,totalRowsCount:r.length})})}),n.jsx(Ca,{editMode:!1})]})}function M2(){const[e,t]=h.useState(new Set),[r,s]=h.useState(!1),[a,o]=h.useState(!1),[i,l]=h.useState(null),[c,d]=h.useState(""),[p,u]=h.useState(""),[m,f]=h.useState(""),[b,x]=h.useState(""),[g,v]=h.useState(""),[y,w]=h.useState([]),{toast:j}=Dt(),k=Mn();qu();const[,S]=oi(),{data:A=[],isLoading:O}=qt({queryKey:["/api/table-rows"]}),{data:M=[],isLoading:B}=qt({queryKey:["/api/custom-tables"]}),U=A.filter(R=>{const C=g===""||Object.values(R).some(he=>String(he).toLowerCase().includes(g.toLowerCase())),ee=y.length===0||!y.includes(R.delivery);return C&&ee});Array.from(new Set(A.map(R=>R.delivery).filter(Boolean)));const _=Ce({mutationFn:async R=>{const C=await ze("POST","/api/custom-tables",R);if(!C.ok)throw new Error("Failed to create custom table");return C.json()},onSuccess:()=>{k.invalidateQueries({queryKey:["/api/custom-tables"]}),s(!1),d(""),u(""),t(new Set),j({title:"Custom table created!",description:"Your custom table has been created successfully."})},onError:()=>{j({title:"Error",description:"Failed to create custom table. Please try again.",variant:"destructive"})}}),G=Ce({mutationFn:async R=>{const C=await ze("PUT",`/api/custom-tables/${R.id}/rows`,{name:R.name,description:R.description,rowIds:R.rowIds});if(!C.ok)throw new Error("Failed to update custom table");return C.json()},onSuccess:()=>{k.invalidateQueries({queryKey:["/api/custom-tables"]}),o(!1),l(null),d(""),u(""),t(new Set),j({title:"Custom table updated!",description:"Your custom table has been updated successfully."})},onError:()=>{j({title:"Error",description:"Failed to update custom table. Please try again.",variant:"destructive"})}}),L=Ce({mutationFn:async R=>{if(!(await ze("DELETE",`/api/custom-tables/${R}`)).ok)throw new Error("Failed to delete custom table")},onSuccess:()=>{k.invalidateQueries({queryKey:["/api/custom-tables"]}),j({title:"Table deleted",description:"Custom table has been deleted."})},onError:()=>{j({title:"Error",description:"Failed to delete custom table.",variant:"destructive"})}}),Q=R=>{const C=new Set(e);C.has(R)?C.delete(R):C.add(R),t(C)},F=()=>{if(!c.trim()){j({title:"Name required",description:"Please enter a table name.",variant:"destructive"});return}if(e.size===0){j({title:"No locations selected",description:"Please select at least one location.",variant:"destructive"});return}_.mutate({name:c,description:p,rowIds:Array.from(e)})},D=async R=>{l(R),d(R.name),u(R.description||"");try{const ee=await(await ze("GET",`/api/custom-tables/${R.id}/rows`)).json();t(new Set(ee.map(he=>he.id))),o(!0)}catch{j({title:"Error",description:"Failed to load table data.",variant:"destructive"})}},V=()=>{if(i){if(!c.trim()){j({title:"Name required",description:"Please enter a table name.",variant:"destructive"});return}if(e.size===0){j({title:"No locations selected",description:"Please select at least one location.",variant:"destructive"});return}G.mutate({id:i.id,name:c,description:p,rowIds:Array.from(e)})}},z=async R=>{const C=`${window.location.origin}/custom/${R.shareId}`;try{await navigator.clipboard.writeText(C),x(R.id),f(C),j({title:"Link copied!",description:"Share link copied to clipboard."}),setTimeout(()=>x(""),2e3)}catch{j({title:"Error",description:"Failed to copy link.",variant:"destructive"})}};return O||B?n.jsx(ja,{type:"ripple",message:"Loading Custom Table Lists..."}):n.jsxs(n.Fragment,{children:[n.jsx("nav",{className:"sticky top-0 z-50 w-full border-b border-white/20 dark:border-white/10 bg-white/30 dark:bg-black/30 backdrop-blur-2xl shadow-[0_8px_32px_0_rgba(0,0,0,0.12)]",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsxs("div",{className:"flex h-14 items-center justify-between text-[12px]",children:[n.jsx("div",{className:"flex items-center space-x-2",children:n.jsxs("div",{className:"flex items-center space-x-2 hover:opacity-80 transition-opacity",children:[n.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg overflow-hidden",children:n.jsx("img",{src:"/assets/FamilyMart.png",alt:"Logo",className:"h-full w-full object-cover"})}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300",style:{fontSize:"12px"},children:"Custom Tables"}),n.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:"Create table , select list and share"})]})]})}),n.jsxs(I,{onClick:()=>S("/"),variant:"outline",size:"sm",className:"btn-glass w-8 h-8 md:w-auto md:h-9 p-0 md:px-3 pagination-button group transition-all duration-300 ease-out hover:scale-110 hover:shadow-lg hover:shadow-blue-500/20 active:scale-95 active:shadow-none",title:"Home",children:[n.jsx(Nu,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 transition-all duration-300"}),n.jsx("span",{className:"hidden md:inline ml-2 text-xs transition-all duration-300",children:"Home"})]})]})})}),n.jsx("main",{className:"min-h-screen bg-gray-50 dark:bg-black pt-6 pb-20",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{className:`text-sm ${a?"text-green-600 dark:text-green-400 font-semibold":"text-gray-600 dark:text-gray-400"}`,children:[e.size," location(s) selected"]}),n.jsxs(I,{onClick:()=>s(!0),disabled:e.size===0,className:`bg-transparent border border-gray-300 dark:border-gray-700 ${e.size>0?"text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/10":"text-gray-400 dark:text-gray-600"} disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent transition-colors`,children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Create Custom Table"]})]}),n.jsxs("div",{className:"bg-white/90 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-300 dark:border-white/10 shadow-xl rounded-3xl overflow-hidden mb-8",children:[n.jsxs("div",{className:"p-6 pb-4 border-b border-gray-300 dark:border-white/10",children:[n.jsx("h2",{className:"text-sm font-semibold mb-4 bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400 bg-clip-text text-transparent",children:"Select Locations"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(ke,{placeholder:"Search locations...",value:g,onChange:R=>v(R.target.value),className:"max-w-sm bg-white dark:bg-black/20 border-gray-300 dark:border-white/20 text-sm h-8 shadow-sm"}),n.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center px-3 bg-white dark:bg-black/20 rounded-md border border-gray-300 dark:border-white/20 shadow-sm font-medium",children:[e.size," selected"]})]})]}),n.jsx("div",{className:"overflow-x-auto overflow-y-auto max-h-[600px] scrollbar-thin scrollbar-thumb-gray-400 dark:scrollbar-thumb-gray-600 scrollbar-track-transparent",children:n.jsxs("table",{className:"w-full min-w-[600px]",children:[n.jsx("thead",{className:"bg-gradient-to-r from-slate-200 to-slate-300 dark:from-slate-800/50 dark:to-slate-900/50 sticky top-0 z-10",children:n.jsxs("tr",{className:"border-b-2 border-gray-300 dark:border-white/10",children:[n.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold whitespace-nowrap",children:n.jsx(qr,{checked:e.size===U.length&&U.length>0,onCheckedChange:R=>{t(R?new Set(U.map(C=>C.id)):new Set)}})}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold whitespace-nowrap",children:"No"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold whitespace-nowrap",children:"Route"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold whitespace-nowrap",children:"Code"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold whitespace-nowrap",children:"Location"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold whitespace-nowrap",children:"Delivery"})]})}),n.jsx("tbody",{children:U.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"px-4 py-12 text-center text-gray-600 dark:text-gray-400",children:g?"No locations found matching your search":"No locations available"})}):U.map((R,C)=>{const ee=e.has(R.id);return n.jsxs("tr",{className:`custom-table-row border-b border-gray-200 dark:border-gray-900 hover:bg-blue-50 dark:hover:bg-blue-900/10 cursor-pointer ${ee?"text-green-600 dark:text-green-400 font-semibold":"text-gray-900 dark:text-gray-100"}`,onClick:()=>Q(R.id),children:[n.jsx("td",{className:"px-4 py-2",children:n.jsx(qr,{checked:ee,onCheckedChange:()=>Q(R.id),onClick:he=>he.stopPropagation()})}),n.jsx("td",{className:`px-4 py-2 text-xs font-medium whitespace-nowrap ${ee?"font-semibold":""}`,children:R.no}),n.jsx("td",{className:"px-4 py-2 text-xs whitespace-nowrap",children:n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300",children:R.route})}),n.jsx("td",{className:`px-4 py-2 text-xs whitespace-nowrap ${ee?"font-semibold":""}`,children:R.code}),n.jsx("td",{className:`px-4 py-2 text-xs font-semibold max-w-[300px] truncate ${ee?"font-bold":""}`,title:R.location,children:R.location}),n.jsx("td",{className:"px-4 py-2 text-xs whitespace-nowrap",children:n.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-medium ${R.delivery==="Daily"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":R.delivery==="Alt 1"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300":R.delivery==="Alt 2"?"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300":"bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-300"}`,children:R.delivery})})]},R.id)})})]})}),n.jsx("div",{className:"p-4 bg-gradient-to-r from-slate-200 to-slate-300 dark:from-slate-800/50 dark:to-slate-900/50 border-t border-gray-300 dark:border-white/10",children:n.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:["Showing ",U.length," of ",A.length," location(s)"]})})]}),n.jsxs("div",{className:"bg-white/90 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-300 dark:border-white/10 shadow-xl rounded-3xl p-6",children:[n.jsx("h6",{className:"font-semibold mb-4 text-gray-900 dark:text-white",style:{fontSize:"12px"},children:"My Custom Tables"}),M.length===0?n.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400 py-8",children:"No custom tables yet. Create one to get started!"}):n.jsx("div",{className:"space-y-4",children:M.map(R=>n.jsxs("div",{className:"custom-table-card flex items-center justify-between p-4 bg-transparent rounded-xl border border-gray-300 dark:border-gray-800/40 hover:bg-gray-50 dark:hover:bg-white/5",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-[12px]",children:R.name}),R.description&&n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:R.description}),n.jsxs("p",{className:"text-gray-500 dark:text-gray-500 mt-1",style:{fontSize:"10px"},children:["Created ",new Date(R.createdAt).toLocaleDateString()]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(I,{onClick:()=>z(R),size:"sm",variant:"outline",className:"bg-transparent border-transparent hover:bg-blue-500/10",title:"Copy share link",children:b===R.id?n.jsx(Er,{className:"h-4 w-4 text-green-500"}):n.jsx(gi,{className:"h-4 w-4"})}),n.jsx(I,{onClick:()=>window.open(`/custom/${R.shareId}`,"_blank"),size:"sm",variant:"outline",className:"bg-transparent border-transparent hover:bg-blue-500/10",children:"View"}),n.jsx(I,{onClick:()=>D(R),size:"sm",variant:"outline",className:"bg-transparent border-transparent hover:bg-green-500/10 text-green-600",title:"Edit locations",children:n.jsx(ma,{className:"h-4 w-4"})}),n.jsx(I,{onClick:()=>L.mutate(R.id),size:"sm",variant:"outline",className:"bg-transparent border-transparent hover:bg-red-500/10 text-red-500",title:"Delete table",children:n.jsx(nn,{className:"h-4 w-4"})})]})]},R.id))})]}),n.jsx(Fe,{open:r,onOpenChange:s,children:n.jsxs(Te,{className:"bg-white/90 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-300 dark:border-white/10 shadow-xl rounded-3xl",style:{maxHeight:"min(80vh, calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 40px))",touchAction:"pan-y"},children:[n.jsx("div",{className:"absolute inset-0 -z-10 rounded-3xl bg-gradient-to-br from-white/60 via-white/40 to-white/50 dark:from-black/40 dark:via-black/20 dark:to-black/30 border-0 shadow-inner",style:{backdropFilter:"blur(40px)",WebkitBackdropFilter:"blur(40px)"}}),n.jsxs(Ie,{className:"relative z-10",style:{paddingTop:"max(1.5rem, env(safe-area-inset-top))"},children:[n.jsx(Oe,{children:"Create Custom Table"}),n.jsx(qe,{children:"Enter a name and optional description for your custom table."})]}),n.jsxs("div",{className:"space-y-4 py-4 relative z-10",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Table Name *"}),n.jsx(ke,{value:c,onChange:R=>d(R.target.value),placeholder:"e.g., Weekend Deliveries",className:"bg-white/10 dark:bg-black/10 backdrop-blur-sm border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Description (optional)"}),n.jsx(ke,{value:p,onChange:R=>u(R.target.value),placeholder:"Add a description...",className:"bg-white/10 dark:bg-black/10 backdrop-blur-sm border-transparent"})]}),n.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.size," location(s) will be included in this table"]})]}),n.jsxs(He,{className:"relative z-10",style:{paddingBottom:"max(1rem, env(safe-area-inset-bottom))"},children:[n.jsx(I,{variant:"outline",onClick:()=>s(!1),className:"bg-transparent border-transparent text-red-500 hover:bg-red-500/10",children:"Cancel"}),n.jsx(I,{onClick:F,disabled:_.isPending,className:"bg-blue-600 hover:bg-blue-700 text-white",children:_.isPending?"Creating...":"Create Table"})]})]})}),n.jsx(Fe,{open:a,onOpenChange:R=>{o(R),R||(l(null),d(""),u(""),t(new Set))},children:n.jsxs(Te,{className:"bg-white/90 dark:bg-black/30 backdrop-blur-2xl border-2 border-gray-300 dark:border-white/10 shadow-xl rounded-3xl max-h-[80vh] overflow-y-auto",style:{maxHeight:"min(80vh, calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 40px))",touchAction:"pan-y"},children:[n.jsx("div",{className:"absolute inset-0 -z-10 rounded-3xl bg-gradient-to-br from-white/60 via-white/40 to-white/50 dark:from-black/40 dark:via-black/20 dark:to-black/30 border-0 shadow-inner",style:{backdropFilter:"blur(40px)",WebkitBackdropFilter:"blur(40px)"}}),n.jsxs(Ie,{className:"relative z-10",style:{paddingTop:"max(1.5rem, env(safe-area-inset-top))"},children:[n.jsx(Oe,{children:"Edit Custom Table"}),n.jsx(qe,{children:"Update name, description, or add/remove locations."})]}),n.jsxs("div",{className:"space-y-4 py-4 relative z-10",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Table Name *"}),n.jsx(ke,{value:c,onChange:R=>d(R.target.value),placeholder:"e.g., Weekend Deliveries",className:"bg-white/10 dark:bg-black/10 backdrop-blur-sm border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Description (optional)"}),n.jsx(ke,{value:p,onChange:R=>u(R.target.value),placeholder:"Add a description...",className:"bg-white/10 dark:bg-black/10 backdrop-blur-sm border-transparent"})]}),n.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.size," location(s) selected"]}),n.jsxs("div",{className:"border-t pt-4 space-y-2 max-h-[300px] overflow-y-auto",children:[n.jsx("h4",{className:"font-medium text-sm mb-2",children:"Select Locations:"}),U.map(R=>n.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded cursor-pointer",children:[n.jsx(qr,{checked:e.has(R.id),onCheckedChange:()=>Q(R.id)}),n.jsxs("span",{className:"text-sm",children:[R.location," (",R.route,")"]})]},R.id))]})]}),n.jsxs(He,{className:"relative z-10",style:{paddingBottom:"max(1rem, env(safe-area-inset-bottom))"},children:[n.jsx(I,{variant:"outline",onClick:()=>o(!1),className:"bg-transparent border-transparent text-red-500 hover:bg-red-500/10",children:"Cancel"}),n.jsx(I,{onClick:V,disabled:G.isPending,className:"bg-green-600 hover:bg-green-700 text-white",children:G.isPending?"Updating...":"Update Table"})]})]})})]})}),n.jsx(Ca,{})]})}function L2(){const[,e]=Id("/custom/:shareId"),t=e==null?void 0:e.shareId,{columns:r,isLoading:s}=vi(),{data:a,isLoading:o,error:i}=qt({queryKey:[`/api/custom-tables/share/${t}`],enabled:!!t}),{data:l=[],isLoading:c}=qt({queryKey:[`/api/custom-tables/${a==null?void 0:a.id}/rows`],enabled:!!(a!=null&&a.id)}),[d,p]=h.useState(""),[u,m]=h.useState([]),[f,b]=h.useState([]),[x,g]=h.useState(null),{filteredRows:v,displayColumns:y,deliveryOptions:w}=h.useMemo(()=>{if(l.length===0||r.length===0)return{filteredRows:l,displayColumns:r,deliveryOptions:[]};const G=Array.from(new Set(l.map(z=>z.delivery).filter(Boolean)));let L=[...l];const Q=new Date().getDay(),F=[1,3,5,0].includes(Q),D=[2,4,6].includes(Q);L=L.sort((z,R)=>{const C=z.deliveryAlt||"normal",ee=R.deliveryAlt||"normal";if(C==="inactive"&&ee!=="inactive")return 1;if(C!=="inactive"&&ee==="inactive")return-1;if(F){if((C==="alt1"||C==="normal")&&ee==="alt2")return-1;if(C==="alt2"&&(ee==="alt1"||ee==="normal"))return 1}else if(D){if((C==="alt2"||C==="normal")&&ee==="alt1")return-1;if(C==="alt1"&&(ee==="alt2"||ee==="normal"))return 1}return 0}),f.length>0&&(L=L.filter(z=>f.includes(z.route))),d&&(L=L.filter(z=>Object.values(z).some(R=>String(R).toLowerCase().includes(d.toLowerCase())))),u.length>0&&(L=L.filter(z=>!u.includes(z.delivery)));const V=r.filter(z=>z.dataKey!=="latitude"&&z.dataKey!=="longitude"&&z.dataKey!=="tollPrice");return{filteredRows:L,displayColumns:V,deliveryOptions:G}},[l,r,d,u,f]),j=h.useMemo(()=>{const G=l.find(D=>D.location==="QL Kitchen");if(!G||!G.latitude||!G.longitude)return v.map(D=>({...D,kilometer:"",segmentDistance:0}));const L=parseFloat(G.latitude),Q=parseFloat(G.longitude);if(!Number.isFinite(L)||!Number.isFinite(Q))return v.map(D=>({...D,kilometer:"",segmentDistance:0}));if(d!==""||f.length>0||u.length>0){let D=0,V=L,z=Q;return v.map(R=>{if(R.location==="QL Kitchen")return D=0,V=L,z=Q,{...R,kilometer:0,segmentDistance:0};if(!R.latitude||!R.longitude)return{...R,kilometer:"",segmentDistance:0};const C=parseFloat(R.latitude),ee=parseFloat(R.longitude);if(!Number.isFinite(C)||!Number.isFinite(ee))return{...R,kilometer:"",segmentDistance:0};const he=Pn(V,z,C,ee);return D+=he,V=C,z=ee,{...R,kilometer:D,segmentDistance:he}})}else return v.map(D=>{if(D.location==="QL Kitchen")return{...D,kilometer:0,segmentDistance:0};if(!D.latitude||!D.longitude)return{...D,kilometer:"",segmentDistance:0};const V=parseFloat(D.latitude),z=parseFloat(D.longitude);if(!Number.isFinite(V)||!Number.isFinite(z))return{...D,kilometer:"",segmentDistance:0};const R=Pn(L,Q,V,z);return{...D,kilometer:R,segmentDistance:R}})},[l,v,d,f,u]),k=Ce({mutationFn:async G=>(console.log("Read-only mode: Changes not saved",G),G)}),S=Ce({mutationFn:async G=>{console.log("Read-only mode: Delete not allowed",G)}}),A=Ce({mutationFn:async G=>G.map(Q=>l.find(F=>F.id===Q)).filter(Q=>Q!==void 0)}),O=Ce({mutationFn:async G=>G.map(Q=>r.find(F=>F.id===Q)).filter(Q=>Q!==void 0)}),M=Ce({mutationFn:async G=>{console.log("Read-only mode: Column delete not allowed",G)}}),B=()=>{p(""),m([])},[U,_]=ye.useState(!1);return ye.useEffect(()=>{const G=setTimeout(()=>{_(!0)},5e3);return()=>clearTimeout(G)},[]),s||o||c||!U?n.jsx("div",{className:"min-h-screen relative",children:n.jsx(ja,{message:"Loading Custom Table...",type:"ripple"})}):i||!a?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx("div",{className:"flex h-16 w-16 mx-auto items-center justify-center rounded-lg bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400",children:n.jsx(fi,{className:"h-8 w-8"})}),n.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Custom Table Not Found"}),n.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"The custom table you're looking for doesn't exist or has been removed."})]})}):n.jsxs(n.Fragment,{children:[n.jsx("nav",{className:"sticky top-0 z-50 w-full border-b-2 border-blue-500/50 dark:border-blue-400/50 bg-gradient-to-r from-blue-500/10 via-blue-600/10 to-blue-700/10 dark:from-blue-500/20 dark:via-blue-600/20 dark:to-blue-700/20 backdrop-blur supports-[backdrop-filter]:bg-background/60 shadow-lg shadow-blue-500/20",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsxs("div",{className:"flex h-14 items-center justify-between text-[12px]",children:[n.jsx("div",{className:"flex items-center space-x-2",children:n.jsxs("div",{className:"flex items-center space-x-2 hover:opacity-80 transition-opacity",children:[n.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg overflow-hidden",children:n.jsx("img",{src:"/assets/FamilyMart.png",alt:"Logo",className:"h-full w-full object-cover"})}),n.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300",style:{fontSize:"14px"},children:a.name})]})}),n.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Custom Table View"})]})})}),n.jsx("main",{className:"pt-4",children:n.jsx("div",{className:"container mx-auto px-4 py-8",children:n.jsx(Hi,{rows:j,columns:y,editMode:!1,isSharedView:!0,hideShareButton:!0,onUpdateRow:k,onDeleteRow:S,onReorderRows:A,onReorderColumns:O,onDeleteColumn:M,onSelectRowForImage:g,onShowCustomization:()=>{},onOptimizeRoute:()=>{},isAuthenticated:!1,searchTerm:d,onSearchTermChange:p,filterValue:[],onFilterValueChange:()=>{},deliveryFilterValue:u,onDeliveryFilterValueChange:m,routeOptions:[],deliveryOptions:w,onClearAllFilters:B,filteredRowsCount:j.length,totalRowsCount:l.length})})}),n.jsx(Ca,{editMode:!1})]})}function _2(e,t){return h.useReducer((r,s)=>t[r][s]??r,e)}var ol="ScrollArea",[Xh,fC]=Jt(ol),[F2,Ft]=Xh(ol),Jh=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:s="hover",dir:a,scrollHideDelay:o=600,...i}=e,[l,c]=h.useState(null),[d,p]=h.useState(null),[u,m]=h.useState(null),[f,b]=h.useState(null),[x,g]=h.useState(null),[v,y]=h.useState(0),[w,j]=h.useState(0),[k,S]=h.useState(!1),[A,O]=h.useState(!1),M=ct(t,U=>c(U)),B=ni(a);return n.jsx(F2,{scope:r,type:s,dir:B,scrollHideDelay:o,scrollArea:l,viewport:d,onViewportChange:p,content:u,onContentChange:m,scrollbarX:f,onScrollbarXChange:b,scrollbarXEnabled:k,onScrollbarXEnabledChange:S,scrollbarY:x,onScrollbarYChange:g,scrollbarYEnabled:A,onScrollbarYEnabledChange:O,onCornerWidthChange:y,onCornerHeightChange:j,children:n.jsx($e.div,{dir:B,...i,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});Jh.displayName=ol;var Zh="ScrollAreaViewport",ef=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:s,nonce:a,...o}=e,i=Ft(Zh,r),l=h.useRef(null),c=ct(t,l,i.onViewportChange);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),n.jsx($e.div,{"data-radix-scroll-area-viewport":"",...o,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:n.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});ef.displayName=Zh;var Zt="ScrollAreaScrollbar",il=h.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=Ft(Zt,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=a,l=e.orientation==="horizontal";return h.useEffect(()=>(l?o(!0):i(!0),()=>{l?o(!1):i(!1)}),[l,o,i]),a.type==="hover"?n.jsx(z2,{...s,ref:t,forceMount:r}):a.type==="scroll"?n.jsx($2,{...s,ref:t,forceMount:r}):a.type==="auto"?n.jsx(tf,{...s,ref:t,forceMount:r}):a.type==="always"?n.jsx(ll,{...s,ref:t}):null});il.displayName=Zt;var z2=h.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=Ft(Zt,e.__scopeScrollArea),[o,i]=h.useState(!1);return h.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),i(!0)},p=()=>{c=window.setTimeout(()=>i(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",p),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",p)}}},[a.scrollArea,a.scrollHideDelay]),n.jsx(Wt,{present:r||o,children:n.jsx(tf,{"data-state":o?"visible":"hidden",...s,ref:t})})}),$2=h.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=Ft(Zt,e.__scopeScrollArea),o=e.orientation==="horizontal",i=Da(()=>c("SCROLL_END"),100),[l,c]=_2("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return h.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,a.scrollHideDelay,c]),h.useEffect(()=>{const d=a.viewport,p=o?"scrollLeft":"scrollTop";if(d){let u=d[p];const m=()=>{const f=d[p];u!==f&&(c("SCROLL"),i()),u=f};return d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[a.viewport,o,c,i]),n.jsx(Wt,{present:r||l!=="hidden",children:n.jsx(ll,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:xe(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:xe(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),tf=h.forwardRef((e,t)=>{const r=Ft(Zt,e.__scopeScrollArea),{forceMount:s,...a}=e,[o,i]=h.useState(!1),l=e.orientation==="horizontal",c=Da(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,p=r.viewport.offsetHeight<r.viewport.scrollHeight;i(l?d:p)}},10);return An(r.viewport,c),An(r.content,c),n.jsx(Wt,{present:s||o,children:n.jsx(ll,{"data-state":o?"visible":"hidden",...a,ref:t})})}),ll=h.forwardRef((e,t)=>{const{orientation:r="vertical",...s}=e,a=Ft(Zt,e.__scopeScrollArea),o=h.useRef(null),i=h.useRef(0),[l,c]=h.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=of(l.viewport,l.content),p={...s,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:m=>o.current=m,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:m=>i.current=m};function u(m,f){return W2(m,i.current,l,f)}return r==="horizontal"?n.jsx(B2,{...p,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const m=a.viewport.scrollLeft,f=Mc(m,l,a.dir);o.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=u(m,a.dir))}}):r==="vertical"?n.jsx(U2,{...p,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const m=a.viewport.scrollTop,f=Mc(m,l);o.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=u(m))}}):null}),B2=h.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...a}=e,o=Ft(Zt,e.__scopeScrollArea),[i,l]=h.useState(),c=h.useRef(null),d=ct(t,c,o.onScrollbarXChange);return h.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),n.jsx(nf,{"data-orientation":"horizontal",...a,ref:d,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ra(r)+"px",...e.style},onThumbPointerDown:p=>e.onThumbPointerDown(p.x),onDragScroll:p=>e.onDragScroll(p.x),onWheelScroll:(p,u)=>{if(o.viewport){const m=o.viewport.scrollLeft+p.deltaX;e.onWheelScroll(m),cf(m,u)&&p.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&s({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:ra(i.paddingLeft),paddingEnd:ra(i.paddingRight)}})}})}),U2=h.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...a}=e,o=Ft(Zt,e.__scopeScrollArea),[i,l]=h.useState(),c=h.useRef(null),d=ct(t,c,o.onScrollbarYChange);return h.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),n.jsx(nf,{"data-orientation":"vertical",...a,ref:d,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ra(r)+"px",...e.style},onThumbPointerDown:p=>e.onThumbPointerDown(p.y),onDragScroll:p=>e.onDragScroll(p.y),onWheelScroll:(p,u)=>{if(o.viewport){const m=o.viewport.scrollTop+p.deltaY;e.onWheelScroll(m),cf(m,u)&&p.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&s({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:ra(i.paddingTop),paddingEnd:ra(i.paddingBottom)}})}})}),[G2,rf]=Xh(Zt),nf=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:s,hasThumb:a,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:p,onResize:u,...m}=e,f=Ft(Zt,r),[b,x]=h.useState(null),g=ct(t,M=>x(M)),v=h.useRef(null),y=h.useRef(""),w=f.viewport,j=s.content-s.viewport,k=Ut(p),S=Ut(c),A=Da(u,10);function O(M){if(v.current){const B=M.clientX-v.current.left,U=M.clientY-v.current.top;d({x:B,y:U})}}return h.useEffect(()=>{const M=B=>{const U=B.target;(b==null?void 0:b.contains(U))&&k(B,j)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[w,b,j,k]),h.useEffect(S,[s,S]),An(b,A),An(f.content,A),n.jsx(G2,{scope:r,scrollbar:b,hasThumb:a,onThumbChange:Ut(o),onThumbPointerUp:Ut(i),onThumbPositionChange:S,onThumbPointerDown:Ut(l),children:n.jsx($e.div,{...m,ref:g,style:{position:"absolute",...m.style},onPointerDown:xe(e.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),v.current=b.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),O(M))}),onPointerMove:xe(e.onPointerMove,O),onPointerUp:xe(e.onPointerUp,M=>{const B=M.target;B.hasPointerCapture(M.pointerId)&&B.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=y.current,f.viewport&&(f.viewport.style.scrollBehavior=""),v.current=null})})})}),ta="ScrollAreaThumb",sf=h.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=rf(ta,e.__scopeScrollArea);return n.jsx(Wt,{present:r||a.hasThumb,children:n.jsx(V2,{ref:t,...s})})}),V2=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:s,...a}=e,o=Ft(ta,r),i=rf(ta,r),{onThumbPositionChange:l}=i,c=ct(t,u=>i.onThumbChange(u)),d=h.useRef(void 0),p=Da(()=>{d.current&&(d.current(),d.current=void 0)},100);return h.useEffect(()=>{const u=o.viewport;if(u){const m=()=>{if(p(),!d.current){const f=H2(u,l);d.current=f,l()}};return l(),u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[o.viewport,p,l]),n.jsx($e.div,{"data-state":i.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:xe(e.onPointerDownCapture,u=>{const f=u.target.getBoundingClientRect(),b=u.clientX-f.left,x=u.clientY-f.top;i.onThumbPointerDown({x:b,y:x})}),onPointerUp:xe(e.onPointerUp,i.onThumbPointerUp)})});sf.displayName=ta;var cl="ScrollAreaCorner",af=h.forwardRef((e,t)=>{const r=Ft(cl,e.__scopeScrollArea),s=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&s?n.jsx(q2,{...e,ref:t}):null});af.displayName=cl;var q2=h.forwardRef((e,t)=>{const{__scopeScrollArea:r,...s}=e,a=Ft(cl,r),[o,i]=h.useState(0),[l,c]=h.useState(0),d=!!(o&&l);return An(a.scrollbarX,()=>{var u;const p=((u=a.scrollbarX)==null?void 0:u.offsetHeight)||0;a.onCornerHeightChange(p),c(p)}),An(a.scrollbarY,()=>{var u;const p=((u=a.scrollbarY)==null?void 0:u.offsetWidth)||0;a.onCornerWidthChange(p),i(p)}),d?n.jsx($e.div,{...s,ref:t,style:{width:o,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function ra(e){return e?parseInt(e,10):0}function of(e,t){const r=e/t;return isNaN(r)?0:r}function Ra(e){const t=of(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-r)*t;return Math.max(s,18)}function W2(e,t,r,s="ltr"){const a=Ra(r),o=a/2,i=t||o,l=a-i,c=r.scrollbar.paddingStart+i,d=r.scrollbar.size-r.scrollbar.paddingEnd-l,p=r.content-r.viewport,u=s==="ltr"?[0,p]:[p*-1,0];return lf([c,d],u)(e)}function Mc(e,t,r="ltr"){const s=Ra(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-a,i=t.content-t.viewport,l=o-s,c=r==="ltr"?[0,i]:[i*-1,0],d=gg(e,c);return lf([0,i],[0,l])(d)}function lf(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(r-e[0])}}function cf(e,t){return e>0&&e<t}var H2=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},s=0;return function a(){const o={left:e.scrollLeft,top:e.scrollTop},i=r.left!==o.left,l=r.top!==o.top;(i||l)&&t(),r=o,s=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(s)};function Da(e,t){const r=Ut(e),s=h.useRef(0);return h.useEffect(()=>()=>window.clearTimeout(s.current),[]),h.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(r,t)},[r,t])}function An(e,t){const r=Ut(t);Kc(()=>{let s=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(s),a.unobserve(e)}}},[e,r])}var df=Jh,K2=ef,Q2=af;const uf=h.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(df,{ref:s,className:J("relative overflow-hidden",e),...r,children:[n.jsx(K2,{className:"h-full w-full rounded-[inherit]",children:t}),n.jsx(mf,{}),n.jsx(Q2,{})]}));uf.displayName=df.displayName;const mf=h.forwardRef(({className:e,orientation:t="vertical",...r},s)=>n.jsx(il,{ref:s,orientation:t,className:J("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:n.jsx(sf,{className:"relative flex-1 rounded-full bg-border"})}));mf.displayName=il.displayName;function Y2(){return n.jsx("div",{className:"min-h-screen w-full bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950",children:n.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10 border border-blue-500/20",children:n.jsx(No,{className:"h-6 w-6 text-blue-400"})}),n.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent",children:"User Guide"})]}),n.jsx(Jg,{href:"/",children:n.jsxs(I,{variant:"outline",size:"sm",className:"gap-2",children:[n.jsx(Nu,{className:"h-4 w-4"}),"Back"]})})]}),n.jsxs(ka,{className:"bg-slate-900/50 border-slate-800 backdrop-blur-sm",children:[n.jsx(Ip,{children:n.jsxs(Op,{className:"text-slate-100 flex items-center gap-2",children:[n.jsx(fi,{className:"h-5 w-5 text-blue-400"}),"Welcome to the Route Management System"]})}),n.jsx(Na,{children:n.jsx(uf,{className:"h-[calc(100vh-250px)] pr-4",children:n.jsxs("div",{className:"space-y-6 text-slate-300 leading-relaxed text-sm",children:[n.jsxs("section",{children:[n.jsxs("h2",{className:"text-lg font-semibold text-slate-100 mb-3 flex items-center gap-2",children:[n.jsx(No,{className:"h-4 w-4 text-blue-400"}),"What is This App?"]}),n.jsx("p",{className:"text-sm",children:"This is a comprehensive delivery route management system designed to help you efficiently manage delivery location data. You can organize, edit, and optimize delivery routes with ease using an interactive drag-and-drop interface. The system is built to streamline your logistics operations and improve delivery efficiency."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-lg font-semibold text-slate-100 mb-3",children:"Key Features"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-blue-400 mb-2 flex items-center gap-2 text-sm",children:[n.jsx(_b,{className:"h-4 w-4"}),"1. Table Management"]}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[n.jsx("li",{children:"Add, edit, and delete location data rows"}),n.jsx("li",{children:"Drag-and-drop to reorder entries"}),n.jsx("li",{children:"Show/hide columns based on your needs"}),n.jsx("li",{children:"Search and filter to quickly find data"}),n.jsx("li",{children:"Real-time calculations and statistics"})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-blue-400 mb-2 flex items-center gap-2 text-sm",children:[n.jsx(Pb,{className:"h-4 w-4"}),"2. Edit Mode"]}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[n.jsx("li",{children:'Click the menu button () and select "Enter Edit Mode"'}),n.jsx("li",{children:"Add, modify, or delete data while in edit mode"}),n.jsx("li",{children:"Drag-and-drop to rearrange columns"}),n.jsx("li",{children:"Customize marker colors for map visualization"}),n.jsx("li",{children:'Click "Exit Edit Mode" when finished'})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-blue-400 mb-2 flex items-center gap-2 text-sm",children:[n.jsx($s,{className:"h-4 w-4"}),"3. Route Optimization"]}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[n.jsx("li",{children:'Click "Optimize Route" to calculate optimal delivery sequences'}),n.jsx("li",{children:"System automatically calculates distances and arranges the shortest routes"}),n.jsx("li",{children:"Supports Heavy Goods Vehicle (HGV/Lorry) routing profiles"}),n.jsx("li",{children:"View distances in kilometers from your base location (QL Kitchen)"}),n.jsx("li",{children:"Batch processing with intelligent rate limiting"})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-blue-400 mb-2 flex items-center gap-2 text-sm",children:[n.jsx(Sb,{className:"h-4 w-4"}),"4. Map View"]}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[n.jsx("li",{children:"Click the info icon () to view locations on the map"}),n.jsx("li",{children:"Marker colors can be customized in edit mode"}),n.jsx("li",{children:"Fullscreen map view for better visualization"}),n.jsx("li",{children:"Automatic route calculation from base location"}),n.jsx("li",{children:"Interactive markers with location details"})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-blue-400 mb-2 flex items-center gap-2 text-sm",children:[n.jsx(rn,{className:"h-4 w-4"}),"5. Image Gallery"]}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[n.jsx("li",{children:"Upload images for each location"}),n.jsx("li",{children:"Support for multiple images per location"}),n.jsx("li",{children:"Lightbox view to see images in full size"}),n.jsx("li",{children:"Upload from your device or enter image URLs"}),n.jsx("li",{children:"Support for various image formats and large files"})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-blue-400 mb-2 flex items-center gap-2 text-sm",children:[n.jsx(zb,{className:"h-4 w-4"}),"6. Delivery Alternate System"]}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[n.jsx("li",{children:"4 delivery states: Normal, Alt 1, Alt 2, Inactive"}),n.jsx("li",{children:"Alt 1: Deliveries on Monday/Wednesday/Friday/Sunday"}),n.jsx("li",{children:"Alt 2: Deliveries on Tuesday/Thursday/Saturday"}),n.jsx("li",{children:"Automatic sorting based on current day"}),n.jsx("li",{children:"Color-coded visual indicators for each state"}),n.jsx("li",{children:"Off-schedule entries displayed with reduced brightness"})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-blue-400 mb-2 flex items-center gap-2 text-sm",children:[n.jsx(gi,{className:"h-4 w-4"}),"7. Share Table"]}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[n.jsx("li",{children:'Click "Share Table" to generate a shareable link'}),n.jsx("li",{children:"Save links with custom names for easy reference"}),n.jsx("li",{children:"Share links with team members for view-only access"}),n.jsx("li",{children:"Access saved links from the menu"}),n.jsx("li",{children:"Shared tables maintain your current filters and column visibility"})]})]})]})]}),n.jsxs("section",{children:[n.jsxs("h2",{className:"text-lg font-semibold text-slate-100 mb-3 flex items-center gap-2",children:[n.jsx(kb,{className:"h-4 w-4 text-yellow-400"}),"Usage Tips"]}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4 text-sm",children:[n.jsxs("li",{children:[n.jsx("span",{className:"font-semibold",children:"Default Columns:"}),' By default, only 4 columns are displayed (No, Code, Location, Delivery). Use "Show/Hide Columns" to toggle additional columns.']}),n.jsxs("li",{children:[n.jsx("span",{className:"font-semibold",children:"Drag Handle:"})," Use the drag icon () on the left side of each row to drag-and-drop and reorder entries."]}),n.jsxs("li",{children:[n.jsx("span",{className:"font-semibold",children:"Search:"})," Use the search box to quickly find data. Search works across all visible columns."]}),n.jsxs("li",{children:[n.jsx("span",{className:"font-semibold",children:"Filters:"})," Filter by Route or Delivery status using the dropdown filters for focused views."]}),n.jsxs("li",{children:[n.jsx("span",{className:"font-semibold",children:"Calculations:"}),' The "Totals" row at the bottom automatically calculates sum/count based on visible data (after filters/search).']}),n.jsxs("li",{children:[n.jsx("span",{className:"font-semibold",children:"Inactive Rows:"})," Toggle the active/inactive state to temporarily hide locations. Inactive rows automatically sort to the bottom."]}),n.jsxs("li",{children:[n.jsx("span",{className:"font-semibold",children:"Header Content:"})," Slide left/right to view different header pages if multiple pages are configured."]}),n.jsxs("li",{children:[n.jsx("span",{className:"font-semibold",children:"Layout Preferences:"})," Your column visibility and order preferences are saved per user and persist across sessions."]})]})]}),n.jsxs("section",{children:[n.jsxs("h2",{className:"text-lg font-semibold text-slate-100 mb-3 flex items-center gap-2",children:[n.jsx(Tb,{className:"h-4 w-4 text-green-400"}),"Getting Started"]}),n.jsxs("ol",{className:"list-decimal list-inside space-y-2 ml-4 text-sm",children:[n.jsx("li",{children:"Browse the existing table data to familiarize yourself with the interface"}),n.jsx("li",{children:"Use search and filters to explore the data"}),n.jsx("li",{children:"Click the menu button () to access additional options"}),n.jsx("li",{children:"Enter Edit Mode to make changes to the data"}),n.jsx("li",{children:"Try drag-and-drop to reorder rows and customize your view"}),n.jsx("li",{children:"Click the info icon () to view locations on the map"}),n.jsx("li",{children:'Use "Optimize Route" to calculate efficient delivery sequences'}),n.jsx("li",{children:"Exit Edit Mode when you're done making changes"})]})]}),n.jsxs("section",{children:[n.jsxs("h2",{className:"text-lg font-semibold text-slate-100 mb-3 flex items-center gap-2",children:[n.jsx(wb,{className:"h-4 w-4 text-purple-400"}),"Keyboard Shortcuts"]}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[n.jsxs("li",{children:[n.jsx("kbd",{className:"px-2 py-1 text-xs bg-slate-800 rounded border border-slate-700",children:"Esc"})," - Close modal/dialog windows"]}),n.jsxs("li",{children:[n.jsx("kbd",{className:"px-2 py-1 text-xs bg-slate-800 rounded border border-slate-700",children:"Enter"})," - Submit forms and confirm actions"]})]})]}),n.jsxs("section",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4",children:[n.jsxs("h2",{className:"text-lg font-semibold text-blue-400 mb-2 flex items-center gap-2",children:[n.jsx(vu,{className:"h-4 w-4"}),"Important Notes"]}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[n.jsxs("li",{children:[n.jsx("span",{className:"font-semibold",children:"Route Optimization:"})," Uses OpenRouteService API for commercial vehicle routing"]}),n.jsxs("li",{children:[n.jsx("span",{className:"font-semibold",children:"Toll Information:"})," Toll prices are not available and will display as 0"]}),n.jsxs("li",{children:[n.jsx("span",{className:"font-semibold",children:"Rate Limits:"})," Free tier allows 40 requests per minute, 2000 requests per day"]}),n.jsxs("li",{children:[n.jsx("span",{className:"font-semibold",children:"Batch Processing:"})," For routes with many locations, the system processes requests sequentially to respect rate limits"]}),n.jsxs("li",{children:[n.jsx("span",{className:"font-semibold",children:"Data Privacy:"})," Your layout preferences and settings are stored locally per user"]})]})]}),n.jsxs("section",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-green-400 mb-2",children:"Best Practices"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[n.jsx("li",{children:'Regularly save your work using the "Save Layout" option'}),n.jsx("li",{children:"Use descriptive names when saving share links for easy identification"}),n.jsx("li",{children:"Keep location coordinates accurate for optimal route calculations"}),n.jsx("li",{children:"Use the delivery alternate system to organize regular delivery schedules"}),n.jsx("li",{children:"Take advantage of filters to focus on specific routes or delivery types"})]})]}),n.jsxs("section",{children:[n.jsx("p",{className:"text-center text-slate-400 italic mt-8 text-sm",children:"For technical support or questions, please contact your system administrator."}),n.jsx("p",{className:"text-center text-slate-500 text-xs mt-4",children:"Route Management System  Version 1.0.0"})]})]})})})]})]})})}function X2(){return n.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:n.jsx(ka,{className:"w-full max-w-md mx-4",children:n.jsxs(Na,{className:"pt-6",children:[n.jsxs("div",{className:"flex mb-4 gap-2",children:[n.jsx(vu,{className:"h-8 w-8 text-red-500"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),n.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function J2(){return n.jsx("div",{className:"min-h-screen pb-16 text-sm",children:n.jsxs(Zg,{children:[n.jsx(en,{path:"/",children:()=>n.jsx(I2,{})}),n.jsx(en,{path:"/share/:shareId",children:()=>n.jsx(O2,{})}),n.jsx(en,{path:"/custom-tables",children:()=>n.jsx(M2,{})}),n.jsx(en,{path:"/custom/:shareId",children:()=>n.jsx(L2,{})}),n.jsx(en,{path:"/help",children:()=>n.jsx(Y2,{})}),n.jsx(en,{component:X2})]})})}function Z2(){return n.jsx(v0,{client:kr,children:n.jsx(Ux,{children:n.jsxs($x,{children:[n.jsx(jx,{}),n.jsx(J2,{})]})})})}kd(document.getElementById("root")).render(n.jsx(Z2,{}));
